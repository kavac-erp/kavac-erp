<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KAVAC: Referencia de la clase FinanceConciliationController</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-doc.png"/></td>
  <td id="projectalign">
   <div id="projectname">KAVAC<span id="projectnumber">&#160;v1.0.5</span>
   </div>
   <div id="projectbrief">Sistema de Gestión Organizacional</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="#pro-attribs">Atributos protegidos</a>  </div>
  <div class="headertitle"><div class="title">Referencia de la clase FinanceConciliationController</div></div>
</div><!--header-->
<div class="contents">

<p>Gestión de Finanzas &gt; Banco &gt; Conciliación.  
 <a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#details">Más...</a></p>

<p>Hereda de Controller.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Diagrama de colaboración de FinanceConciliationController:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/d1d/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController__coll__graph.png" border="0" usemap="#aFinanceConciliationController_coll__map" alt="Collaboration graph"/></div>
<map name="aFinanceConciliationController_coll__map" id="aFinanceConciliationController_coll__map">
<area shape="rect" title="Gestión de Finanzas &gt; Banco &gt; Conciliación." alt="" coords="5,5,236,300"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr class="memitem:a095c5d389db211932136b53f25f39685" id="r_a095c5d389db211932136b53f25f39685"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a095c5d389db211932136b53f25f39685">__construct</a> ()</td></tr>
<tr class="memdesc:a095c5d389db211932136b53f25f39685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método constructor de la clase.  <br /></td></tr>
<tr class="separator:a095c5d389db211932136b53f25f39685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca28d0cd4375269279bd3880a4035c00" id="r_aca28d0cd4375269279bd3880a4035c00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#aca28d0cd4375269279bd3880a4035c00">approve</a> ($id)</td></tr>
<tr class="memdesc:aca28d0cd4375269279bd3880a4035c00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actualiza el estado de una conciliacion.  <br /></td></tr>
<tr class="separator:aca28d0cd4375269279bd3880a4035c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435e7d7525d4bcd0ed5e34a469f3adf6" id="r_a435e7d7525d4bcd0ed5e34a469f3adf6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a435e7d7525d4bcd0ed5e34a469f3adf6">create</a> ()</td></tr>
<tr class="memdesc:a435e7d7525d4bcd0ed5e34a469f3adf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra la plantilla del módulo Finanzas &gt; Banco &gt; Conciliación &gt; create.  <br /></td></tr>
<tr class="separator:a435e7d7525d4bcd0ed5e34a469f3adf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726fa8a4b4b187b9ca32ba427aac8137" id="r_a726fa8a4b4b187b9ca32ba427aac8137"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a726fa8a4b4b187b9ca32ba427aac8137">destroy</a> ($id)</td></tr>
<tr class="memdesc:a726fa8a4b4b187b9ca32ba427aac8137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elimina una conciliación.  <br /></td></tr>
<tr class="separator:a726fa8a4b4b187b9ca32ba427aac8137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459ed16587e3a50b39b672c7e473abc5" id="r_a459ed16587e3a50b39b672c7e473abc5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a459ed16587e3a50b39b672c7e473abc5">edit</a> ($id)</td></tr>
<tr class="memdesc:a459ed16587e3a50b39b672c7e473abc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra la plantilla del módulo Finanzas &gt; Banco &gt; Conciliación &gt; create.  <br /></td></tr>
<tr class="separator:a459ed16587e3a50b39b672c7e473abc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3963f202bd516c06c018ca3e075f37f6" id="r_a3963f202bd516c06c018ca3e075f37f6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a3963f202bd516c06c018ca3e075f37f6">getBankAccountConciliationInfo</a> (Request $request)</td></tr>
<tr class="memdesc:a3963f202bd516c06c018ca3e075f37f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que encuentra y retorna los movimientos de una cuenta bancaria que cumplen con parámetros de busqueda.  <br /></td></tr>
<tr class="separator:a3963f202bd516c06c018ca3e075f37f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b23918133d9854fcf5ea53b683688c" id="r_a65b23918133d9854fcf5ea53b683688c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a65b23918133d9854fcf5ea53b683688c">getBankId</a> ($account_id)</td></tr>
<tr class="memdesc:a65b23918133d9854fcf5ea53b683688c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que devuelve el id del banco al que pertenece una cuenta bancaria.  <br /></td></tr>
<tr class="separator:a65b23918133d9854fcf5ea53b683688c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eb02bf039263bcaabc8491a45e98011" id="r_a3eb02bf039263bcaabc8491a45e98011"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a3eb02bf039263bcaabc8491a45e98011">getFileConfigurationDecimalSeparator</a> ( $separator, $fileDelimiters=[','=&gt; 'Coma', &quot;.&quot;=&gt; 'Punto'])</td></tr>
<tr class="memdesc:a3eb02bf039263bcaabc8491a45e98011"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que consigue el separador de decimales usado en el archivo csv/.txt.  <br /></td></tr>
<tr class="separator:a3eb02bf039263bcaabc8491a45e98011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ab52c3f5b76dfa5622019be27d1c53" id="r_a40ab52c3f5b76dfa5622019be27d1c53"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a40ab52c3f5b76dfa5622019be27d1c53">getFileConfigurationDelimiter</a> ( $delimiter, $fileDelimiters=[';'=&gt; 'Punto y Coma', &quot;\t&quot;=&gt; 'Tabulador', ','=&gt; 'Coma'])</td></tr>
<tr class="memdesc:a40ab52c3f5b76dfa5622019be27d1c53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que consigue el delimitador usado en el archivo csv/.txt.  <br /></td></tr>
<tr class="separator:a40ab52c3f5b76dfa5622019be27d1c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfaa96497989fbe4cdd36a9b052b5edb" id="r_acfaa96497989fbe4cdd36a9b052b5edb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#acfaa96497989fbe4cdd36a9b052b5edb">getFileValidationArray</a> ($bank_id)</td></tr>
<tr class="memdesc:acfaa96497989fbe4cdd36a9b052b5edb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que obtiene el array de validación para el archivo de configuración.  <br /></td></tr>
<tr class="separator:acfaa96497989fbe4cdd36a9b052b5edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b0774ba877b369c3a1128cbe304c23" id="r_a79b0774ba877b369c3a1128cbe304c23"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a79b0774ba877b369c3a1128cbe304c23">getInstitution</a> ()</td></tr>
<tr class="memdesc:a79b0774ba877b369c3a1128cbe304c23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene los datos de la organización asociada al usuario autenticado o en su defecto, la organización activa y por defecto.  <br /></td></tr>
<tr class="separator:a79b0774ba877b369c3a1128cbe304c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db5564815def7ec4588f827f2fed8a9" id="r_a0db5564815def7ec4588f827f2fed8a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a0db5564815def7ec4588f827f2fed8a9">getLastTotalResults</a> (Carbon $formDate, Carbon $endDate, int $currency_id, int $accounting_account_id)</td></tr>
<tr class="memdesc:a0db5564815def7ec4588f827f2fed8a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el calculo de las cuentas de acuerdo a como suman.  <br /></td></tr>
<tr class="separator:a0db5564815def7ec4588f827f2fed8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db19fdd230ae36f5cadc50c61a451b0" id="r_a0db19fdd230ae36f5cadc50c61a451b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a> ($ini, $debit, $assets)</td></tr>
<tr class="memdesc:a0db19fdd230ae36f5cadc50c61a451b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el calculo de las cuentas de acuerdo a como suman.  <br /></td></tr>
<tr class="separator:a0db19fdd230ae36f5cadc50c61a451b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdcd5d4c0ace9d353b05295c89a48d6e" id="r_acdcd5d4c0ace9d353b05295c89a48d6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#acdcd5d4c0ace9d353b05295c89a48d6e">guessDecimalSeparator</a> (array $csvData, array $separators=['.', ','])</td></tr>
<tr class="memdesc:acdcd5d4c0ace9d353b05295c89a48d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que obtiene el separador usado en el formato de monto.  <br /></td></tr>
<tr class="separator:acdcd5d4c0ace9d353b05295c89a48d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c949505d1e98703d8da5d552b3732f" id="r_aa9c949505d1e98703d8da5d552b3732f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#aa9c949505d1e98703d8da5d552b3732f">guessDelimiter</a> (string $filePath, array $delimiters=[';', ',', &quot;\t&quot;])</td></tr>
<tr class="memdesc:aa9c949505d1e98703d8da5d552b3732f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que retorna el delimitador usado un archiv .csv.  <br /></td></tr>
<tr class="separator:aa9c949505d1e98703d8da5d552b3732f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149eb92716c1084a935e04a8d95f7347" id="r_a149eb92716c1084a935e04a8d95f7347"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a149eb92716c1084a935e04a8d95f7347">index</a> ()</td></tr>
<tr class="memdesc:a149eb92716c1084a935e04a8d95f7347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra la plantilla del módulo Finanzas &gt; Banco &gt; Conciliación.  <br /></td></tr>
<tr class="separator:a149eb92716c1084a935e04a8d95f7347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fff4ea62dd891823ebb85f5917a0287" id="r_a5fff4ea62dd891823ebb85f5917a0287"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a5fff4ea62dd891823ebb85f5917a0287">pdf</a> ($id)</td></tr>
<tr class="memdesc:a5fff4ea62dd891823ebb85f5917a0287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vista en la que se genera el reporte en pdf de balance de comprobación.  <br /></td></tr>
<tr class="separator:a5fff4ea62dd891823ebb85f5917a0287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4914d07a9bbe4aede7a5dea759f6287" id="r_ae4914d07a9bbe4aede7a5dea759f6287"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#ae4914d07a9bbe4aede7a5dea759f6287">show</a> ($id)</td></tr>
<tr class="memdesc:ae4914d07a9bbe4aede7a5dea759f6287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retorna la informacion de una conciliación.  <br /></td></tr>
<tr class="separator:ae4914d07a9bbe4aede7a5dea759f6287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef485163104597c12185b53cdacf638" id="r_a9ef485163104597c12185b53cdacf638"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a9ef485163104597c12185b53cdacf638">store</a> (Request $request)</td></tr>
<tr class="memdesc:a9ef485163104597c12185b53cdacf638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Guarda la informacion de la conciliación.  <br /></td></tr>
<tr class="separator:a9ef485163104597c12185b53cdacf638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affb03cc19897a1800a0f411264d6c7cc" id="r_affb03cc19897a1800a0f411264d6c7cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#affb03cc19897a1800a0f411264d6c7cc">update</a> (Request $request, $id)</td></tr>
<tr class="memdesc:affb03cc19897a1800a0f411264d6c7cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actualiza la informacion de la conciliacion.  <br /></td></tr>
<tr class="separator:affb03cc19897a1800a0f411264d6c7cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fab98454118c21c15c0d92bb6ca9631" id="r_a7fab98454118c21c15c0d92bb6ca9631"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a7fab98454118c21c15c0d92bb6ca9631">validateFileStructure</a> ($file, $bank_id)</td></tr>
<tr class="memdesc:a7fab98454118c21c15c0d92bb6ca9631"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método que valida la estructura del archivo usado para realizar la conciliación bancaria.  <br /></td></tr>
<tr class="separator:a7fab98454118c21c15c0d92bb6ca9631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca78b35dd9df5b11e63e88796cf08c66" id="r_aca78b35dd9df5b11e63e88796cf08c66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#aca78b35dd9df5b11e63e88796cf08c66">vueList</a> ()</td></tr>
<tr class="memdesc:aca78b35dd9df5b11e63e88796cf08c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retorna listado de conciliaciones para tabla.  <br /></td></tr>
<tr class="separator:aca78b35dd9df5b11e63e88796cf08c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca23822a346ae176c7243a968fcbe7b" id="r_a2ca23822a346ae176c7243a968fcbe7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a2ca23822a346ae176c7243a968fcbe7b">vueListMovementsByAccount</a> ( $institution_id, $currency_id, $account_id, $startDate, $endDate)</td></tr>
<tr class="memdesc:a2ca23822a346ae176c7243a968fcbe7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene un listado de operacion de cuentas en asientos pendientes por conciliar.  <br /></td></tr>
<tr class="separator:a2ca23822a346ae176c7243a968fcbe7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Atributos protegidos</h2></td></tr>
<tr class="memitem:aaf8d38bd4e7d07a3d97cc2f497f6d13f" id="r_aaf8d38bd4e7d07a3d97cc2f497f6d13f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#aaf8d38bd4e7d07a3d97cc2f497f6d13f">$messages</a></td></tr>
<tr class="memdesc:aaf8d38bd4e7d07a3d97cc2f497f6d13f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mensajes de validación.  <br /></td></tr>
<tr class="separator:aaf8d38bd4e7d07a3d97cc2f497f6d13f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><p>Gestión de Finanzas &gt; Banco &gt; Conciliación. </p>
<p>Clase que gestiona lo referente a Conciliaciones bancarias.</p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Argenis Osorio <a href="#" onclick="location.href='mai'+'lto:'+'aos'+'or'+'io@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">aosor<span class="obfuscator">.nosp@m.</span>io@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a></dd></dl>
<dl class="section user"><dt>Licencia:</dt><dd><a href="http://conocimientolibre.cenditel.gob.ve/licencia-de-software-v-1-3/">LICENCIA DE SOFTWARE CENDITEL</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00037">37</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
</div><h2 class="groupheader">Documentación de constructores y destructores</h2>
<a id="a095c5d389db211932136b53f25f39685" name="a095c5d389db211932136b53f25f39685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a095c5d389db211932136b53f25f39685">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método constructor de la clase. </p>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00053">53</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   54</span>    {</div>
<div class="line"><span class="lineno">   55</span>        $this-&gt;messages = [</div>
<div class="line"><span class="lineno">   56</span>            <span class="stringliteral">&#39;finance_bank_account_id.required&#39;</span> =&gt; <span class="stringliteral">&#39;El campo nro. de cuenta es</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">                obligatorio.&#39;</span>,</div>
<div class="line"><span class="lineno">   58</span>            <span class="stringliteral">&#39;start_date.required&#39;</span> =&gt; <span class="stringliteral">&#39;El campo fecha inicial es obligatorio.&#39;</span>,</div>
<div class="line"><span class="lineno">   59</span>            <span class="stringliteral">&#39;end_date.required&#39;</span> =&gt; <span class="stringliteral">&#39;El campo fecha final es obligatorio.&#39;</span>,</div>
<div class="line"><span class="lineno">   60</span>            <span class="stringliteral">&#39;institution_id.required&#39;</span> =&gt; <span class="stringliteral">&#39;El campo institución es obligatorio.&#39;</span>,</div>
<div class="line"><span class="lineno">   61</span>            <span class="stringliteral">&#39;currency_id.required&#39;</span> =&gt; <span class="stringliteral">&#39;El campo tipo de moneda es obligatorio.&#39;</span>,</div>
<div class="line"><span class="lineno">   62</span>            <span class="stringliteral">&#39;bank_balance.required&#39;</span> =&gt; <span class="stringliteral">&#39;El campo saldo en banco obtenido del</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">                archivo es obligatorio.&#39;</span></div>
<div class="line"><span class="lineno">   64</span>        ];</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>        <span class="comment">// Establece permisos de acceso para cada método del controlador</span></div>
<div class="line"><span class="lineno">   67</span>        <span class="comment">// $this-&gt;middleware(&#39;permission:finance.settingbankreconciliationfiles.index&#39;, [&#39;only&#39; =&gt; &#39;index&#39;, &#39;vueList&#39;]);</span></div>
<div class="line"><span class="lineno">   68</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentación de funciones miembro</h2>
<a id="aca28d0cd4375269279bd3880a4035c00" name="aca28d0cd4375269279bd3880a4035c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca28d0cd4375269279bd3880a4035c00">&#9670;&#160;</a></span>approve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">approve </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actualiza el estado de una conciliacion. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID de la conciliación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00554">554</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  555</span>    {</div>
<div class="line"><span class="lineno">  556</span>        $documentStatus = DocumentStatus::where(<span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;AP&#39;</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>        $conciliation = FinanceConciliation::find($id);</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        $conciliation-&gt;document_status_id = $documentStatus-&gt;id;</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>        $conciliation-&gt;save();</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>        <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  565</span>            [</div>
<div class="line"><span class="lineno">  566</span>                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  567</span>                <span class="stringliteral">&#39;redirect&#39;</span> =&gt; route(<span class="stringliteral">&#39;finance.conciliation.index&#39;</span>)</div>
<div class="line"><span class="lineno">  568</span>            ],</div>
<div class="line"><span class="lineno">  569</span>            200</div>
<div class="line"><span class="lineno">  570</span>        );</div>
<div class="line"><span class="lineno">  571</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a435e7d7525d4bcd0ed5e34a469f3adf6" name="a435e7d7525d4bcd0ed5e34a469f3adf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a435e7d7525d4bcd0ed5e34a469f3adf6">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra la plantilla del módulo Finanzas &gt; Banco &gt; Conciliación &gt; create. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00162">162</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  163</span>    {</div>
<div class="line"><span class="lineno">  164</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;finance::conciliation.form&#39;</span>);</div>
<div class="line"><span class="lineno">  165</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a726fa8a4b4b187b9ca32ba427aac8137" name="a726fa8a4b4b187b9ca32ba427aac8137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726fa8a4b4b187b9ca32ba427aac8137">&#9670;&#160;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">destroy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Elimina una conciliación. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID de la conciliación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00582">582</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  583</span>    {</div>
<div class="line"><span class="lineno">  584</span>        $documentStatus = DocumentStatus::where(<span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;PR&#39;</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>        $conciliation = FinanceConciliation::find($id);</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>        <span class="keywordflow">if</span> ($conciliation-&gt;document_status_id != $documentStatus-&gt;id) {</div>
<div class="line"><span class="lineno">  589</span>            <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  590</span>                [</div>
<div class="line"><span class="lineno">  591</span>                    <span class="stringliteral">&#39;error&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  592</span>                    <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Solo se permiter eliminar una conciliación</span></div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">                        mientras no este aprobada.&#39;</span></div>
<div class="line"><span class="lineno">  594</span>                ],</div>
<div class="line"><span class="lineno">  595</span>                200</div>
<div class="line"><span class="lineno">  596</span>            );</div>
<div class="line"><span class="lineno">  597</span>        }</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span>        $conciliationMovements = FinanceConciliationBankMovement::where(</div>
<div class="line"><span class="lineno">  600</span>            <span class="stringliteral">&#39;finance_conciliation_id&#39;</span>,</div>
<div class="line"><span class="lineno">  601</span>            $id</div>
<div class="line"><span class="lineno">  602</span>        )-&gt;get();</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>        <span class="keywordflow">foreach</span> ($conciliationMovements as $cm) {</div>
<div class="line"><span class="lineno">  605</span>            $cm-&gt;delete();</div>
<div class="line"><span class="lineno">  606</span>        }</div>
<div class="line"><span class="lineno">  607</span> </div>
<div class="line"><span class="lineno">  608</span>        $conciliation-&gt;delete();</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;destroy&#39;</span>], 200);</div>
<div class="line"><span class="lineno">  611</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a459ed16587e3a50b39b672c7e473abc5" name="a459ed16587e3a50b39b672c7e473abc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a459ed16587e3a50b39b672c7e473abc5">&#9670;&#160;</a></span>edit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">edit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra la plantilla del módulo Finanzas &gt; Banco &gt; Conciliación &gt; create. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID de la conciliación bancaria</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00461">461</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  462</span>    {</div>
<div class="line"><span class="lineno">  463</span>        $financeConciliation = FinanceConciliation::with(</div>
<div class="line"><span class="lineno">  464</span>            <span class="stringliteral">&#39;currency&#39;</span>,</div>
<div class="line"><span class="lineno">  465</span>            <span class="stringliteral">&#39;institution&#39;</span>,</div>
<div class="line"><span class="lineno">  466</span>            <span class="stringliteral">&#39;financeBankAccount&#39;</span>,</div>
<div class="line"><span class="lineno">  467</span>            <span class="stringliteral">&#39;financeConciliationBankMovements.accountingEntryAccount.entries&#39;</span></div>
<div class="line"><span class="lineno">  468</span>        )-&gt;find($id);</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>        <span class="keywordflow">return</span> view(</div>
<div class="line"><span class="lineno">  471</span>            <span class="stringliteral">&#39;finance::conciliation.form&#39;</span>,</div>
<div class="line"><span class="lineno">  472</span>            compact(<span class="stringliteral">&#39;financeConciliation&#39;</span>)</div>
<div class="line"><span class="lineno">  473</span>        );</div>
<div class="line"><span class="lineno">  474</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3963f202bd516c06c018ca3e075f37f6" name="a3963f202bd516c06c018ca3e075f37f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3963f202bd516c06c018ca3e075f37f6">&#9670;&#160;</a></span>getBankAccountConciliationInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getBankAccountConciliationInfo </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que encuentra y retorna los movimientos de una cuenta bancaria que cumplen con parámetros de busqueda. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00918">918</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  919</span>    {</div>
<div class="line"><span class="lineno">  920</span>        $this-&gt;validate(</div>
<div class="line"><span class="lineno">  921</span>            $request,</div>
<div class="line"><span class="lineno">  922</span>            [</div>
<div class="line"><span class="lineno">  923</span>                <span class="stringliteral">&#39;account_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  924</span>                <span class="stringliteral">&#39;month&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  925</span>                <span class="stringliteral">&#39;year&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  926</span>                <span class="stringliteral">&#39;file&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>, <span class="stringliteral">&#39;mimes:csv,txt&#39;</span>],</div>
<div class="line"><span class="lineno">  927</span>            ],</div>
<div class="line"><span class="lineno">  928</span>            [],</div>
<div class="line"><span class="lineno">  929</span>            [</div>
<div class="line"><span class="lineno">  930</span>                <span class="stringliteral">&#39;account_id&#39;</span> =&gt; <span class="stringliteral">&#39;cuenta bancaria&#39;</span>,</div>
<div class="line"><span class="lineno">  931</span>                <span class="stringliteral">&#39;file&#39;</span> =&gt; <span class="stringliteral">&#39;archivo&#39;</span></div>
<div class="line"><span class="lineno">  932</span>            ]</div>
<div class="line"><span class="lineno">  933</span>        );</div>
<div class="line"><span class="lineno">  934</span>        $bank_id = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a65b23918133d9854fcf5ea53b683688c">getBankId</a>($request-&gt;account_id);</div>
<div class="line"><span class="lineno">  935</span>        $bankMovements = [];</div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>        <span class="keywordflow">if</span> (!empty($request-&gt;files) &amp;&amp; $request-&gt;hasFile(<span class="stringliteral">&#39;file&#39;</span>)) {</div>
<div class="line"><span class="lineno">  938</span>            $structure = FinanceSettingBankReconciliationFiles::where(</div>
<div class="line"><span class="lineno">  939</span>                <span class="stringliteral">&#39;bank_id&#39;</span>,</div>
<div class="line"><span class="lineno">  940</span>                $bank_id</div>
<div class="line"><span class="lineno">  941</span>            )-&gt;first()?-&gt;toArray();</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  944</span>                $csvData = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a7fab98454118c21c15c0d92bb6ca9631">validateFileStructure</a>(</div>
<div class="line"><span class="lineno">  945</span>                    $request-&gt;file(<span class="stringliteral">&#39;file&#39;</span>),</div>
<div class="line"><span class="lineno">  946</span>                    $bank_id</div>
<div class="line"><span class="lineno">  947</span>                );</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>                <span class="keywordflow">foreach</span> ($csvData as $key =&gt; $row) {</div>
<div class="line"><span class="lineno">  950</span>                    $row = preg_replace(<span class="stringliteral">&#39;/\s+/&#39;</span>, <span class="charliteral">&#39; &#39;</span>, $row);</div>
<div class="line"><span class="lineno">  951</span>                    $bankMovements[] = explode(<span class="charliteral">&#39; &#39;</span>, $row);</div>
<div class="line"><span class="lineno">  952</span>                }</div>
<div class="line"><span class="lineno">  953</span>            } <span class="keywordflow">catch</span> (\Throwable $th) {</div>
<div class="line"><span class="lineno">  954</span>                Log::error($th-&gt;getMessage());</div>
<div class="line"><span class="lineno">  955</span>                <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  956</span>                    [</div>
<div class="line"><span class="lineno">  957</span>                        <span class="stringliteral">&#39;errors&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  958</span>                            <span class="stringliteral">&#39;file&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  959</span>                                <span class="stringliteral">&#39;Se encontraron errores en el formato del archivo</span></div>
<div class="line"><span class="lineno">  960</span><span class="stringliteral">                                    suministrado con respecto a la configuración &#39;</span> .</div>
<div class="line"><span class="lineno">  961</span>                                <span class="stringliteral">&#39;indicada para el archivo.&#39;</span></div>
<div class="line"><span class="lineno">  962</span>                            ]</div>
<div class="line"><span class="lineno">  963</span>                        ]</div>
<div class="line"><span class="lineno">  964</span>                    ],</div>
<div class="line"><span class="lineno">  965</span>                    422</div>
<div class="line"><span class="lineno">  966</span>                );</div>
<div class="line"><span class="lineno">  967</span>            }</div>
<div class="line"><span class="lineno">  968</span>        }</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>        $accountMovements = FinanceBankingMovement::where(</div>
<div class="line"><span class="lineno">  971</span>            <span class="stringliteral">&#39;finance_bank_account_id&#39;</span>,</div>
<div class="line"><span class="lineno">  972</span>            $request-&gt;account_id</div>
<div class="line"><span class="lineno">  973</span>        )</div>
<div class="line"><span class="lineno">  974</span>        -&gt;whereYear(<span class="stringliteral">&#39;payment_date&#39;</span>, $request-&gt;year)</div>
<div class="line"><span class="lineno">  975</span>        -&gt;whereMonth(<span class="stringliteral">&#39;payment_date&#39;</span>, $request-&gt;month)-&gt;get();</div>
<div class="line"><span class="lineno">  976</span> </div>
<div class="line"><span class="lineno">  977</span>        <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  978</span>            [</div>
<div class="line"><span class="lineno">  979</span>                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  980</span>                <span class="stringliteral">&#39;movements&#39;</span> =&gt; $accountMovements,</div>
<div class="line"><span class="lineno">  981</span>                <span class="stringliteral">&#39;bankMovements&#39;</span> =&gt; $bankMovements</div>
<div class="line"><span class="lineno">  982</span>            ],</div>
<div class="line"><span class="lineno">  983</span>            200</div>
<div class="line"><span class="lineno">  984</span>        );</div>
<div class="line"><span class="lineno">  985</span>    }</div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_a65b23918133d9854fcf5ea53b683688c"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a65b23918133d9854fcf5ea53b683688c">Modules\Finance\Http\Controllers\FinanceConciliationController\getBankId</a></div><div class="ttdeci">getBankId($account_id)</div><div class="ttdoc">Método que devuelve el id del banco al que pertenece una cuenta bancaria.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00892">FinanceConciliationController.php:892</a></div></div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_a7fab98454118c21c15c0d92bb6ca9631"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a7fab98454118c21c15c0d92bb6ca9631">Modules\Finance\Http\Controllers\FinanceConciliationController\validateFileStructure</a></div><div class="ttdeci">validateFileStructure($file, $bank_id)</div><div class="ttdoc">Método que valida la estructura del archivo usado para realizar la conciliación bancaria.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00822">FinanceConciliationController.php:822</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65b23918133d9854fcf5ea53b683688c" name="a65b23918133d9854fcf5ea53b683688c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b23918133d9854fcf5ea53b683688c">&#9670;&#160;</a></span>getBankId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getBankId </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$account_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que devuelve el id del banco al que pertenece una cuenta bancaria. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$account_id</td><td>id de la cuenta bancaria</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>integer $id id del banco al que pertenece una cuenta bancaria </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00892">892</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  893</span>    {</div>
<div class="line"><span class="lineno">  894</span>        $id = DB::table(<span class="stringliteral">&#39;finance_banks&#39;</span>)</div>
<div class="line"><span class="lineno">  895</span>            -&gt;join(</div>
<div class="line"><span class="lineno">  896</span>                <span class="stringliteral">&#39;finance_bank_accounts&#39;</span>,</div>
<div class="line"><span class="lineno">  897</span>                <span class="stringliteral">&#39;finance_banks.id&#39;</span>,</div>
<div class="line"><span class="lineno">  898</span>                <span class="charliteral">&#39;=&#39;</span>,</div>
<div class="line"><span class="lineno">  899</span>                <span class="stringliteral">&#39;finance_bank_accounts.finance_bank_id&#39;</span></div>
<div class="line"><span class="lineno">  900</span>            )</div>
<div class="line"><span class="lineno">  901</span>            -&gt;where(<span class="stringliteral">&#39;finance_bank_accounts.id&#39;</span>, <span class="charliteral">&#39;=&#39;</span>, $account_id)</div>
<div class="line"><span class="lineno">  902</span>            -&gt;select(<span class="stringliteral">&#39;finance_banks.id&#39;</span>)</div>
<div class="line"><span class="lineno">  903</span>            -&gt;first()-&gt;id;</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>        <span class="keywordflow">return</span> $id;</div>
<div class="line"><span class="lineno">  906</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3eb02bf039263bcaabc8491a45e98011" name="a3eb02bf039263bcaabc8491a45e98011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eb02bf039263bcaabc8491a45e98011">&#9670;&#160;</a></span>getFileConfigurationDecimalSeparator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getFileConfigurationDecimalSeparator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$separator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileDelimiters</em> = <code>[&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;','&#160;=&gt;&#160;'Coma',&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;.&quot;&#160;=&gt;&#160;'Punto'&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que consigue el separador de decimales usado en el archivo csv/.txt. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">$separator</td><td>Separador usado por el archivo csv/.txt </td></tr>
    <tr><td class="paramname">$fileDelimiters</td><td>Delimitadores disponibles</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>string </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00800">800</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  806</span>      {</div>
<div class="line"><span class="lineno">  807</span>        <span class="keywordflow">return</span> $fileDelimiters[$separator];</div>
<div class="line"><span class="lineno">  808</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a40ab52c3f5b76dfa5622019be27d1c53" name="a40ab52c3f5b76dfa5622019be27d1c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40ab52c3f5b76dfa5622019be27d1c53">&#9670;&#160;</a></span>getFileConfigurationDelimiter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getFileConfigurationDelimiter </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$delimiter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fileDelimiters</em> = <code>[&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;';'&#160;=&gt;&#160;'Punto&#160;y&#160;Coma',&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;\t&quot;&#160;=&gt;&#160;'Tabulador',&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;','&#160;=&gt;&#160;'Coma'&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que consigue el delimitador usado en el archivo csv/.txt. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">$delimiter</td><td>Delimitador usado por el archivo csv/.txt </td></tr>
    <tr><td class="paramname">$fileDelimiters</td><td>Delimitadores disponibles</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>string </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00779">779</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  786</span>      {</div>
<div class="line"><span class="lineno">  787</span>        <span class="keywordflow">return</span> $fileDelimiters[$delimiter];</div>
<div class="line"><span class="lineno">  788</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acfaa96497989fbe4cdd36a9b052b5edb" name="acfaa96497989fbe4cdd36a9b052b5edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfaa96497989fbe4cdd36a9b052b5edb">&#9670;&#160;</a></span>getFileValidationArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getFileValidationArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bank_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que obtiene el array de validación para el archivo de configuración. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">$bank_id</td><td>Id del banco asociado a la cuenta bancaria</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>array </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00759">759</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  760</span>    {</div>
<div class="line"><span class="lineno">  761</span>        $fileStructure = FinanceSettingBankReconciliationFiles::where(</div>
<div class="line"><span class="lineno">  762</span>            <span class="stringliteral">&#39;bank_id&#39;</span>,</div>
<div class="line"><span class="lineno">  763</span>            $bank_id</div>
<div class="line"><span class="lineno">  764</span>        )-&gt;first()?-&gt;toArray();</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>        <span class="keywordflow">return</span> $fileStructure;</div>
<div class="line"><span class="lineno">  767</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a79b0774ba877b369c3a1128cbe304c23" name="a79b0774ba877b369c3a1128cbe304c23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79b0774ba877b369c3a1128cbe304c23">&#9670;&#160;</a></span>getInstitution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getInstitution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene los datos de la organización asociada al usuario autenticado o en su defecto, la organización activa y por defecto. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00995">995</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  996</span>    {</div>
<div class="line"><span class="lineno">  997</span>        <span class="keywordflow">if</span> (isset(auth()-&gt;user()-&gt;profile)) {</div>
<div class="line"><span class="lineno">  998</span>            <span class="keywordflow">if</span> (isset(auth()-&gt;user()-&gt;profile-&gt;institution_id)) {</div>
<div class="line"><span class="lineno">  999</span>                $institution = Institution::where(</div>
<div class="line"><span class="lineno"> 1000</span>                    [</div>
<div class="line"><span class="lineno"> 1001</span>                        <span class="stringliteral">&#39;id&#39;</span> =&gt; auth()-&gt;user()-&gt;profile-&gt;institution_id</div>
<div class="line"><span class="lineno"> 1002</span>                    ]</div>
<div class="line"><span class="lineno"> 1003</span>                )-&gt;first();</div>
<div class="line"><span class="lineno"> 1004</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1005</span>                $institution = Institution::where(</div>
<div class="line"><span class="lineno"> 1006</span>                    [</div>
<div class="line"><span class="lineno"> 1007</span>                        <span class="stringliteral">&#39;active&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno"> 1008</span>                        <span class="stringliteral">&#39;default&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><span class="lineno"> 1009</span>                    ]</div>
<div class="line"><span class="lineno"> 1010</span>                )-&gt;first();</div>
<div class="line"><span class="lineno"> 1011</span>            }</div>
<div class="line"><span class="lineno"> 1012</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1013</span>            $institution = Institution::where(</div>
<div class="line"><span class="lineno"> 1014</span>                [</div>
<div class="line"><span class="lineno"> 1015</span>                    <span class="stringliteral">&#39;active&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno"> 1016</span>                    <span class="stringliteral">&#39;default&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><span class="lineno"> 1017</span>                ]</div>
<div class="line"><span class="lineno"> 1018</span>            )-&gt;first();</div>
<div class="line"><span class="lineno"> 1019</span>        }</div>
<div class="line"><span class="lineno"> 1020</span>        $inst = Institution::where(</div>
<div class="line"><span class="lineno"> 1021</span>            <span class="stringliteral">&#39;id&#39;</span>,</div>
<div class="line"><span class="lineno"> 1022</span>            $institution-&gt;id</div>
<div class="line"><span class="lineno"> 1023</span>        )-&gt;with(</div>
<div class="line"><span class="lineno"> 1024</span>            [</div>
<div class="line"><span class="lineno"> 1025</span>                <span class="stringliteral">&#39;municipality&#39;</span> =&gt; <span class="keyword">function</span> ($q) {</div>
<div class="line"><span class="lineno"> 1026</span>                    <span class="keywordflow">return</span> $q-&gt;with(</div>
<div class="line"><span class="lineno"> 1027</span>                        [</div>
<div class="line"><span class="lineno"> 1028</span>                            <span class="stringliteral">&#39;estate&#39;</span> =&gt; <span class="keyword">function</span> ($qq) {</div>
<div class="line"><span class="lineno"> 1029</span>                                <span class="keywordflow">return</span> $qq-&gt;with(<span class="stringliteral">&#39;country&#39;</span>);</div>
<div class="line"><span class="lineno"> 1030</span>                            }</div>
<div class="line"><span class="lineno"> 1031</span>                        ]</div>
<div class="line"><span class="lineno"> 1032</span>                    );</div>
<div class="line"><span class="lineno"> 1033</span>                },</div>
<div class="line"><span class="lineno"> 1034</span>                <span class="stringliteral">&#39;banner&#39;</span>,</div>
<div class="line"><span class="lineno"> 1035</span>                <span class="stringliteral">&#39;logo&#39;</span></div>
<div class="line"><span class="lineno"> 1036</span>            ]</div>
<div class="line"><span class="lineno"> 1037</span>        )-&gt;first();</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;institution&#39;</span> =&gt; $inst], 200);</div>
<div class="line"><span class="lineno"> 1040</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0db5564815def7ec4588f827f2fed8a9" name="a0db5564815def7ec4588f827f2fed8a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db5564815def7ec4588f827f2fed8a9">&#9670;&#160;</a></span>getLastTotalResults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLastTotalResults </td>
          <td>(</td>
          <td class="paramtype">Carbon&#160;</td>
          <td class="paramname"><em>$formDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Carbon&#160;</td>
          <td class="paramname"><em>$endDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$currency_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>$accounting_account_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el calculo de las cuentas de acuerdo a como suman. </p>
<dl class="section author"><dt>Autor</dt><dd>fjescala <a href="#" onclick="location.href='mai'+'lto:'+'fje'+'sc'+'ala'+'@g'+'mai'+'l.'+'com'; return false;">fjesc<span class="obfuscator">.nosp@m.</span>ala@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a> </dd>
<dd>
Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Carbon</td><td class="paramname">$formDate</td><td>fecha inicial de la consulta </td></tr>
    <tr><td class="paramtype">Carbon</td><td class="paramname">$endDate</td><td>fecha final de la consulta </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$currency_id</td><td>id del tipo de moneda </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$accounting_account_id</td><td>id de la cuenta contable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00180">180</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  185</span>     : <span class="keywordtype">float</span> {</div>
<div class="line"><span class="lineno">  186</span>        <span class="comment">// determinamos el primero de enero del año a buscar</span></div>
<div class="line"><span class="lineno">  187</span>        <span class="comment">// Obtén el año de la fecha</span></div>
<div class="line"><span class="lineno">  188</span>        $ano = $formDate-&gt;year;</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>        <span class="comment">// Crea una nueva instancia de Carbon para el 1 de enero del mismo año</span></div>
<div class="line"><span class="lineno">  191</span>        $primerDeEnero = Carbon::create($ano, 1, 1);</div>
<div class="line"><span class="lineno">  192</span>        $balance = 0;</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>        $arr = [];</div>
<div class="line"><span class="lineno">  195</span>        $result_of_the_excersice = 0;</div>
<div class="line"><span class="lineno">  196</span>        $parentsArray = [];</div>
<div class="line"><span class="lineno">  197</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  200</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  201</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  202</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(</div>
<div class="line"><span class="lineno">  203</span>                <span class="stringliteral">&#39;user_id&#39;</span>,</div>
<div class="line"><span class="lineno">  204</span>                auth()-&gt;user()-&gt;<span class="keywordtype">id</span></div>
<div class="line"><span class="lineno">  205</span>            )-&gt;first();</div>
<div class="line"><span class="lineno">  206</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  207</span>        }</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>        $beginnBalances = AccountingEntry::query()</div>
<div class="line"><span class="lineno">  210</span>            -&gt;with(</div>
<div class="line"><span class="lineno">  211</span>                [</div>
<div class="line"><span class="lineno">  212</span>                    <span class="stringliteral">&#39;accountingAccounts&#39;</span> =&gt; <span class="keyword">function</span> ($query) use (</div>
<div class="line"><span class="lineno">  213</span>                        $accounting_account_id</div>
<div class="line"><span class="lineno">  214</span>                    ) {</div>
<div class="line"><span class="lineno">  215</span>                        $query-&gt;with(<span class="stringliteral">&#39;account&#39;</span>)</div>
<div class="line"><span class="lineno">  216</span>                            -&gt;whereHas(</div>
<div class="line"><span class="lineno">  217</span>                                <span class="stringliteral">&#39;account&#39;</span>,</div>
<div class="line"><span class="lineno">  218</span>                                <span class="keyword">function</span> ($query) use ($accounting_account_id) {</div>
<div class="line"><span class="lineno">  219</span>                                    $query-&gt;where(<span class="stringliteral">&#39;id&#39;</span>, $accounting_account_id);</div>
<div class="line"><span class="lineno">  220</span>                                }</div>
<div class="line"><span class="lineno">  221</span>                            );</div>
<div class="line"><span class="lineno">  222</span>                    }</div>
<div class="line"><span class="lineno">  223</span>                ]</div>
<div class="line"><span class="lineno">  224</span>            )</div>
<div class="line"><span class="lineno">  225</span>            -&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $currency_id)</div>
<div class="line"><span class="lineno">  226</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution-&gt;id)</div>
<div class="line"><span class="lineno">  227</span>            -&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$primerDeEnero, $endDate])</div>
<div class="line"><span class="lineno">  228</span>            -&gt;get();</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">foreach</span> ($beginnBalances as $beginnbalance) {</div>
<div class="line"><span class="lineno">  231</span>            <span class="keywordflow">if</span> ($beginnbalance[<span class="stringliteral">&#39;accountingAccounts&#39;</span>]) {</div>
<div class="line"><span class="lineno">  232</span>                <span class="keywordflow">foreach</span> ($beginnbalance[<span class="stringliteral">&#39;accountingAccounts&#39;</span>] as $account) {</div>
<div class="line"><span class="lineno">  233</span>                    $balance = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a>(</div>
<div class="line"><span class="lineno">  234</span>                        $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>][0],</div>
<div class="line"><span class="lineno">  235</span>                        $account[<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno">  236</span>                        $account[<span class="stringliteral">&#39;assets&#39;</span>]</div>
<div class="line"><span class="lineno">  237</span>                    );</div>
<div class="line"><span class="lineno">  238</span>                    <span class="keywordflow">if</span> (array_key_exists($account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>], $arr)) {</div>
<div class="line"><span class="lineno">  239</span>                        $arr[</div>
<div class="line"><span class="lineno">  240</span>                            $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>]</div>
<div class="line"><span class="lineno">  241</span>                        ][<span class="stringliteral">&#39;lastMonthBalance&#39;</span>] += $balance;</div>
<div class="line"><span class="lineno">  242</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  243</span>                        $acc = [</div>
<div class="line"><span class="lineno">  244</span>                        <span class="stringliteral">&#39;denomination&#39;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;denomination&#39;</span>],</div>
<div class="line"><span class="lineno">  245</span>                        <span class="stringliteral">&#39;code&#39;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&quot;code&quot;</span>],</div>
<div class="line"><span class="lineno">  246</span>                        <span class="stringliteral">&#39;lastMonthBalance&#39;</span> =&gt; $balance,</div>
<div class="line"><span class="lineno">  247</span>                        ];</div>
<div class="line"><span class="lineno">  248</span>                        $arr[$account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>]] = $acc;</div>
<div class="line"><span class="lineno">  249</span>                    }</div>
<div class="line"><span class="lineno">  250</span>                }</div>
<div class="line"><span class="lineno">  251</span>            }</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="line"><span class="lineno">  253</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  254</span>            $result_of_the_excersice = $a[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>];</div>
<div class="line"><span class="lineno">  255</span>        }</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">return</span> $result_of_the_excersice ?? 0.00;</div>
<div class="line"><span class="lineno">  258</span>    }</div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_a0db19fdd230ae36f5cadc50c61a451b0"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a0db19fdd230ae36f5cadc50c61a451b0">Modules\Finance\Http\Controllers\FinanceConciliationController\getRealBalaceCalculator</a></div><div class="ttdeci">getRealBalaceCalculator($ini, $debit, $assets)</div><div class="ttdoc">Realiza el calculo de las cuentas de acuerdo a como suman.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00272">FinanceConciliationController.php:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0db19fdd230ae36f5cadc50c61a451b0" name="a0db19fdd230ae36f5cadc50c61a451b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db19fdd230ae36f5cadc50c61a451b0">&#9670;&#160;</a></span>getRealBalaceCalculator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getRealBalaceCalculator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ini</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$debit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el calculo de las cuentas de acuerdo a como suman. </p>
<dl class="section author"><dt>Autor</dt><dd>fjescala <a href="#" onclick="location.href='mai'+'lto:'+'fje'+'sc'+'ala'+'@g'+'mai'+'l.'+'com'; return false;">fjesc<span class="obfuscator">.nosp@m.</span>ala@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$ini</td><td>Identificador del tipo de cuenta </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$debit</td><td>Valor de la cuenta debe </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$assets</td><td>Valor de la cuenta en el haber</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00272">272</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  273</span>    {</div>
<div class="line"><span class="lineno">  274</span>        $balance = 0;</div>
<div class="line"><span class="lineno">  275</span>        <span class="keywordflow">switch</span> ($ini) {</div>
<div class="line"><span class="lineno">  276</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  277</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno">  278</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  279</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno">  280</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno">  281</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno">  283</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno">  284</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  285</span>            <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno">  286</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno">  287</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  288</span>            <span class="keywordflow">case</span> 5:</div>
<div class="line"><span class="lineno">  289</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno">  290</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  291</span>            <span class="keywordflow">case</span> 6:</div>
<div class="line"><span class="lineno">  292</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno">  293</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  294</span>        }</div>
<div class="line"><span class="lineno">  295</span> </div>
<div class="line"><span class="lineno">  296</span>        <span class="keywordflow">return</span> $balance;</div>
<div class="line"><span class="lineno">  297</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acdcd5d4c0ace9d353b05295c89a48d6e" name="acdcd5d4c0ace9d353b05295c89a48d6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdcd5d4c0ace9d353b05295c89a48d6e">&#9670;&#160;</a></span>guessDecimalSeparator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">guessDecimalSeparator </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$csvData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$separators</em> = <code>['.',&#160;',']</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que obtiene el separador usado en el formato de monto. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$csvData</td><td>Contenido del archivo .csv </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$separators</td><td>Separadores de decimales</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>string </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00736">736</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  739</span>      {</div>
<div class="line"><span class="lineno">  740</span>        $ns = [];</div>
<div class="line"><span class="lineno">  741</span>        <span class="keywordflow">foreach</span> ($separators as $separator) {</div>
<div class="line"><span class="lineno">  742</span>            <span class="keywordflow">for</span> ($i = 1; $i &lt; count($csvData); $i++) {</div>
<div class="line"><span class="lineno">  743</span>                $ns[$separator] = count(explode($separator, $csvData[$i][5]));</div>
<div class="line"><span class="lineno">  744</span>            }</div>
<div class="line"><span class="lineno">  745</span>        }</div>
<div class="line"><span class="lineno">  746</span>        $separator = collect($ns)-&gt;sort()-&gt;reverse()-&gt;keys()-&gt;first();</div>
<div class="line"><span class="lineno">  747</span>        <span class="keywordflow">return</span> $separator;</div>
<div class="line"><span class="lineno">  748</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9c949505d1e98703d8da5d552b3732f" name="aa9c949505d1e98703d8da5d552b3732f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c949505d1e98703d8da5d552b3732f">&#9670;&#160;</a></span>guessDelimiter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">guessDelimiter </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>$filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$delimiters</em> = <code>[';',&#160;',',&#160;&quot;\t&quot;]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que retorna el delimitador usado un archiv .csv. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$filePath</td><td>Ruta del archivo .csv </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$delimiters</td><td>Delimitadores del archivo .csv</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>string </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00707">707</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  710</span>     : <span class="keywordtype">string</span> {</div>
<div class="line"><span class="lineno">  711</span>        $file = fopen($filePath, <span class="charliteral">&#39;r&#39;</span>);</div>
<div class="line"><span class="lineno">  712</span> </div>
<div class="line"><span class="lineno">  713</span>        $firstLine = fgets($file);</div>
<div class="line"><span class="lineno">  714</span> </div>
<div class="line"><span class="lineno">  715</span>        fclose($file);</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>        $ns = [];</div>
<div class="line"><span class="lineno">  718</span>        <span class="keywordflow">foreach</span> ($delimiters as $delimiter) {</div>
<div class="line"><span class="lineno">  719</span>            $ns[$delimiter] = count(explode($delimiter, $firstLine));</div>
<div class="line"><span class="lineno">  720</span>        }</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>        <span class="keywordflow">return</span> collect($ns)-&gt;sort()-&gt;reverse()-&gt;keys()-&gt;first();</div>
<div class="line"><span class="lineno">  723</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a149eb92716c1084a935e04a8d95f7347" name="a149eb92716c1084a935e04a8d95f7347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149eb92716c1084a935e04a8d95f7347">&#9670;&#160;</a></span>index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra la plantilla del módulo Finanzas &gt; Banco &gt; Conciliación. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00077">77</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>    {</div>
<div class="line"><span class="lineno">   79</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;finance::conciliation.index&#39;</span>);</div>
<div class="line"><span class="lineno">   80</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fff4ea62dd891823ebb85f5917a0287" name="a5fff4ea62dd891823ebb85f5917a0287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fff4ea62dd891823ebb85f5917a0287">&#9670;&#160;</a></span>pdf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdf </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Vista en la que se genera el reporte en pdf de balance de comprobación. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>id de la conciliación bancaria</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View|void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00622">622</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  623</span>    {</div>
<div class="line"><span class="lineno">  624</span>        <span class="comment">// Validar acceso para el registro</span></div>
<div class="line"><span class="lineno">  625</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>        $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(</div>
<div class="line"><span class="lineno">  628</span>            <span class="stringliteral">&#39;user_id&#39;</span>,</div>
<div class="line"><span class="lineno">  629</span>            auth()-&gt;user()-&gt;<span class="keywordtype">id</span></div>
<div class="line"><span class="lineno">  630</span>        )-&gt;first();</div>
<div class="line"><span class="lineno">  631</span> </div>
<div class="line"><span class="lineno">  632</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  633</span>            $conciliation = FinanceConciliation::with(</div>
<div class="line"><span class="lineno">  634</span>                <span class="stringliteral">&#39;financeBankAccount&#39;</span>,</div>
<div class="line"><span class="lineno">  635</span>                <span class="stringliteral">&#39;financeConciliationBankMovements.accountingEntryAccount.entries&#39;</span></div>
<div class="line"><span class="lineno">  636</span>            )-&gt;where(</div>
<div class="line"><span class="lineno">  637</span>                <span class="stringliteral">&#39;institution_id&#39;</span>,</div>
<div class="line"><span class="lineno">  638</span>                $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>]</div>
<div class="line"><span class="lineno">  639</span>            )-&gt;find($id);</div>
<div class="line"><span class="lineno">  640</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  641</span>            $conciliation = FinanceConciliation::with(</div>
<div class="line"><span class="lineno">  642</span>                <span class="stringliteral">&#39;financeBankAccount&#39;</span>,</div>
<div class="line"><span class="lineno">  643</span>                <span class="stringliteral">&#39;financeConciliationBankMovements.accountingEntryAccount.entries&#39;</span></div>
<div class="line"><span class="lineno">  644</span>            )-&gt;find($id);</div>
<div class="line"><span class="lineno">  645</span>        }</div>
<div class="line"><span class="lineno">  646</span> </div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordflow">if</span> (!auth()-&gt;user()-&gt;isAdmin()) {</div>
<div class="line"><span class="lineno">  648</span>            <span class="keywordflow">if</span> ($conciliation &amp;&amp; $conciliation-&gt;queryAccess($user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>])) {</div>
<div class="line"><span class="lineno">  649</span>                <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;errors.403&#39;</span>);</div>
<div class="line"><span class="lineno">  650</span>            }</div>
<div class="line"><span class="lineno">  651</span>        }</div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>        <span class="comment">/* configuración general de la apliación */</span></div>
<div class="line"><span class="lineno">  654</span>        $setting = Setting::all()-&gt;first();</div>
<div class="line"><span class="lineno">  655</span> </div>
<div class="line"><span class="lineno">  656</span>        $OnlyOneEntry   = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  657</span> </div>
<div class="line"><span class="lineno">  658</span>        <span class="comment">/* base para generar el pdf */</span></div>
<div class="line"><span class="lineno">  659</span>        $pdf = <span class="keyword">new</span> ReportRepository();</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>        <span class="comment">/* Definicion de las caracteristicas generales de la página pdf */</span></div>
<div class="line"><span class="lineno">  662</span>        $institution = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  665</span>            $institution = Institution::find($user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><span class="lineno">  666</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  667</span>            $institution = get_institution();</div>
<div class="line"><span class="lineno">  668</span>        }</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>        $fromDate = Carbon::createFromFormat(<span class="stringliteral">&#39;Y-m-d&#39;</span>, $conciliation-&gt;start_date);</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>        $pdf-&gt;setConfig(</div>
<div class="line"><span class="lineno">  673</span>            [</div>
<div class="line"><span class="lineno">  674</span>                <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno">  675</span>                <span class="stringliteral">&#39;urlVerify&#39;</span> =&gt; url(<span class="stringliteral">&#39; entries/pdf/&#39;</span> . $id)</div>
<div class="line"><span class="lineno">  676</span>            ]</div>
<div class="line"><span class="lineno">  677</span>        );</div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>        $pdf-&gt;setHeader(</div>
<div class="line"><span class="lineno">  680</span>            <span class="stringliteral">&#39;Reporte de Conciliación Bancaria&#39;</span>,</div>
<div class="line"><span class="lineno">  681</span>            <span class="stringliteral">&#39;Reporte de Conciliación Bancaria&#39;</span></div>
<div class="line"><span class="lineno">  682</span>        );</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>        $pdf-&gt;setFooter();</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>        $pdf-&gt;setBody(</div>
<div class="line"><span class="lineno">  687</span>            <span class="stringliteral">&#39;finance::pdf.conciliation_report&#39;</span>,</div>
<div class="line"><span class="lineno">  688</span>            <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  689</span>            [</div>
<div class="line"><span class="lineno">  690</span>                <span class="stringliteral">&#39;pdf&#39;</span>      =&gt; $pdf,</div>
<div class="line"><span class="lineno">  691</span>                <span class="stringliteral">&#39;conciliation&#39;</span>    =&gt; $conciliation,</div>
<div class="line"><span class="lineno">  692</span>                <span class="stringliteral">&#39;currency&#39;</span> =&gt; $conciliation-&gt;currency,</div>
<div class="line"><span class="lineno">  693</span>            ]</div>
<div class="line"><span class="lineno">  694</span>        );</div>
<div class="line"><span class="lineno">  695</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4914d07a9bbe4aede7a5dea759f6287" name="ae4914d07a9bbe4aede7a5dea759f6287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4914d07a9bbe4aede7a5dea759f6287">&#9670;&#160;</a></span>show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">show </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retorna la informacion de una conciliación. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID de la conciliación bancaria</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00440">440</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  441</span>    {</div>
<div class="line"><span class="lineno">  442</span>        $financeConciliation = FinanceConciliation::with(</div>
<div class="line"><span class="lineno">  443</span>            <span class="stringliteral">&#39;currency&#39;</span>,</div>
<div class="line"><span class="lineno">  444</span>            <span class="stringliteral">&#39;institution&#39;</span>,</div>
<div class="line"><span class="lineno">  445</span>            <span class="stringliteral">&#39;financeBankAccount&#39;</span>,</div>
<div class="line"><span class="lineno">  446</span>            <span class="stringliteral">&#39;financeConciliationBankMovements.accountingEntryAccount.entries&#39;</span></div>
<div class="line"><span class="lineno">  447</span>        )-&gt;find($id);</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;records&#39;</span> =&gt; $financeConciliation], 200);</div>
<div class="line"><span class="lineno">  450</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ef485163104597c12185b53cdacf638" name="a9ef485163104597c12185b53cdacf638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef485163104597c12185b53cdacf638">&#9670;&#160;</a></span>store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">store </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Guarda la informacion de la conciliación. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\Illuminate\Http\Request</td><td class="paramname">$request</td><td>Datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\Response </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00308">308</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  309</span>    {</div>
<div class="line"><span class="lineno">  310</span>        $this-&gt;validate(</div>
<div class="line"><span class="lineno">  311</span>            $request,</div>
<div class="line"><span class="lineno">  312</span>            [</div>
<div class="line"><span class="lineno">  313</span>                <span class="stringliteral">&#39;finance_bank_account_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  314</span>                <span class="stringliteral">&#39;start_date&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  315</span>                <span class="stringliteral">&#39;end_date&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  316</span>                <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  317</span>                <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  318</span>                <span class="stringliteral">&#39;bank_balance&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  319</span>            ],</div>
<div class="line"><span class="lineno">  320</span>            $this-&gt;messages</div>
<div class="line"><span class="lineno">  321</span>        );</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>        $docStatus = DocumentStatus::where(<span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;AP&#39;</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>        $data = $request-&gt;all();</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>        $financeConciliationApproveInMonth = FinanceConciliation::where(</div>
<div class="line"><span class="lineno">  328</span>            <span class="stringliteral">&#39;start_date&#39;</span>,</div>
<div class="line"><span class="lineno">  329</span>            <span class="stringliteral">&#39;&gt;=&#39;</span>,</div>
<div class="line"><span class="lineno">  330</span>            $data[<span class="stringliteral">&#39;start_date&#39;</span>]</div>
<div class="line"><span class="lineno">  331</span>        )-&gt;where(<span class="stringliteral">&#39;end_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $data[<span class="stringliteral">&#39;end_date&#39;</span>])</div>
<div class="line"><span class="lineno">  332</span>            -&gt;where(<span class="stringliteral">&#39;document_status_id&#39;</span>, $docStatus-&gt;id)-&gt;first();</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">if</span> (!empty($financeConciliationApproveInMonth)) {</div>
<div class="line"><span class="lineno">  335</span>            <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  336</span>                [</div>
<div class="line"><span class="lineno">  337</span>                    <span class="stringliteral">&#39;errors&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  338</span>                        <span class="stringliteral">&#39;start_date&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">  339</span>                            <span class="stringliteral">&#39;Se encontraron registros de conciliaciones</span></div>
<div class="line"><span class="lineno">  340</span><span class="stringliteral">                                aprobadas para este mes&#39;</span></div>
<div class="line"><span class="lineno">  341</span>                        ]</div>
<div class="line"><span class="lineno">  342</span>                    ]</div>
<div class="line"><span class="lineno">  343</span>                ],</div>
<div class="line"><span class="lineno">  344</span>                422</div>
<div class="line"><span class="lineno">  345</span>            );</div>
<div class="line"><span class="lineno">  346</span>        }</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>        $codeSetting = CodeSetting::where(<span class="stringliteral">&#39;table&#39;</span>, <span class="stringliteral">&#39;finance_conciliations&#39;</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>        <span class="keywordflow">if</span> (is_null($codeSetting)) {</div>
<div class="line"><span class="lineno">  351</span>            $request-&gt;session()-&gt;flash(</div>
<div class="line"><span class="lineno">  352</span>                <span class="stringliteral">&#39;message&#39;</span>,</div>
<div class="line"><span class="lineno">  353</span>                [</div>
<div class="line"><span class="lineno">  354</span>                    <span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;other&#39;</span>,</div>
<div class="line"><span class="lineno">  355</span>                    <span class="stringliteral">&#39;title&#39;</span> =&gt; <span class="stringliteral">&#39;Alerta&#39;</span>,</div>
<div class="line"><span class="lineno">  356</span>                    <span class="stringliteral">&#39;icon&#39;</span> =&gt; <span class="stringliteral">&#39;screen-error&#39;</span>,</div>
<div class="line"><span class="lineno">  357</span>                    <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;growl-danger&#39;</span>,</div>
<div class="line"><span class="lineno">  358</span>                    <span class="stringliteral">&#39;text&#39;</span> =&gt; <span class="stringliteral">&#39;Debe configurar previamente el formato</span></div>
<div class="line"><span class="lineno">  359</span><span class="stringliteral">                        para el código a generar&#39;</span>,</div>
<div class="line"><span class="lineno">  360</span>                ]</div>
<div class="line"><span class="lineno">  361</span>            );</div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  363</span>                [</div>
<div class="line"><span class="lineno">  364</span>                    <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  365</span>                    <span class="stringliteral">&#39;redirect&#39;</span> =&gt; route(<span class="stringliteral">&#39;finance.setting.index&#39;</span>)</div>
<div class="line"><span class="lineno">  366</span>                ],</div>
<div class="line"><span class="lineno">  367</span>                200</div>
<div class="line"><span class="lineno">  368</span>            );</div>
<div class="line"><span class="lineno">  369</span>        }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>        $codeConciliation = generate_registration_code(</div>
<div class="line"><span class="lineno">  372</span>            $codeSetting-&gt;format_prefix,</div>
<div class="line"><span class="lineno">  373</span>            strlen($codeSetting-&gt;format_digits),</div>
<div class="line"><span class="lineno">  374</span>            (strlen($codeSetting-&gt;format_year) == 2) ? date(<span class="charliteral">&#39;y&#39;</span>) : date(<span class="stringliteral">&#39;Y&#39;</span>),</div>
<div class="line"><span class="lineno">  375</span>            $codeSetting-&gt;model,</div>
<div class="line"><span class="lineno">  376</span>            $codeSetting-&gt;field</div>
<div class="line"><span class="lineno">  377</span>        );</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>        <span class="comment">/* Estado inicial del registro establecido a &#39;En Proceso&#39; = &#39;Pendiente&#39; */</span></div>
<div class="line"><span class="lineno">  380</span>        $documentStatusPR = DocumentStatus::where(<span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;PR&#39;</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>        $fromDate = Carbon::createFromFormat(<span class="stringliteral">&#39;Y-m-d&#39;</span>, $data[<span class="stringliteral">&#39;start_date&#39;</span>]);</div>
<div class="line"><span class="lineno">  383</span>        $endDate = Carbon::createFromFormat(<span class="stringliteral">&#39;Y-m-d&#39;</span>, $data[<span class="stringliteral">&#39;end_date&#39;</span>]);</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>        $accounting_account_id = FinanceBankAccount::find(</div>
<div class="line"><span class="lineno">  386</span>            $data[<span class="stringliteral">&#39;finance_bank_account_id&#39;</span>]</div>
<div class="line"><span class="lineno">  387</span>        )-&gt;accounting_account_id;</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>        $conciliation = FinanceConciliation::create(</div>
<div class="line"><span class="lineno">  391</span>            [</div>
<div class="line"><span class="lineno">  392</span>                <span class="stringliteral">&#39;code&#39;</span> =&gt; $codeConciliation,</div>
<div class="line"><span class="lineno">  393</span>                <span class="stringliteral">&#39;finance_bank_account_id&#39;</span> =&gt; $data[<span class="stringliteral">&#39;finance_bank_account_id&#39;</span>],</div>
<div class="line"><span class="lineno">  394</span>                <span class="stringliteral">&#39;start_date&#39;</span> =&gt; $data[<span class="stringliteral">&#39;start_date&#39;</span>],</div>
<div class="line"><span class="lineno">  395</span>                <span class="stringliteral">&#39;end_date&#39;</span> =&gt; $data[<span class="stringliteral">&#39;end_date&#39;</span>],</div>
<div class="line"><span class="lineno">  396</span>                <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; $data[<span class="stringliteral">&#39;institution_id&#39;</span>],</div>
<div class="line"><span class="lineno">  397</span>                <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; $data[<span class="stringliteral">&#39;currency_id&#39;</span>],</div>
<div class="line"><span class="lineno">  398</span>                <span class="stringliteral">&#39;bank_balance&#39;</span> =&gt; $data[<span class="stringliteral">&#39;bank_balance&#39;</span>],</div>
<div class="line"><span class="lineno">  399</span>                <span class="stringliteral">&#39;system_balance&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a0db5564815def7ec4588f827f2fed8a9">getLastTotalResults</a>(</div>
<div class="line"><span class="lineno">  400</span>                    $fromDate,</div>
<div class="line"><span class="lineno">  401</span>                    $fromDate,</div>
<div class="line"><span class="lineno">  402</span>                    $data[<span class="stringliteral">&#39;currency_id&#39;</span>],</div>
<div class="line"><span class="lineno">  403</span>                    $accounting_account_id</div>
<div class="line"><span class="lineno">  404</span>                ),</div>
<div class="line"><span class="lineno">  405</span>                <span class="stringliteral">&#39;document_status_id&#39;</span> =&gt; $documentStatusPR-&gt;id,</div>
<div class="line"><span class="lineno">  406</span>            ]</div>
<div class="line"><span class="lineno">  407</span>        );</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">foreach</span> ($data[<span class="stringliteral">&#39;movementToConsolidate&#39;</span>] as $conc) {</div>
<div class="line"><span class="lineno">  410</span>            FinanceConciliationBankMovement::create(</div>
<div class="line"><span class="lineno">  411</span>                [</div>
<div class="line"><span class="lineno">  412</span>                    <span class="stringliteral">&#39;finance_conciliation_id&#39;</span> =&gt; $conciliation-&gt;id,</div>
<div class="line"><span class="lineno">  413</span>                    <span class="stringliteral">&#39;accounting_entry_account_id&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;movement&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno">  414</span>                    <span class="stringliteral">&#39;concept&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;concept&#39;</span>],</div>
<div class="line"><span class="lineno">  415</span>                    <span class="stringliteral">&#39;debit&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno">  416</span>                    <span class="stringliteral">&#39;assets&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;assets&#39;</span>],</div>
<div class="line"><span class="lineno">  417</span>                    <span class="stringliteral">&#39;current_balance&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;current_balance&#39;</span>],</div>
<div class="line"><span class="lineno">  418</span>                ]</div>
<div class="line"><span class="lineno">  419</span>            );</div>
<div class="line"><span class="lineno">  420</span>        }</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  423</span>            [</div>
<div class="line"><span class="lineno">  424</span>                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  425</span>                <span class="stringliteral">&#39;redirect&#39;</span> =&gt; route(<span class="stringliteral">&#39;finance.conciliation.index&#39;</span>)</div>
<div class="line"><span class="lineno">  426</span>            ],</div>
<div class="line"><span class="lineno">  427</span>            200</div>
<div class="line"><span class="lineno">  428</span>        );</div>
<div class="line"><span class="lineno">  429</span>    }</div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_a0db5564815def7ec4588f827f2fed8a9"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a0db5564815def7ec4588f827f2fed8a9">Modules\Finance\Http\Controllers\FinanceConciliationController\getLastTotalResults</a></div><div class="ttdeci">getLastTotalResults(Carbon $formDate, Carbon $endDate, int $currency_id, int $accounting_account_id)</div><div class="ttdoc">Realiza el calculo de las cuentas de acuerdo a como suman.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00180">FinanceConciliationController.php:180</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affb03cc19897a1800a0f411264d6c7cc" name="affb03cc19897a1800a0f411264d6c7cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affb03cc19897a1800a0f411264d6c7cc">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actualiza la informacion de la conciliacion. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\Illuminate\Http\Request</td><td class="paramname">$request</td><td>Datos de la petición </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$id</td><td>ID de la conciliación</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00486">486</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  487</span>    {</div>
<div class="line"><span class="lineno">  488</span>        $this-&gt;validate(</div>
<div class="line"><span class="lineno">  489</span>            $request,</div>
<div class="line"><span class="lineno">  490</span>            [</div>
<div class="line"><span class="lineno">  491</span>                <span class="stringliteral">&#39;finance_bank_account_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  492</span>                <span class="stringliteral">&#39;start_date&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  493</span>                <span class="stringliteral">&#39;end_date&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  494</span>                <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  495</span>                <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  496</span>                <span class="stringliteral">&#39;bank_balance&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  497</span>            ],</div>
<div class="line"><span class="lineno">  498</span>            $this-&gt;messages</div>
<div class="line"><span class="lineno">  499</span>        );</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>        $data = $request-&gt;all();</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>        $conciliation = FinanceConciliation::find($id)-&gt;update(</div>
<div class="line"><span class="lineno">  504</span>            [</div>
<div class="line"><span class="lineno">  505</span>                <span class="stringliteral">&#39;finance_bank_account_id&#39;</span> =&gt; $data[<span class="stringliteral">&#39;finance_bank_account_id&#39;</span>],</div>
<div class="line"><span class="lineno">  506</span>                <span class="stringliteral">&#39;start_date&#39;</span> =&gt; $data[<span class="stringliteral">&#39;start_date&#39;</span>],</div>
<div class="line"><span class="lineno">  507</span>                <span class="stringliteral">&#39;end_date&#39;</span> =&gt; $data[<span class="stringliteral">&#39;end_date&#39;</span>],</div>
<div class="line"><span class="lineno">  508</span>                <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; $data[<span class="stringliteral">&#39;institution_id&#39;</span>],</div>
<div class="line"><span class="lineno">  509</span>                <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; $data[<span class="stringliteral">&#39;currency_id&#39;</span>],</div>
<div class="line"><span class="lineno">  510</span>                <span class="stringliteral">&#39;bank_balance&#39;</span> =&gt; $data[<span class="stringliteral">&#39;bank_balance&#39;</span>],</div>
<div class="line"><span class="lineno">  511</span>            ]</div>
<div class="line"><span class="lineno">  512</span>        );</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>        $FinConbankMov = FinanceConciliationBankMovement::where(</div>
<div class="line"><span class="lineno">  515</span>            <span class="stringliteral">&#39;finance_conciliation_id&#39;</span>,</div>
<div class="line"><span class="lineno">  516</span>            $id</div>
<div class="line"><span class="lineno">  517</span>        )-&gt;get();</div>
<div class="line"><span class="lineno">  518</span> </div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">foreach</span> ($FinConbankMov as $rec) {</div>
<div class="line"><span class="lineno">  520</span>            $rec-&gt;delete();</div>
<div class="line"><span class="lineno">  521</span>        }</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordflow">foreach</span> ($data[<span class="stringliteral">&#39;movementToConsolidate&#39;</span>] as $conc) {</div>
<div class="line"><span class="lineno">  524</span>            FinanceConciliationBankMovement::create(</div>
<div class="line"><span class="lineno">  525</span>                [</div>
<div class="line"><span class="lineno">  526</span>                    <span class="stringliteral">&#39;finance_conciliation_id&#39;</span> =&gt; $id,</div>
<div class="line"><span class="lineno">  527</span>                    <span class="stringliteral">&#39;accounting_entry_account_id&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;movement&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno">  528</span>                    <span class="stringliteral">&#39;concept&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;concept&#39;</span>],</div>
<div class="line"><span class="lineno">  529</span>                    <span class="stringliteral">&#39;debit&#39;</span>   =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno">  530</span>                    <span class="stringliteral">&#39;assets&#39;</span>  =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;assets&#39;</span>],</div>
<div class="line"><span class="lineno">  531</span>                    <span class="stringliteral">&#39;current_balance&#39;</span> =&gt; $conc[<span class="stringliteral">&#39;consolidation&#39;</span>][<span class="stringliteral">&#39;current_balance&#39;</span>],</div>
<div class="line"><span class="lineno">  532</span>                ]</div>
<div class="line"><span class="lineno">  533</span>            );</div>
<div class="line"><span class="lineno">  534</span>        }</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>        <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  537</span>            [</div>
<div class="line"><span class="lineno">  538</span>                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  539</span>                <span class="stringliteral">&#39;redirect&#39;</span> =&gt; route(<span class="stringliteral">&#39;finance.conciliation.index&#39;</span>)</div>
<div class="line"><span class="lineno">  540</span>            ],</div>
<div class="line"><span class="lineno">  541</span>            200</div>
<div class="line"><span class="lineno">  542</span>        );</div>
<div class="line"><span class="lineno">  543</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7fab98454118c21c15c0d92bb6ca9631" name="a7fab98454118c21c15c0d92bb6ca9631"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fab98454118c21c15c0d92bb6ca9631">&#9670;&#160;</a></span>validateFileStructure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">validateFileStructure </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bank_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método que valida la estructura del archivo usado para realizar la conciliación bancaria. </p>
<dl class="section author"><dt>Autor</dt><dd>José Briceño <a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ej'+'org'+'eb'+'ric'+'en'+'o9@'+'gm'+'ail'+'.c'+'om'; return false;">josej<span class="obfuscator">.nosp@m.</span>orge<span class="obfuscator">.nosp@m.</span>brice<span class="obfuscator">.nosp@m.</span>no9@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\SplFileInfo</td><td class="paramname">$file</td><td>Archivo csv/.txt </td></tr>
    <tr><td class="paramtype"></td><td class="paramname">$bank_id</td><td>Id del banco</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Excepciones</dt><dd>
  <table class="exception">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Exception Lanzar error de validación</p>
<dl class="section return"><dt>Devuelve</dt><dd>array|object </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00822">822</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  823</span>    {</div>
<div class="line"><span class="lineno">  824</span>        <span class="comment">// Encontrar el archivo de configuración para el banco asociado a la cuenta bancaria</span></div>
<div class="line"><span class="lineno">  825</span>        $fileStructure = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#acfaa96497989fbe4cdd36a9b052b5edb">getFileValidationArray</a>($bank_id);</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>        <span class="comment">// Si no existe, lanzar error de validación</span></div>
<div class="line"><span class="lineno">  828</span>        throw_if(</div>
<div class="line"><span class="lineno">  829</span>            is_null($fileStructure),</div>
<div class="line"><span class="lineno">  830</span>            <span class="stringliteral">&#39;El banco asociado a la cuenta bancaria no tiene una</span></div>
<div class="line"><span class="lineno">  831</span><span class="stringliteral">                configuración para el archivo &#39;</span> .</div>
<div class="line"><span class="lineno">  832</span>            <span class="stringliteral">&#39;de conciliación bancaria. Por favor registre una configuración.&#39;</span></div>
<div class="line"><span class="lineno">  833</span>        );</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>        <span class="comment">// Leer archivo csv/.txt</span></div>
<div class="line"><span class="lineno">  836</span>        $filePath = $file-&gt;getRealPath();</div>
<div class="line"><span class="lineno">  837</span> </div>
<div class="line"><span class="lineno">  838</span>        <span class="comment">// Delimitador del archivo csv/.txt</span></div>
<div class="line"><span class="lineno">  839</span>        $delimiter = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#aa9c949505d1e98703d8da5d552b3732f">guessDelimiter</a>($filePath);</div>
<div class="line"><span class="lineno">  840</span>        <span class="comment">// Obtener el string correspodiente a los delimitadores &#39;;&#39; | &#39;,&#39; | &#39;\t&#39;</span></div>
<div class="line"><span class="lineno">  841</span>        $translatedDelimiter = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a40ab52c3f5b76dfa5622019be27d1c53">getFileConfigurationDelimiter</a>($delimiter);</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>        <span class="comment">// Si el delimitador del archivo csv/.txt no coincide con el del archivo de configuración, lanzar error de validación</span></div>
<div class="line"><span class="lineno">  844</span>        throw_if(</div>
<div class="line"><span class="lineno">  845</span>            $translatedDelimiter != $fileStructure[<span class="stringliteral">&#39;separated_by&#39;</span>],</div>
<div class="line"><span class="lineno">  846</span>            <span class="stringliteral">&#39;El archivo no se encuentra separado por el separador</span></div>
<div class="line"><span class="lineno">  847</span><span class="stringliteral">                indicado en la configuración&#39;</span></div>
<div class="line"><span class="lineno">  848</span>        );</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span> </div>
<div class="line"><span class="lineno">  851</span>        $csvData = [];</div>
<div class="line"><span class="lineno">  852</span> </div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>        <span class="keywordflow">if</span> (($open = fopen($filePath, <span class="stringliteral">&quot;r&quot;</span>)) !== <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  855</span>            <span class="keywordflow">if</span> ($fileStructure[<span class="stringliteral">&quot;read_start_line&quot;</span>] == <span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  856</span>                fgetcsv($open, 700, $delimiter);</div>
<div class="line"><span class="lineno">  857</span>            }</div>
<div class="line"><span class="lineno">  858</span> </div>
<div class="line"><span class="lineno">  859</span>            <span class="keywordflow">while</span> (($data = fgetcsv($open, 700, $delimiter)) !== <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  860</span>                $csvData[] = is_array($data) ? trim($data[0]) : trim($data);</div>
<div class="line"><span class="lineno">  861</span>            }</div>
<div class="line"><span class="lineno">  862</span> </div>
<div class="line"><span class="lineno">  863</span>            <span class="keywordflow">if</span> ($fileStructure[<span class="stringliteral">&quot;read_end_line&quot;</span>] == <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno">  864</span>                array_pop($csvData);</div>
<div class="line"><span class="lineno">  865</span>            }</div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>            fclose($open);</div>
<div class="line"><span class="lineno">  868</span>        }</div>
<div class="line"><span class="lineno">  869</span> </div>
<div class="line"><span class="lineno">  870</span>        $decimalSeparator = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#acdcd5d4c0ace9d353b05295c89a48d6e">guessDecimalSeparator</a>($csvData);</div>
<div class="line"><span class="lineno">  871</span>        $translatedDecimalSeparator = $this-&gt;<a class="code hl_function" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a3eb02bf039263bcaabc8491a45e98011">getFileConfigurationDecimalSeparator</a>(</div>
<div class="line"><span class="lineno">  872</span>            $decimalSeparator</div>
<div class="line"><span class="lineno">  873</span>        );</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>        throw_if(</div>
<div class="line"><span class="lineno">  876</span>            $translatedDecimalSeparator != $fileStructure[<span class="stringliteral">&#39;decimal_separator&#39;</span>],</div>
<div class="line"><span class="lineno">  877</span>            <span class="stringliteral">&#39;El archivo no esta usando el separador de decimales</span></div>
<div class="line"><span class="lineno">  878</span><span class="stringliteral">                indicado en la configuración&#39;</span></div>
<div class="line"><span class="lineno">  879</span>        );</div>
<div class="line"><span class="lineno">  880</span>        <span class="keywordflow">return</span> $csvData;</div>
<div class="line"><span class="lineno">  881</span>    }</div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_a3eb02bf039263bcaabc8491a45e98011"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a3eb02bf039263bcaabc8491a45e98011">Modules\Finance\Http\Controllers\FinanceConciliationController\getFileConfigurationDecimalSeparator</a></div><div class="ttdeci">getFileConfigurationDecimalSeparator( $separator, $fileDelimiters=[','=&gt; 'Coma', &quot;.&quot;=&gt; 'Punto'])</div><div class="ttdoc">Método que consigue el separador de decimales usado en el archivo csv/.txt.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00800">FinanceConciliationController.php:800</a></div></div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_a40ab52c3f5b76dfa5622019be27d1c53"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#a40ab52c3f5b76dfa5622019be27d1c53">Modules\Finance\Http\Controllers\FinanceConciliationController\getFileConfigurationDelimiter</a></div><div class="ttdeci">getFileConfigurationDelimiter( $delimiter, $fileDelimiters=[';'=&gt; 'Punto y Coma', &quot;\t&quot;=&gt; 'Tabulador', ','=&gt; 'Coma'])</div><div class="ttdoc">Método que consigue el delimitador usado en el archivo csv/.txt.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00779">FinanceConciliationController.php:779</a></div></div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_aa9c949505d1e98703d8da5d552b3732f"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#aa9c949505d1e98703d8da5d552b3732f">Modules\Finance\Http\Controllers\FinanceConciliationController\guessDelimiter</a></div><div class="ttdeci">guessDelimiter(string $filePath, array $delimiters=[';', ',', &quot;\t&quot;])</div><div class="ttdoc">Método que retorna el delimitador usado un archiv .csv.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00707">FinanceConciliationController.php:707</a></div></div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_acdcd5d4c0ace9d353b05295c89a48d6e"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#acdcd5d4c0ace9d353b05295c89a48d6e">Modules\Finance\Http\Controllers\FinanceConciliationController\guessDecimalSeparator</a></div><div class="ttdeci">guessDecimalSeparator(array $csvData, array $separators=['.', ','])</div><div class="ttdoc">Método que obtiene el separador usado en el formato de monto.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00736">FinanceConciliationController.php:736</a></div></div>
<div class="ttc" id="aclassModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController_html_acfaa96497989fbe4cdd36a9b052b5edb"><div class="ttname"><a href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html#acfaa96497989fbe4cdd36a9b052b5edb">Modules\Finance\Http\Controllers\FinanceConciliationController\getFileValidationArray</a></div><div class="ttdeci">getFileValidationArray($bank_id)</div><div class="ttdoc">Método que obtiene el array de validación para el archivo de configuración.</div><div class="ttdef"><b>Definition</b> <a href="../../d2/db1/FinanceConciliationController_8php_source.html#l00759">FinanceConciliationController.php:759</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca78b35dd9df5b11e63e88796cf08c66" name="aca78b35dd9df5b11e63e88796cf08c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca78b35dd9df5b11e63e88796cf08c66">&#9670;&#160;</a></span>vueList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vueList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retorna listado de conciliaciones para tabla. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00089">89</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>    {</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">   92</span>            [</div>
<div class="line"><span class="lineno">   93</span>                <span class="stringliteral">&#39;records&#39;</span> =&gt; FinanceConciliation::with(<span class="stringliteral">&#39;financeBankAccount.bank&#39;</span>, <span class="stringliteral">&#39;currency&#39;</span>)-&gt;<span class="keyword">get</span>()</div>
<div class="line"><span class="lineno">   94</span>            ],</div>
<div class="line"><span class="lineno">   95</span>            200</div>
<div class="line"><span class="lineno">   96</span>        );</div>
<div class="line"><span class="lineno">   97</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ca23822a346ae176c7243a968fcbe7b" name="a2ca23822a346ae176c7243a968fcbe7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ca23822a346ae176c7243a968fcbe7b">&#9670;&#160;</a></span>vueListMovementsByAccount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vueListMovementsByAccount </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$institution_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$account_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$endDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene un listado de operacion de cuentas en asientos pendientes por conciliar. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$institution_id</td><td>id de la institución </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$currency_id</td><td>id del tipo de moneda </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$account_id</td><td>id de la cuenta bancaria </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$startDate</td><td>fecha inicial de la consulta </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$endDate</td><td>fecha final de la consulta</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\Http\JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00113">113</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  119</span>      {</div>
<div class="line"><span class="lineno">  120</span>        $movement_accounting_account_id = FinanceBankAccount::find($account_id)</div>
<div class="line"><span class="lineno">  121</span>            -&gt;accounting_account_id;</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>        $movements = AccountingEntryAccount::doesntHave(</div>
<div class="line"><span class="lineno">  124</span>            <span class="stringliteral">&#39;financeConciliationBankMovement&#39;</span></div>
<div class="line"><span class="lineno">  125</span>        )-&gt;with(<span class="stringliteral">&#39;entries.documentStatus&#39;</span>)</div>
<div class="line"><span class="lineno">  126</span>            -&gt;whereHas(</div>
<div class="line"><span class="lineno">  127</span>                <span class="stringliteral">&#39;entries&#39;</span>,</div>
<div class="line"><span class="lineno">  128</span>                <span class="keyword">function</span> ($query) use (</div>
<div class="line"><span class="lineno">  129</span>                    $institution_id,</div>
<div class="line"><span class="lineno">  130</span>                    $currency_id,</div>
<div class="line"><span class="lineno">  131</span>                    $startDate,</div>
<div class="line"><span class="lineno">  132</span>                    $endDate</div>
<div class="line"><span class="lineno">  133</span>                ) {</div>
<div class="line"><span class="lineno">  134</span>                    $query-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  135</span>                        -&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $currency_id)</div>
<div class="line"><span class="lineno">  136</span>                        -&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$startDate, $endDate]);</div>
<div class="line"><span class="lineno">  137</span>                }</div>
<div class="line"><span class="lineno">  138</span>            )-&gt;whereHas(</div>
<div class="line"><span class="lineno">  139</span>                <span class="stringliteral">&#39;entries.documentStatus&#39;</span>,</div>
<div class="line"><span class="lineno">  140</span>                <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  141</span>                    $query-&gt;where(<span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;AP&#39;</span>);</div>
<div class="line"><span class="lineno">  142</span>                }</div>
<div class="line"><span class="lineno">  143</span>            )</div>
<div class="line"><span class="lineno">  144</span>        -&gt;where(<span class="stringliteral">&#39;accounting_account_id&#39;</span>, $movement_accounting_account_id)</div>
<div class="line"><span class="lineno">  145</span>        -&gt;get();</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  148</span>            [</div>
<div class="line"><span class="lineno">  149</span>                <span class="stringliteral">&#39;records&#39;</span> =&gt; $movements,</div>
<div class="line"><span class="lineno">  150</span>            ],</div>
<div class="line"><span class="lineno">  151</span>            200</div>
<div class="line"><span class="lineno">  152</span>        );</div>
<div class="line"><span class="lineno">  153</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentación de campos</h2>
<a id="aaf8d38bd4e7d07a3d97cc2f497f6d13f" name="aaf8d38bd4e7d07a3d97cc2f497f6d13f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf8d38bd4e7d07a3d97cc2f497f6d13f">&#9670;&#160;</a></span>$messages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $messages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mensajes de validación. </p>

<p class="definition">Definición en la línea <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html#l00046">46</a> del archivo <a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a>.</p>

</div>
</div>
<hr/>La documentación de esta clase está generada del siguiente archivo:<ul>
<li><a class="el" href="../../d2/db1/FinanceConciliationController_8php_source.html">FinanceConciliationController.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Modules</b></li><li class="navelem"><b>Finance</b></li><li class="navelem"><b>Http</b></li><li class="navelem"><b>Controllers</b></li><li class="navelem"><a class="el" href="../../dd/db6/classModules_1_1Finance_1_1Http_1_1Controllers_1_1FinanceConciliationController.html">FinanceConciliationController</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
