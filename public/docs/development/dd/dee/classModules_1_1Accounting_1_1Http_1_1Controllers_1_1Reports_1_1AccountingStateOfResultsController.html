<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KAVAC: Referencia de la clase AccountingStateOfResultsController</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-doc.png"/></td>
  <td id="projectalign">
   <div id="projectname">KAVAC<span id="projectnumber">&#160;v1.0.5</span>
   </div>
   <div id="projectbrief">Sistema de Gestión Organizacional</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="#pro-attribs">Atributos protegidos</a>  </div>
  <div class="headertitle"><div class="title">Referencia de la clase AccountingStateOfResultsController</div></div>
</div><!--header-->
<div class="contents">

<p>Controlador para la generación del reporte de estado de resultados.  
 <a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#details">Más...</a></p>

<p>Hereda de Controller.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Diagrama de colaboración de AccountingStateOfResultsController:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d0/d59/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController__coll__graph.png" border="0" usemap="#aAccountingStateOfResultsController_coll__map" alt="Collaboration graph"/></div>
<map name="aAccountingStateOfResultsController_coll__map" id="aAccountingStateOfResultsController_coll__map">
<area shape="rect" title="Controlador para la generación del reporte de estado de resultados." alt="" coords="5,5,203,325"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr class="memitem:a095c5d389db211932136b53f25f39685" id="r_a095c5d389db211932136b53f25f39685"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a095c5d389db211932136b53f25f39685">__construct</a> ()</td></tr>
<tr class="memdesc:a095c5d389db211932136b53f25f39685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define la configuración de la clase.  <br /></td></tr>
<tr class="separator:a095c5d389db211932136b53f25f39685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ddffde595d12d9c85da6f4c1eb2605" id="r_ab0ddffde595d12d9c85da6f4c1eb2605"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a> ($convertions, $entry, $currency_id)</td></tr>
<tr class="memdesc:ab0ddffde595d12d9c85da6f4c1eb2605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encuentra los tipos de cambio.  <br /></td></tr>
<tr class="separator:ab0ddffde595d12d9c85da6f4c1eb2605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3d70e44a5afea25eb600c5e19f6a29" id="r_a6f3d70e44a5afea25eb600c5e19f6a29"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29">calculateOperation</a> ($convertions, $currency_id, $value, $date, $equalCurrency)</td></tr>
<tr class="memdesc:a6f3d70e44a5afea25eb600c5e19f6a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza la conversion de saldo.  <br /></td></tr>
<tr class="separator:a6f3d70e44a5afea25eb600c5e19f6a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf408629462a34c9e16a85f68f74ee0a" id="r_aaf408629462a34c9e16a85f68f74ee0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a">calculateValuesInEntries</a> ($account, $initD, $endD)</td></tr>
<tr class="memdesc:aaf408629462a34c9e16a85f68f74ee0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de parentela solo se sumaran los valores de los asientos contables aprobados.  <br /></td></tr>
<tr class="separator:aaf408629462a34c9e16a85f68f74ee0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d7453ab9e51eca5ab50a38ce4a84c0" id="r_a23d7453ab9e51eca5ab50a38ce4a84c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23d7453ab9e51eca5ab50a38ce4a84c0">export</a> ($report)</td></tr>
<tr class="memdesc:a23d7453ab9e51eca5ab50a38ce4a84c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en hojade calculo de estado de resultados.  <br /></td></tr>
<tr class="separator:a23d7453ab9e51eca5ab50a38ce4a84c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa825cb7aedbc4c92b3fcc708263200bc" id="r_aa825cb7aedbc4c92b3fcc708263200bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc">formatDataInArray</a> ($records, $initD, $endD, $level=1)</td></tr>
<tr class="memdesc:aa825cb7aedbc4c92b3fcc708263200bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sintetiza la información de una cuenta en un array con sus respectivas subcuentas.  <br /></td></tr>
<tr class="separator:aa825cb7aedbc4c92b3fcc708263200bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece89e986c4cfa1db456acdb13987406" id="r_aece89e986c4cfa1db456acdb13987406"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aece89e986c4cfa1db456acdb13987406">getAccountParents</a> ($childData, $parents=[])</td></tr>
<tr class="memdesc:aece89e986c4cfa1db456acdb13987406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método para buscar las cuentas padre de una formulación.  <br /></td></tr>
<tr class="separator:aece89e986c4cfa1db456acdb13987406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c710b0ad0cd4c8f24081c8425443be9" id="r_a6c710b0ad0cd4c8f24081c8425443be9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6c710b0ad0cd4c8f24081c8425443be9">getCheckBreak</a> ()</td></tr>
<tr class="memdesc:a6c710b0ad0cd4c8f24081c8425443be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Devolver PageBreakTrigger.  <br /></td></tr>
<tr class="separator:a6c710b0ad0cd4c8f24081c8425443be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4412028831ce993246eb29b08f2ebb03" id="r_a4412028831ce993246eb29b08f2ebb03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a> ()</td></tr>
<tr class="memdesc:a4412028831ce993246eb29b08f2ebb03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene las conversiones de cuentas.  <br /></td></tr>
<tr class="separator:a4412028831ce993246eb29b08f2ebb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55459f9e07fdc6b85953811024ab61d3" id="r_a55459f9e07fdc6b85953811024ab61d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a> ()</td></tr>
<tr class="memdesc:a55459f9e07fdc6b85953811024ab61d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene los datos de la moneda.  <br /></td></tr>
<tr class="separator:a55459f9e07fdc6b85953811024ab61d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4c79afa7ea1ba7a95b832f2b6ab8ec4" id="r_aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a> ()</td></tr>
<tr class="memdesc:aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene el identificador de la moneda.  <br /></td></tr>
<tr class="separator:aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db19fdd230ae36f5cadc50c61a451b0" id="r_a0db19fdd230ae36f5cadc50c61a451b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a> ($ini, $debit, $assets)</td></tr>
<tr class="memdesc:a0db19fdd230ae36f5cadc50c61a451b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el calculo de las cuentas de acuerdo a como suman.  <br /></td></tr>
<tr class="separator:a0db19fdd230ae36f5cadc50c61a451b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0379fc68799a3f32447bd6760dcd02" id="r_a5c0379fc68799a3f32447bd6760dcd02"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02">pdf</a> ($report, $xml=false)</td></tr>
<tr class="memdesc:a5c0379fc68799a3f32447bd6760dcd02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de estado de resultados.  <br /></td></tr>
<tr class="separator:a5c0379fc68799a3f32447bd6760dcd02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c281813aa2f3d73fe2c7089b2b7f03" id="r_a23c281813aa2f3d73fe2c7089b2b7f03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03">pdfSign</a> ($report)</td></tr>
<tr class="memdesc:a23c281813aa2f3d73fe2c7089b2b7f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de estado de resultados.  <br /></td></tr>
<tr class="separator:a23c281813aa2f3d73fe2c7089b2b7f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8cc7e992a9a4e0958361ae05c79d406" id="r_ac8cc7e992a9a4e0958361ae05c79d406"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ac8cc7e992a9a4e0958361ae05c79d406">pdfVue</a> ($date, $level, <a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a> $currency, $zero=false)</td></tr>
<tr class="memdesc:ac8cc7e992a9a4e0958361ae05c79d406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de balance general.  <br /></td></tr>
<tr class="separator:ac8cc7e992a9a4e0958361ae05c79d406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d7280e9d9218f3f62918686cd7906d" id="r_ab6d7280e9d9218f3f62918686cd7906d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab6d7280e9d9218f3f62918686cd7906d">pdfVueSign</a> ($date, $level, <a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a> $currency, $zero=false)</td></tr>
<tr class="memdesc:ab6d7280e9d9218f3f62918686cd7906d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de balance general.  <br /></td></tr>
<tr class="separator:ab6d7280e9d9218f3f62918686cd7906d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678f5c49204c69d24b2b293794996ecd" id="r_a678f5c49204c69d24b2b293794996ecd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a678f5c49204c69d24b2b293794996ecd">setConvertions</a> ($convertions)</td></tr>
<tr class="memdesc:a678f5c49204c69d24b2b293794996ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece las conversiones de cuentas.  <br /></td></tr>
<tr class="separator:a678f5c49204c69d24b2b293794996ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9edafe924a4efeb9d1a9daf1bc1dfe" id="r_a4a9edafe924a4efeb9d1a9daf1bc1dfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a> ($currency)</td></tr>
<tr class="memdesc:a4a9edafe924a4efeb9d1a9daf1bc1dfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece los datos de la moneda.  <br /></td></tr>
<tr class="separator:a4a9edafe924a4efeb9d1a9daf1bc1dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Atributos protegidos</h2></td></tr>
<tr class="memitem:aa909c5b20912c383ac43c7e672007a1d" id="r_aa909c5b20912c383ac43c7e672007a1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = []</td></tr>
<tr class="memdesc:aa909c5b20912c383ac43c7e672007a1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lista de conversiones validas.  <br /></td></tr>
<tr class="separator:aa909c5b20912c383ac43c7e672007a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec628a1048bd2ab581320d0aa1aed30" id="r_a6ec628a1048bd2ab581320d0aa1aed30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a> = null</td></tr>
<tr class="memdesc:a6ec628a1048bd2ab581320d0aa1aed30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moneda en la que se expresara el reporte.  <br /></td></tr>
<tr class="separator:a6ec628a1048bd2ab581320d0aa1aed30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a311b3d7033e348395d71484904c44767" id="r_a311b3d7033e348395d71484904c44767"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a311b3d7033e348395d71484904c44767">$PageBreakTrigger</a></td></tr>
<tr class="memdesc:a311b3d7033e348395d71484904c44767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Salto de página.  <br /></td></tr>
<tr class="separator:a311b3d7033e348395d71484904c44767"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><p>Controlador para la generación del reporte de estado de resultados. </p>
<p>Clase que gestiona el reporte de estado de resultados</p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section user"><dt>Licencia:</dt><dd><a href="http://conocimientolibre.cenditel.gob.ve/licencia-de-software-v-1-3/">LICENCIA DE SOFTWARE CENDITEL</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00034">34</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
</div><h2 class="groupheader">Documentación de constructores y destructores</h2>
<a id="a095c5d389db211932136b53f25f39685" name="a095c5d389db211932136b53f25f39685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a095c5d389db211932136b53f25f39685">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define la configuración de la clase. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00064">64</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>    {</div>
<div class="line"><span class="lineno">   66</span>        <span class="comment">// Establece permisos de acceso para cada método del controlador</span></div>
<div class="line"><span class="lineno">   67</span>        $this-&gt;middleware(<span class="stringliteral">&#39;permission:accounting.report.stateofresults&#39;</span>, [</div>
<div class="line"><span class="lineno">   68</span>            <span class="stringliteral">&#39;only&#39;</span> =&gt; [</div>
<div class="line"><span class="lineno">   69</span>                <span class="stringliteral">&#39;pdf&#39;</span>,</div>
<div class="line"><span class="lineno">   70</span>                <span class="stringliteral">&#39;pdfVue&#39;</span>,</div>
<div class="line"><span class="lineno">   71</span>                <span class="stringliteral">&#39;pdfSign&#39;</span>,</div>
<div class="line"><span class="lineno">   72</span>                <span class="stringliteral">&#39;pdfVueSign&#39;</span></div>
<div class="line"><span class="lineno">   73</span>            ]</div>
<div class="line"><span class="lineno">   74</span>        ]);</div>
<div class="line"><span class="lineno">   75</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentación de funciones miembro</h2>
<a id="ab0ddffde595d12d9c85da6f4c1eb2605" name="ab0ddffde595d12d9c85da6f4c1eb2605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0ddffde595d12d9c85da6f4c1eb2605">&#9670;&#160;</a></span>calculateExchangeRates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">calculateExchangeRates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$convertions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encuentra los tipos de cambio. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$convertions</td><td>lista de conversiones </td></tr>
    <tr><td class="paramtype">AccountingEntry</td><td class="paramname">$entry</td><td>asiento contable </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$currency_id</td><td>identificador de la moneda a la cual se realizara la conversion</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>array lista de conversiones actualizada </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01217">1217</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1218</span>    {</div>
<div class="line"><span class="lineno"> 1219</span>        $exchangeRate = ExchangeRate::where(<span class="stringliteral">&#39;active&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1220</span>            -&gt;whereIn(<span class="stringliteral">&#39;to_currency_id&#39;</span>, [$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], $currency_id])</div>
<div class="line"><span class="lineno"> 1221</span>            -&gt;whereIn(<span class="stringliteral">&#39;from_currency_id&#39;</span>, [$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], $currency_id])</div>
<div class="line"><span class="lineno"> 1222</span>            -&gt;orderBy(<span class="stringliteral">&#39;end_at&#39;</span>, <span class="stringliteral">&#39;DESC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno"> 1223</span>        <span class="keywordflow">if</span> (count($exchangeRate) != 0) {</div>
<div class="line"><span class="lineno"> 1224</span>            <span class="keywordflow">if</span> (!array_key_exists($entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)) {</div>
<div class="line"><span class="lineno"> 1225</span>                <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>]] = [];</div>
<div class="line"><span class="lineno"> 1226</span>                <span class="keywordflow">foreach</span> ($exchangeRate as $recordExchangeRate) {</div>
<div class="line"><span class="lineno"> 1227</span>                    array_push(</div>
<div class="line"><span class="lineno"> 1228</span>                        <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>]],</div>
<div class="line"><span class="lineno"> 1229</span>                        [</div>
<div class="line"><span class="lineno"> 1230</span>                            <span class="stringliteral">&#39;amount&#39;</span> =&gt; $recordExchangeRate-&gt;amount,</div>
<div class="line"><span class="lineno"> 1231</span>                            <span class="stringliteral">&#39;operator&#39;</span> =&gt; ($currency_id == $recordExchangeRate-&gt;from_currency_id) ? <span class="stringliteral">&#39;from&#39;</span> : <span class="stringliteral">&#39;to&#39;</span>,</div>
<div class="line"><span class="lineno"> 1232</span>                            <span class="stringliteral">&#39;start_at&#39;</span> =&gt; $recordExchangeRate-&gt;start_at,</div>
<div class="line"><span class="lineno"> 1233</span>                            <span class="stringliteral">&#39;end_at&#39;</span> =&gt; $recordExchangeRate-&gt;end_at,</div>
<div class="line"><span class="lineno"> 1234</span>                        ]</div>
<div class="line"><span class="lineno"> 1235</span>                    );</div>
<div class="line"><span class="lineno"> 1236</span>                }</div>
<div class="line"><span class="lineno"> 1237</span>            }</div>
<div class="line"><span class="lineno"> 1238</span>        }</div>
<div class="line"><span class="lineno"> 1239</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>;</div>
<div class="line"><span class="lineno"> 1240</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_aa909c5b20912c383ac43c7e672007a1d"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\$convertions</a></div><div class="ttdeci">$convertions</div><div class="ttdoc">Lista de conversiones validas.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController.php:48</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00145">AccountingStateOfResultsController\pdfVue()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00389">AccountingStateOfResultsController\pdfVueSign()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph">
<area shape="rect" title="Encuentra los tipos de cambio." alt="" coords="545,79,727,104"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,29,497,55"/>
<area shape="poly" title=" " alt="" coords="562,78,466,57,467,52,563,73"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ac8cc7e992a9a4e0958361ae05c79d406" title="Genera el reporte en pdf de balance general." alt="" coords="373,79,440,104"/>
<area shape="poly" title=" " alt="" coords="532,94,440,94,440,89,532,89"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab6d7280e9d9218f3f62918686cd7906d" title="Genera el reporte en pdf de balance general." alt="" coords="359,128,454,153"/>
<area shape="poly" title=" " alt="" coords="564,110,455,133,453,128,562,104"/>
<area shape="poly" title=" " alt="" coords="444,20,434,11,407,8,384,10,372,15,370,20,376,28,372,31,365,21,369,11,383,5,407,3,436,6,448,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="302,45,268,45,268,39,302,39"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="a6f3d70e44a5afea25eb600c5e19f6a29" name="a6f3d70e44a5afea25eb600c5e19f6a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f3d70e44a5afea25eb600c5e19f6a29">&#9670;&#160;</a></span>calculateOperation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">calculateOperation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$convertions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$equalCurrency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza la conversion de saldo. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$convertions</td><td>lista de tipos cambios para la moneda </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$entry_id</td><td>identificador del asiento </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$value</td><td>saldo del asiento </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$date</td><td>fecha del asiento </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$equalCurrency</td><td>bandera que indica si el tipo de moneda en el que esta el asiento es las misma que la que se desea expresar</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float resultdado de la operacion </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01186">1186</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1187</span>    {</div>
<div class="line"><span class="lineno"> 1188</span>        <span class="keywordflow">if</span> ($equalCurrency) {</div>
<div class="line"><span class="lineno"> 1189</span>            <span class="keywordflow">return</span> $value;</div>
<div class="line"><span class="lineno"> 1190</span>        }</div>
<div class="line"><span class="lineno"> 1191</span> </div>
<div class="line"><span class="lineno"> 1192</span>        <span class="keywordflow">if</span> ($currency_id &amp;&amp; array_key_exists($currency_id, <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>) &amp;&amp; <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$currency_id]) {</div>
<div class="line"><span class="lineno"> 1193</span>            <span class="keywordflow">foreach</span> (<a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$currency_id] as $convertion) {</div>
<div class="line"><span class="lineno"> 1194</span>                <span class="keywordflow">if</span> ($date &gt;= $convertion[<span class="stringliteral">&#39;start_at&#39;</span>] &amp;&amp; $date &lt;= $convertion[<span class="stringliteral">&#39;end_at&#39;</span>]) {</div>
<div class="line"><span class="lineno"> 1195</span>                    <span class="keywordflow">if</span> ($convertion[<span class="stringliteral">&#39;operator&#39;</span>] == <span class="stringliteral">&#39;to&#39;</span>) {</div>
<div class="line"><span class="lineno"> 1196</span>                        <span class="keywordflow">return</span> ($value * $convertion[<span class="stringliteral">&#39;amount&#39;</span>]);</div>
<div class="line"><span class="lineno"> 1197</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1198</span>                        <span class="keywordflow">return</span> ($value / $convertion[<span class="stringliteral">&#39;amount&#39;</span>]);</div>
<div class="line"><span class="lineno"> 1199</span>                    }</div>
<div class="line"><span class="lineno"> 1200</span>                }</div>
<div class="line"><span class="lineno"> 1201</span>            }</div>
<div class="line"><span class="lineno"> 1202</span>        }</div>
<div class="line"><span class="lineno"> 1203</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1204</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph">
<area shape="rect" title="Realiza la conversion de saldo." alt="" coords="545,29,691,55"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,29,497,55"/>
<area shape="poly" title=" " alt="" coords="531,45,498,45,498,39,531,39"/>
<area shape="poly" title=" " alt="" coords="444,20,434,11,407,8,384,10,372,15,370,20,376,28,372,31,365,21,369,11,383,5,407,3,436,6,448,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="302,45,268,45,268,39,302,39"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="aaf408629462a34c9e16a85f68f74ee0a" name="aaf408629462a34c9e16a85f68f74ee0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf408629462a34c9e16a85f68f74ee0a">&#9670;&#160;</a></span>calculateValuesInEntries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">calculateValuesInEntries </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$account</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$initD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$endD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de parentela solo se sumaran los valores de los asientos contables aprobados. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$records</td><td>registro de una cuenta o subcuenta patrimonial</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float resultado de realizar la operaciones de suma y resta </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">1093</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1094</span>    {</div>
<div class="line"><span class="lineno"> 1095</span>        $initDay = (int) explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[2];</div>
<div class="line"><span class="lineno"> 1096</span>        $initMonth = (int) explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[1];</div>
<div class="line"><span class="lineno"> 1097</span>        $initYear = (int) explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[0];</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>        $endDay = (int) explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[2];</div>
<div class="line"><span class="lineno"> 1100</span>        $endMonth = (int) explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[1];</div>
<div class="line"><span class="lineno"> 1101</span>        $endYear = (int) explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[0];</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>        <span class="keywordflow">if</span> ($initDay &lt; 10) {</div>
<div class="line"><span class="lineno"> 1104</span>            $initDay = <span class="charliteral">&#39;0&#39;</span> . $initDay;</div>
<div class="line"><span class="lineno"> 1105</span>        }</div>
<div class="line"><span class="lineno"> 1106</span>        <span class="keywordflow">if</span> ($initMonth &lt; 10) {</div>
<div class="line"><span class="lineno"> 1107</span>            $initMonth = <span class="charliteral">&#39;0&#39;</span> . $initMonth;</div>
<div class="line"><span class="lineno"> 1108</span>        }</div>
<div class="line"><span class="lineno"> 1109</span>        <span class="keywordflow">if</span> ($endDay &lt; 10) {</div>
<div class="line"><span class="lineno"> 1110</span>            $endDay = <span class="charliteral">&#39;0&#39;</span> . $endDay;</div>
<div class="line"><span class="lineno"> 1111</span>        }</div>
<div class="line"><span class="lineno"> 1112</span>        <span class="keywordflow">if</span> ($endMonth &lt; 10) {</div>
<div class="line"><span class="lineno"> 1113</span>            $endMonth = <span class="charliteral">&#39;0&#39;</span> . $endMonth;</div>
<div class="line"><span class="lineno"> 1114</span>        }</div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>        $initD = $initYear . <span class="charliteral">&#39;-&#39;</span> . $initMonth . <span class="charliteral">&#39;-&#39;</span> . $initDay;</div>
<div class="line"><span class="lineno"> 1117</span>        $endD = $endYear . <span class="charliteral">&#39;-&#39;</span> . $endMonth . <span class="charliteral">&#39;-&#39;</span> . $endDay;</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>        <span class="comment">/* saldo total en el debe de la cuenta */</span></div>
<div class="line"><span class="lineno"> 1120</span>        $debit = 0;</div>
<div class="line"><span class="lineno"> 1121</span> </div>
<div class="line"><span class="lineno"> 1122</span>        <span class="comment">/* saldo total en el haber de la cuenta */</span></div>
<div class="line"><span class="lineno"> 1123</span>        $assets = 0;</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>        <span class="comment">/* saldo total de la suma de los saldos de sus cuentas hijo */</span></div>
<div class="line"><span class="lineno"> 1126</span>        $balanceChildren = 0;</div>
<div class="line"><span class="lineno"> 1127</span> </div>
<div class="line"><span class="lineno"> 1128</span>        <span class="keywordflow">foreach</span> ($account-&gt;entryAccount as $entryAccount) {</div>
<div class="line"><span class="lineno"> 1129</span>            <span class="keywordflow">if</span> ($entryAccount-&gt;entries) {</div>
<div class="line"><span class="lineno"> 1130</span>                <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1131</span>                    $entryAccount-&gt;entries[<span class="stringliteral">&#39;from_date&#39;</span>] &gt;= $initD &amp;&amp; $entryAccount-&gt;entries[<span class="stringliteral">&#39;from_date&#39;</span>] &lt;= $endD &amp;&amp;</div>
<div class="line"><span class="lineno"> 1132</span>                    $entryAccount-&gt;entries[<span class="stringliteral">&#39;approved&#39;</span>]</div>
<div class="line"><span class="lineno"> 1133</span>                ) {</div>
<div class="line"><span class="lineno"> 1134</span>                    <span class="keywordflow">if</span> (!array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>())) {</div>
<div class="line"><span class="lineno"> 1135</span>                        $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a678f5c49204c69d24b2b293794996ecd">setConvertions</a>($this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a>(</div>
<div class="line"><span class="lineno"> 1136</span>                            $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>(),</div>
<div class="line"><span class="lineno"> 1137</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>],</div>
<div class="line"><span class="lineno"> 1138</span>                            $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a>()</div>
<div class="line"><span class="lineno"> 1139</span>                        ));</div>
<div class="line"><span class="lineno"> 1140</span>                    }</div>
<div class="line"><span class="lineno"> 1141</span> </div>
<div class="line"><span class="lineno"> 1142</span>                    $debit += ($entryAccount[<span class="stringliteral">&#39;debit&#39;</span>] != 0) ?</div>
<div class="line"><span class="lineno"> 1143</span>                    $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29">calculateOperation</a>(</div>
<div class="line"><span class="lineno"> 1144</span>                        $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>(),</div>
<div class="line"><span class="lineno"> 1145</span>                        $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno"> 1146</span>                        $entryAccount[<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno"> 1147</span>                        $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno"> 1148</span>                        ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] == $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a>()) ?? <span class="keyword">false</span></div>
<div class="line"><span class="lineno"> 1149</span>                    ) : 0;</div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span>                    $assets += ($entryAccount[<span class="stringliteral">&#39;assets&#39;</span>] != 0) ?</div>
<div class="line"><span class="lineno"> 1152</span>                    $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29">calculateOperation</a>(</div>
<div class="line"><span class="lineno"> 1153</span>                        $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>(),</div>
<div class="line"><span class="lineno"> 1154</span>                        $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno"> 1155</span>                        $entryAccount[<span class="stringliteral">&#39;assets&#39;</span>],</div>
<div class="line"><span class="lineno"> 1156</span>                        $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno"> 1157</span>                        ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] == $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a>()) ?? <span class="keyword">false</span></div>
<div class="line"><span class="lineno"> 1158</span>                    ) : 0;</div>
<div class="line"><span class="lineno"> 1159</span>                }</div>
<div class="line"><span class="lineno"> 1160</span>            }</div>
<div class="line"><span class="lineno"> 1161</span>        }</div>
<div class="line"><span class="lineno"> 1162</span> </div>
<div class="line"><span class="lineno"> 1163</span>        <span class="keywordflow">if</span> (count($account-&gt;children) &gt; 0) {</div>
<div class="line"><span class="lineno"> 1164</span>            <span class="keywordflow">foreach</span> ($account-&gt;children as $child) {</div>
<div class="line"><span class="lineno"> 1165</span>                <span class="comment">/* llamada recursiva y acumulación */</span></div>
<div class="line"><span class="lineno"> 1166</span>                $balanceChildren += $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a">calculateValuesInEntries</a>($child, $initD, $endD);</div>
<div class="line"><span class="lineno"> 1167</span>            }</div>
<div class="line"><span class="lineno"> 1168</span>        }</div>
<div class="line"><span class="lineno"> 1169</span>        <span class="keywordflow">return</span> (($debit - $assets) + $balanceChildren);</div>
<div class="line"><span class="lineno"> 1170</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a4412028831ce993246eb29b08f2ebb03"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\getConvertions</a></div><div class="ttdeci">getConvertions()</div><div class="ttdoc">Obtiene las conversiones de cuentas.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00082">AccountingStateOfResultsController.php:82</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a678f5c49204c69d24b2b293794996ecd"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a678f5c49204c69d24b2b293794996ecd">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\setConvertions</a></div><div class="ttdeci">setConvertions($convertions)</div><div class="ttdoc">Establece las conversiones de cuentas.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00094">AccountingStateOfResultsController.php:94</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a6f3d70e44a5afea25eb600c5e19f6a29"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\calculateOperation</a></div><div class="ttdeci">calculateOperation($convertions, $currency_id, $value, $date, $equalCurrency)</div><div class="ttdoc">Realiza la conversion de saldo.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01186">AccountingStateOfResultsController.php:1186</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\getCurrencyId</a></div><div class="ttdeci">getCurrencyId()</div><div class="ttdoc">Obtiene el identificador de la moneda.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00104">AccountingStateOfResultsController.php:104</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_aaf408629462a34c9e16a85f68f74ee0a"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\calculateValuesInEntries</a></div><div class="ttdeci">calculateValuesInEntries($account, $initD, $endD)</div><div class="ttdoc">Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de...</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController.php:1093</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_ab0ddffde595d12d9c85da6f4c1eb2605"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\calculateExchangeRates</a></div><div class="ttdeci">calculateExchangeRates($convertions, $entry, $currency_id)</div><div class="ttdoc">Encuentra los tipos de cambio.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01217">AccountingStateOfResultsController.php:1217</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01217">AccountingStateOfResultsController\calculateExchangeRates()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01186">AccountingStateOfResultsController\calculateOperation()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00082">AccountingStateOfResultsController\getConvertions()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00104">AccountingStateOfResultsController\getCurrencyId()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00094">AccountingStateOfResultsController\setConvertions()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01039">AccountingStateOfResultsController\formatDataInArray()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_cgraph">
<area shape="rect" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="5,104,187,129"/>
<area shape="poly" title=" " alt="" coords="59,106,51,96,55,86,70,80,96,77,128,81,141,91,137,95,126,86,96,83,71,85,58,90,56,95,63,102"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="235,5,416,31"/>
<area shape="poly" title=" " alt="" coords="116,102,168,71,234,40,255,32,257,37,236,44,170,76,118,106"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29" title="Realiza la conversion de saldo." alt="" coords="253,55,398,80"/>
<area shape="poly" title=" " alt="" coords="155,101,251,80,253,86,156,107"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03" title="Obtiene las conversiones de cuentas." alt="" coords="265,104,386,129"/>
<area shape="poly" title=" " alt="" coords="187,114,251,114,251,119,187,119"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4" title="Obtiene el identificador de la moneda." alt="" coords="269,153,382,179"/>
<area shape="poly" title=" " alt="" coords="156,127,256,148,255,154,155,132"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a678f5c49204c69d24b2b293794996ecd" title="Establece las conversiones de cuentas." alt="" coords="265,203,385,228"/>
<area shape="poly" title=" " alt="" coords="119,127,171,157,236,188,260,196,258,201,234,192,169,162,117,132"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aaf408629462a34c9e16a85f68f74ee0a_icgraph">
<area shape="rect" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,29,497,55"/>
<area shape="poly" title=" " alt="" coords="444,20,434,11,407,8,384,10,372,15,370,20,376,28,372,31,365,21,369,11,383,5,407,3,436,6,448,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="302,45,268,45,268,39,302,39"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="a23d7453ab9e51eca5ab50a38ce4a84c0" name="a23d7453ab9e51eca5ab50a38ce4a84c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d7453ab9e51eca5ab50a38ce4a84c0">&#9670;&#160;</a></span>export()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">export </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$report</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en hojade calculo de estado de resultados. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$report</td><td>id de reporte y su informacion</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00538">538</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  539</span>    {</div>
<div class="line"><span class="lineno">  540</span>        <span class="keywordflow">return</span>  $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02">pdf</a>($report, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  541</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a5c0379fc68799a3f32447bd6760dcd02"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\pdf</a></div><div class="ttdeci">pdf($report, $xml=false)</div><div class="ttdoc">Genera el reporte en pdf de estado de resultados.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">AccountingStateOfResultsController.php:552</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">AccountingStateOfResultsController\pdf()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph">
<area shape="rect" title="Genera el reporte en hojade calculo de estado de resultados." alt="" coords="5,104,69,129"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de estado de resultados." alt="" coords="117,104,160,129"/>
<area shape="poly" title=" " alt="" coords="69,114,104,114,104,119,69,119"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aece89e986c4cfa1db456acdb13987406" title="Método para buscar las cuentas padre de una formulación." alt="" coords="228,29,371,55"/>
<area shape="poly" title=" " alt="" coords="152,102,177,82,207,64,224,57,226,61,209,68,180,86,156,106"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3" title="Obtiene los datos de la moneda." alt="" coords="249,79,350,104"/>
<area shape="poly" title=" " alt="" coords="160,111,235,99,235,104,160,116"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a0db19fdd230ae36f5cadc50c61a451b0" title="Realiza el calculo de las cuentas de acuerdo a como suman." alt="" coords="208,128,391,153"/>
<area shape="poly" title=" " alt="" coords="160,117,202,123,201,129,160,122"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece los datos de la moneda." alt="" coords="249,177,349,203"/>
<area shape="poly" title=" " alt="" coords="157,128,181,146,209,162,237,173,235,178,207,167,178,150,154,132"/>
<area shape="poly" title=" " alt="" coords="272,31,267,21,270,11,281,5,299,3,321,6,331,15,327,19,319,11,299,8,283,10,274,15,272,20,277,28"/>
</map>
</div>

</div>
</div>
<a id="aa825cb7aedbc4c92b3fcc708263200bc" name="aa825cb7aedbc4c92b3fcc708263200bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa825cb7aedbc4c92b3fcc708263200bc">&#9670;&#160;</a></span>formatDataInArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">formatDataInArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$initD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$endD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sintetiza la información de una cuenta en un array con sus respectivas subcuentas. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">AccountingAccount&#160;|&#160;array</td><td class="paramname">$records</td><td>registro de una cuenta o subcuenta patrimonial </td></tr>
    <tr><td class="paramtype">Date&#160;|&#160;string</td><td class="paramname">$initD</td><td>Fecha inicial </td></tr>
    <tr><td class="paramtype">Date&#160;|&#160;string</td><td class="paramname">$endD</td><td>Fecha final </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$level</td><td>contador que indica el nivel de profundidad de la recursividad para obtener subcuentas de una cuenta</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>array </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01039">1039</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1040</span>    {</div>
<div class="line"><span class="lineno"> 1041</span>        <span class="comment">/* información pertinente de la consultar */</span></div>
<div class="line"><span class="lineno"> 1042</span>        $parent = [];</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>        <span class="comment">/* posición de la cuenta base */</span></div>
<div class="line"><span class="lineno"> 1045</span>        $pos = 0;</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>        <span class="comment">/* condición de parada del ultimo nivel */</span></div>
<div class="line"><span class="lineno"> 1048</span>        <span class="keywordflow">if</span> ($level &gt; 6) {</div>
<div class="line"><span class="lineno"> 1049</span>            <span class="keywordflow">return</span> [];</div>
<div class="line"><span class="lineno"> 1050</span>        }</div>
<div class="line"><span class="lineno"> 1051</span> </div>
<div class="line"><span class="lineno"> 1052</span>        $lastOfThePreviousMonth = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[1], 1, explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[0]) - 1));</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>        <span class="keywordflow">if</span> (count($records) &gt; 0) {</div>
<div class="line"><span class="lineno"> 1055</span>            <span class="keywordflow">foreach</span> ($records as $account) {</div>
<div class="line"><span class="lineno"> 1056</span>                array_push($parent, [</div>
<div class="line"><span class="lineno"> 1057</span>                    <span class="comment">// mes seleccionado</span></div>
<div class="line"><span class="lineno"> 1058</span>                    <span class="stringliteral">&#39;code&#39;</span> =&gt; $account-&gt;getCodeAttribute(),</div>
<div class="line"><span class="lineno"> 1059</span>                    <span class="stringliteral">&#39;denomination&#39;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno"> 1060</span>                    <span class="stringliteral">&#39;balance&#39;</span> =&gt; $this-&gt;calculateValuesInEntries(</div>
<div class="line"><span class="lineno"> 1061</span>                        $account,</div>
<div class="line"><span class="lineno"> 1062</span>                        explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[0] . <span class="charliteral">&#39;-&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[1] . <span class="stringliteral">&#39;-01&#39;</span>,</div>
<div class="line"><span class="lineno"> 1063</span>                        $endD</div>
<div class="line"><span class="lineno"> 1064</span>                    ),</div>
<div class="line"><span class="lineno"> 1065</span>                    <span class="comment">// acumulado de los meses anteriores</span></div>
<div class="line"><span class="lineno"> 1066</span>                    <span class="stringliteral">&#39;beginningBalance&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a">calculateValuesInEntries</a>(</div>
<div class="line"><span class="lineno"> 1067</span>                        $account,</div>
<div class="line"><span class="lineno"> 1068</span>                        explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>,</div>
<div class="line"><span class="lineno"> 1069</span>                        explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[0] . <span class="charliteral">&#39;-&#39;</span> . (explode(<span class="charliteral">&#39;-&#39;</span>, $endD)[1] - 1) . <span class="charliteral">&#39;-&#39;</span> . $lastOfThePreviousMonth</div>
<div class="line"><span class="lineno"> 1070</span>                    ),</div>
<div class="line"><span class="lineno"> 1071</span>                    <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno"> 1072</span>                    <span class="stringliteral">&#39;children&#39;</span> =&gt; [],</div>
<div class="line"><span class="lineno"> 1073</span>                ]);</div>
<div class="line"><span class="lineno"> 1074</span>                $parent[$pos][<span class="stringliteral">&#39;children&#39;</span>] = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc">formatDataInArray</a>($account-&gt;children, $initD, $endD, $level + 1);</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>                $pos++;</div>
<div class="line"><span class="lineno"> 1077</span>            }</div>
<div class="line"><span class="lineno"> 1078</span>            <span class="keywordflow">return</span> $parent;</div>
<div class="line"><span class="lineno"> 1079</span>        }</div>
<div class="line"><span class="lineno"> 1080</span>        <span class="keywordflow">return</span> [];</div>
<div class="line"><span class="lineno"> 1081</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_aa825cb7aedbc4c92b3fcc708263200bc"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\formatDataInArray</a></div><div class="ttdeci">formatDataInArray($records, $initD, $endD, $level=1)</div><div class="ttdoc">Sintetiza la información de una cuenta en un array con sus respectivas subcuentas.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01039">AccountingStateOfResultsController.php:1039</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01039">AccountingStateOfResultsController\formatDataInArray()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01039">AccountingStateOfResultsController\formatDataInArray()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00888">AccountingStateOfResultsController\pdfSign()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph">
<area shape="rect" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="5,104,149,129"/>
<area shape="poly" title=" " alt="" coords="43,106,35,96,39,86,54,80,77,77,107,81,118,90,115,94,105,86,77,83,55,85,43,89,41,95,47,102"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="197,104,379,129"/>
<area shape="poly" title=" " alt="" coords="150,114,184,114,184,119,150,119"/>
<area shape="poly" title=" " alt="" coords="253,106,246,96,250,86,264,80,288,77,317,81,329,90,326,94,315,86,288,83,266,85,254,89,251,95,258,102"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="427,5,608,31"/>
<area shape="poly" title=" " alt="" coords="308,102,360,71,426,40,447,32,449,37,428,44,362,76,310,106"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29" title="Realiza la conversion de saldo." alt="" coords="445,55,590,80"/>
<area shape="poly" title=" " alt="" coords="347,101,443,80,445,86,348,107"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03" title="Obtiene las conversiones de cuentas." alt="" coords="457,104,578,129"/>
<area shape="poly" title=" " alt="" coords="379,114,443,114,443,119,379,119"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4" title="Obtiene el identificador de la moneda." alt="" coords="461,153,574,179"/>
<area shape="poly" title=" " alt="" coords="348,127,448,148,447,154,347,132"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a678f5c49204c69d24b2b293794996ecd" title="Establece las conversiones de cuentas." alt="" coords="457,203,577,228"/>
<area shape="poly" title=" " alt="" coords="311,127,363,157,428,188,452,196,450,201,426,192,361,162,309,132"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph">
<area shape="rect" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="aece89e986c4cfa1db456acdb13987406" name="aece89e986c4cfa1db456acdb13987406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece89e986c4cfa1db456acdb13987406">&#9670;&#160;</a></span>getAccountParents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getAccountParents </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$childData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$parents</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método para buscar las cuentas padre de una formulación. </p>
<dl class="section author"><dt>Autor</dt><dd>Daniel Contreras <a href="#" onclick="location.href='mai'+'lto:'+'dco'+'nt'+'rer'+'as'+'@ce'+'nd'+'ite'+'l.'+'gob'+'.v'+'e'; return false;">dcont<span class="obfuscator">.nosp@m.</span>rera<span class="obfuscator">.nosp@m.</span>s@cen<span class="obfuscator">.nosp@m.</span>dite<span class="obfuscator">.nosp@m.</span>l.gob<span class="obfuscator">.nosp@m.</span>.ve</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>array con las cuentas padre de la formulación </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01300">1300</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1301</span>    {</div>
<div class="line"><span class="lineno"> 1302</span>        $child = AccountingAccount::find($childData[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><span class="lineno"> 1303</span>        $child[<span class="stringliteral">&#39;balance&#39;</span>] = $childData[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1304</span>        $child[<span class="stringliteral">&#39;beginningBalance&#39;</span>] = $childData[<span class="stringliteral">&#39;beginningBalance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1305</span>        $child[<span class="stringliteral">&#39;level&#39;</span>] = $childData[<span class="stringliteral">&#39;level&#39;</span>] - 1;</div>
<div class="line"><span class="lineno"> 1306</span> </div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keywordflow">if</span> (!isset($child)) {</div>
<div class="line"><span class="lineno"> 1308</span>            <span class="keywordflow">return</span> $parents;</div>
<div class="line"><span class="lineno"> 1309</span>        }</div>
<div class="line"><span class="lineno"> 1310</span> </div>
<div class="line"><span class="lineno"> 1311</span>        <span class="keywordflow">if</span> (!array_key_exists($child-&gt;id, $parents)) {</div>
<div class="line"><span class="lineno"> 1312</span>            $parents[$child-&gt;id] = $child;</div>
<div class="line"><span class="lineno"> 1313</span>        }</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span>        <span class="keywordflow">if</span> ($child-&gt;parent_id == <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno"> 1316</span>            <span class="keywordflow">return</span> $parents;</div>
<div class="line"><span class="lineno"> 1317</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1318</span>            $child-&gt;load(<span class="stringliteral">&#39;parent&#39;</span>);</div>
<div class="line"><span class="lineno"> 1319</span>            $parent = $child-&gt;parent;</div>
<div class="line"><span class="lineno"> 1320</span>            $parent[<span class="stringliteral">&#39;balance&#39;</span>] += $child[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1321</span>            $parent[<span class="stringliteral">&#39;beginningBalance&#39;</span>] += $child[<span class="stringliteral">&#39;beginningBalance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1322</span>            $parent[<span class="stringliteral">&#39;level&#39;</span>] = $child[<span class="stringliteral">&#39;level&#39;</span>];</div>
<div class="line"><span class="lineno"> 1323</span>            <span class="keywordflow">return</span> $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aece89e986c4cfa1db456acdb13987406">getAccountParents</a>($parent, $parents);</div>
<div class="line"><span class="lineno"> 1324</span>        }</div>
<div class="line"><span class="lineno"> 1325</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_aece89e986c4cfa1db456acdb13987406"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aece89e986c4cfa1db456acdb13987406">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\getAccountParents</a></div><div class="ttdeci">getAccountParents($childData, $parents=[])</div><div class="ttdoc">Método para buscar las cuentas padre de una formulación.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01300">AccountingStateOfResultsController.php:1300</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01300">AccountingStateOfResultsController\getAccountParents()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01300">AccountingStateOfResultsController\getAccountParents()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">AccountingStateOfResultsController\pdf()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_cgraph">
<area shape="rect" title="Método para buscar las cuentas padre de una formulación." alt="" coords="5,29,148,55"/>
<area shape="poly" title=" " alt="" coords="53,30,48,21,50,11,60,5,77,3,96,6,105,15,101,18,94,11,77,8,62,10,55,15,53,20,57,28"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aece89e986c4cfa1db456acdb13987406_icgraph">
<area shape="rect" title="Método para buscar las cuentas padre de una formulación." alt="" coords="208,29,351,55"/>
<area shape="poly" title=" " alt="" coords="303,18,296,11,279,8,265,10,258,15,256,20,260,28,256,30,251,21,253,11,263,5,279,3,299,6,307,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de estado de resultados." alt="" coords="117,29,160,55"/>
<area shape="poly" title=" " alt="" coords="194,45,161,45,161,39,194,39"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de estado de resultados." alt="" coords="5,29,69,55"/>
<area shape="poly" title=" " alt="" coords="103,45,70,45,70,39,103,39"/>
</map>
</div>

</div>
</div>
<a id="a6c710b0ad0cd4c8f24081c8425443be9" name="a6c710b0ad0cd4c8f24081c8425443be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c710b0ad0cd4c8f24081c8425443be9">&#9670;&#160;</a></span>getCheckBreak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getCheckBreak </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Devolver PageBreakTrigger. </p>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01247">1247</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1248</span>    {</div>
<div class="line"><span class="lineno"> 1249</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a311b3d7033e348395d71484904c44767">$this-&gt;PageBreakTrigger</a>;</div>
<div class="line"><span class="lineno"> 1250</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a311b3d7033e348395d71484904c44767"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a311b3d7033e348395d71484904c44767">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\$PageBreakTrigger</a></div><div class="ttdeci">$PageBreakTrigger</div><div class="ttdoc">Salto de página.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00041">AccountingStateOfResultsController.php:41</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00041">AccountingStateOfResultsController\$PageBreakTrigger</a>.</p>

</div>
</div>
<a id="a4412028831ce993246eb29b08f2ebb03" name="a4412028831ce993246eb29b08f2ebb03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4412028831ce993246eb29b08f2ebb03">&#9670;&#160;</a></span>getConvertions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getConvertions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene las conversiones de cuentas. </p>
<dl class="section return"><dt>Devuelve</dt><dd>array </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00082">82</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   83</span>    {</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$this-&gt;convertions</a>;</div>
<div class="line"><span class="lineno">   85</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4412028831ce993246eb29b08f2ebb03_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4412028831ce993246eb29b08f2ebb03_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4412028831ce993246eb29b08f2ebb03_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4412028831ce993246eb29b08f2ebb03_icgraph">
<area shape="rect" title="Obtiene las conversiones de cuentas." alt="" coords="545,29,667,55"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,29,497,55"/>
<area shape="poly" title=" " alt="" coords="532,45,497,45,497,39,532,39"/>
<area shape="poly" title=" " alt="" coords="442,19,432,11,407,8,386,10,375,15,372,20,378,28,374,31,367,21,371,11,384,5,407,3,434,6,445,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="302,45,268,45,268,39,302,39"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="a55459f9e07fdc6b85953811024ab61d3" name="a55459f9e07fdc6b85953811024ab61d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55459f9e07fdc6b85953811024ab61d3">&#9670;&#160;</a></span>getCurrency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getCurrency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene los datos de la moneda. </p>
<dl class="section return"><dt>Devuelve</dt><dd>Currency </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00114">114</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  115</span>    {</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$this-&gt;currency</a>;</div>
<div class="line"><span class="lineno">  117</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a6ec628a1048bd2ab581320d0aa1aed30"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\$currency</a></div><div class="ttdeci">$currency</div><div class="ttdoc">Moneda en la que se expresara el reporte.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00055">AccountingStateOfResultsController.php:55</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00055">AccountingStateOfResultsController\$currency</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">AccountingStateOfResultsController\pdf()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00888">AccountingStateOfResultsController\pdfSign()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a55459f9e07fdc6b85953811024ab61d3_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a55459f9e07fdc6b85953811024ab61d3_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a55459f9e07fdc6b85953811024ab61d3_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a55459f9e07fdc6b85953811024ab61d3_icgraph">
<area shape="rect" title="Obtiene los datos de la moneda." alt="" coords="236,31,337,56"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de estado de resultados." alt="" coords="131,5,174,31"/>
<area shape="poly" title=" " alt="" coords="222,34,174,25,175,19,223,29"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="117,55,188,80"/>
<area shape="poly" title=" " alt="" coords="223,57,189,64,188,58,222,52"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de estado de resultados." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="118,21,70,21,70,15,118,15"/>
</map>
</div>

</div>
</div>
<a id="aa4c79afa7ea1ba7a95b832f2b6ab8ec4" name="aa4c79afa7ea1ba7a95b832f2b6ab8ec4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">&#9670;&#160;</a></span>getCurrencyId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getCurrencyId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene el identificador de la moneda. </p>
<dl class="section return"><dt>Devuelve</dt><dd>integer|string </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00104">104</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>    {</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">return</span> $this-&gt;currency-&gt;id;</div>
<div class="line"><span class="lineno">  107</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph">
<area shape="rect" title="Obtiene el identificador de la moneda." alt="" coords="545,29,659,55"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,29,497,55"/>
<area shape="poly" title=" " alt="" coords="531,45,497,45,497,39,531,39"/>
<area shape="poly" title=" " alt="" coords="441,19,431,11,407,8,386,10,375,15,373,20,379,28,375,31,368,21,371,11,385,5,407,3,433,6,445,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="302,45,268,45,268,39,302,39"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="a0db19fdd230ae36f5cadc50c61a451b0" name="a0db19fdd230ae36f5cadc50c61a451b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db19fdd230ae36f5cadc50c61a451b0">&#9670;&#160;</a></span>getRealBalaceCalculator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getRealBalaceCalculator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ini</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$debit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el calculo de las cuentas de acuerdo a como suman. </p>
<dl class="section author"><dt>Autor</dt><dd>fjescala <a href="#" onclick="location.href='mai'+'lto:'+'fje'+'sc'+'ala'+'@g'+'mai'+'l.'+'com'; return false;">fjesc<span class="obfuscator">.nosp@m.</span>ala@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$convertions</td><td>lista de tipos cambios para la moneda </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$ini</td><td>identificador del tipo de cuenta </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$debit</td><td>valor de la cuenta debe </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$assets</td><td>Valor de la cuenta en el haber</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01265">1265</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1266</span>    {</div>
<div class="line"><span class="lineno"> 1267</span>        $balance = 0;</div>
<div class="line"><span class="lineno"> 1268</span>        <span class="keywordflow">switch</span> ($ini) {</div>
<div class="line"><span class="lineno"> 1269</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno"> 1270</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno"> 1271</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1272</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno"> 1273</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno"> 1274</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1275</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno"> 1276</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno"> 1277</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1278</span>            <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno"> 1279</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno"> 1280</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1281</span>            <span class="keywordflow">case</span> 5:</div>
<div class="line"><span class="lineno"> 1282</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno"> 1283</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1284</span>            <span class="keywordflow">case</span> 6:</div>
<div class="line"><span class="lineno"> 1285</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno"> 1286</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1287</span>        }</div>
<div class="line"><span class="lineno"> 1288</span> </div>
<div class="line"><span class="lineno"> 1289</span>        <span class="keywordflow">return</span> $balance;</div>
<div class="line"><span class="lineno"> 1290</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">AccountingStateOfResultsController\pdf()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph">
<area shape="rect" title="Realiza el calculo de las cuentas de acuerdo a como suman." alt="" coords="208,5,391,31"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de estado de resultados." alt="" coords="117,5,160,31"/>
<area shape="poly" title=" " alt="" coords="194,21,160,21,160,15,194,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de estado de resultados." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="103,21,70,21,70,15,103,15"/>
</map>
</div>

</div>
</div>
<a id="a5c0379fc68799a3f32447bd6760dcd02" name="a5c0379fc68799a3f32447bd6760dcd02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0379fc68799a3f32447bd6760dcd02">&#9670;&#160;</a></span>pdf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdf </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$report</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$xml</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de estado de resultados. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$report</td><td>id de reporte y su información</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">552</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  553</span>    {</div>
<div class="line"><span class="lineno">  554</span>        $report = AccountingReportHistory::with(<span class="stringliteral">&#39;currency&#39;</span>)-&gt;find($report);</div>
<div class="line"><span class="lineno">  555</span>        <span class="comment">// Validar acceso para el registro</span></div>
<div class="line"><span class="lineno">  556</span>        <span class="keywordflow">if</span> (!auth()-&gt;user()-&gt;isAdmin()) {</div>
<div class="line"><span class="lineno">  557</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  558</span>            <span class="keywordflow">if</span> ($report &amp;&amp; $report-&gt;queryAccess($user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>])) {</div>
<div class="line"><span class="lineno">  559</span>                <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;errors.403&#39;</span>);</div>
<div class="line"><span class="lineno">  560</span>            }</div>
<div class="line"><span class="lineno">  561</span>        }</div>
<div class="line"><span class="lineno">  562</span>        $endDate = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[1];</div>
<div class="line"><span class="lineno">  563</span>        $level = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[2];</div>
<div class="line"><span class="lineno">  564</span>        $zero = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[3] == <span class="stringliteral">&#39;true&#39;</span> ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  565</span>        $date = count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1 ?</div>
<div class="line"><span class="lineno">  566</span>            explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0] . <span class="charliteral">&#39;-&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[1] :</div>
<div class="line"><span class="lineno">  567</span>            explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0];</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>        $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a>($report-&gt;currency);</div>
<div class="line"><span class="lineno">  570</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  571</span> </div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  573</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  574</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  575</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  576</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  577</span>        }</div>
<div class="line"><span class="lineno">  578</span>        $institution_id = $institution-&gt;id;</div>
<div class="line"><span class="lineno">  579</span>        $arr = [];</div>
<div class="line"><span class="lineno">  580</span>        $formDate = $date . <span class="stringliteral">&#39;-01&#39;</span>;</div>
<div class="line"><span class="lineno">  581</span>        <span class="keywordflow">if</span> (count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1) {</div>
<div class="line"><span class="lineno">  582</span>                $query = AccountingAccount::with([</div>
<div class="line"><span class="lineno">  583</span>                <span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($formDate, $endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  584</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  585</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  586</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  587</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>)</div>
<div class="line"><span class="lineno">  588</span>                        ) {</div>
<div class="line"><span class="lineno">  589</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  590</span>                                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>);</div>
<div class="line"><span class="lineno">  591</span>                        }</div>
<div class="line"><span class="lineno">  592</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  593</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  594</span>                            <span class="keywordflow">if</span> ($query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno">  595</span>                                $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)-&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>);</div>
<div class="line"><span class="lineno">  596</span>                            }</div>
<div class="line"><span class="lineno">  597</span>                        }</div>
<div class="line"><span class="lineno">  598</span>                    }</div>
<div class="line"><span class="lineno">  599</span>                }</div>
<div class="line"><span class="lineno">  600</span>                ]);</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>            $beginnBalances = AccountingAccount::with([</div>
<div class="line"><span class="lineno">  603</span>                <span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($formDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  604</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  605</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  606</span>                            $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, $formDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  607</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>)</div>
<div class="line"><span class="lineno">  608</span>                        ) {</div>
<div class="line"><span class="lineno">  609</span>                            $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;&#39;</span>, $formDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  610</span>                                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>);</div>
<div class="line"><span class="lineno">  611</span>                        }</div>
<div class="line"><span class="lineno">  612</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  613</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  614</span>                            <span class="keywordflow">if</span> ($query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, $formDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno">  615</span>                                $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;&#39;</span>, $formDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)-&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>);</div>
<div class="line"><span class="lineno">  616</span>                            }</div>
<div class="line"><span class="lineno">  617</span>                        }</div>
<div class="line"><span class="lineno">  618</span>                    }</div>
<div class="line"><span class="lineno">  619</span>                }</div>
<div class="line"><span class="lineno">  620</span>            ])-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [5,6])</div>
<div class="line"><span class="lineno">  621</span>                -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  622</span>                -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  623</span>                -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  624</span>                -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  625</span>                -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  626</span>                -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  627</span>                -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  628</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  629</span>                $query = AccountingAccount::with([</div>
<div class="line"><span class="lineno">  630</span>                <span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($date, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  631</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  632</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  633</span>                            $query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  634</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>)</div>
<div class="line"><span class="lineno">  635</span>                        ) {</div>
<div class="line"><span class="lineno">  636</span>                            $query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  637</span>                                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>);</div>
<div class="line"><span class="lineno">  638</span>                        }</div>
<div class="line"><span class="lineno">  639</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  640</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  641</span>                            <span class="keywordflow">if</span> ($query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno">  642</span>                                $query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)-&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)-&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>);</div>
<div class="line"><span class="lineno">  643</span>                            }</div>
<div class="line"><span class="lineno">  644</span>                        }</div>
<div class="line"><span class="lineno">  645</span>                    }</div>
<div class="line"><span class="lineno">  646</span>                }</div>
<div class="line"><span class="lineno">  647</span>                ]);</div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>            $beginnBalances = [];</div>
<div class="line"><span class="lineno">  650</span>        }</div>
<div class="line"><span class="lineno">  651</span>        $query = $query-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [5,6])</div>
<div class="line"><span class="lineno">  652</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  653</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  654</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  655</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  656</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  657</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  658</span>            -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>        <span class="keywordflow">foreach</span> ($query as $account) {</div>
<div class="line"><span class="lineno">  661</span>            <span class="keywordflow">if</span> (!$account-&gt;entryAccount-&gt;isEmpty()) {</div>
<div class="line"><span class="lineno">  662</span>                <span class="keywordflow">foreach</span> ($account-&gt;entryAccount as $entrie) {</div>
<div class="line"><span class="lineno">  663</span>                    <span class="keywordflow">if</span> (!is_null($entrie-&gt;entries)) {</div>
<div class="line"><span class="lineno">  664</span>                        $balance = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a>(</div>
<div class="line"><span class="lineno">  665</span>                            $account-&gt;code[0],</div>
<div class="line"><span class="lineno">  666</span>                            $entrie-&gt;debit,</div>
<div class="line"><span class="lineno">  667</span>                            $entrie-&gt;assets</div>
<div class="line"><span class="lineno">  668</span>                        );</div>
<div class="line"><span class="lineno">  669</span>                        <span class="keywordflow">if</span> (!array_key_exists($account-&gt;code, $arr)) {</div>
<div class="line"><span class="lineno">  670</span>                            $data = [</div>
<div class="line"><span class="lineno">  671</span>                                <span class="stringliteral">&quot;id&quot;</span> =&gt; $account-&gt;id,</div>
<div class="line"><span class="lineno">  672</span>                                <span class="stringliteral">&quot;code&quot;</span> =&gt; $account-&gt;code,</div>
<div class="line"><span class="lineno">  673</span>                                <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno">  674</span>                                <span class="stringliteral">&quot;balance&quot;</span> =&gt; $balance,</div>
<div class="line"><span class="lineno">  675</span>                                <span class="stringliteral">&quot;beginningBalance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  676</span>                                <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno">  677</span>                                <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  678</span>                            ];</div>
<div class="line"><span class="lineno">  679</span>                            $arr[$account-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  680</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  681</span>                            $arr[$account-&gt;code][<span class="stringliteral">&#39;balance&#39;</span>] += $balance;</div>
<div class="line"><span class="lineno">  682</span>                        }</div>
<div class="line"><span class="lineno">  683</span>                    }</div>
<div class="line"><span class="lineno">  684</span>                }</div>
<div class="line"><span class="lineno">  685</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  686</span>                $data = [</div>
<div class="line"><span class="lineno">  687</span>                    <span class="stringliteral">&quot;id&quot;</span> =&gt; $account-&gt;id,</div>
<div class="line"><span class="lineno">  688</span>                    <span class="stringliteral">&quot;code&quot;</span> =&gt; $account-&gt;code,</div>
<div class="line"><span class="lineno">  689</span>                    <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno">  690</span>                    <span class="stringliteral">&quot;balance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  691</span>                    <span class="stringliteral">&quot;beginningBalance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  692</span>                    <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno">  693</span>                    <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  694</span>                ];</div>
<div class="line"><span class="lineno">  695</span>                $arr[$account-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  696</span>            }</div>
<div class="line"><span class="lineno">  697</span>        }</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>        <span class="keywordflow">foreach</span> ($beginnBalances as $account) {</div>
<div class="line"><span class="lineno">  700</span>            $balance = 0;</div>
<div class="line"><span class="lineno">  701</span>            <span class="keywordflow">if</span> (!$account-&gt;entryAccount-&gt;isEmpty()) {</div>
<div class="line"><span class="lineno">  702</span>                <span class="keywordflow">foreach</span> ($account-&gt;entryAccount as $entrie) {</div>
<div class="line"><span class="lineno">  703</span>                    <span class="keywordflow">if</span> (!is_null($entrie-&gt;entries)) {</div>
<div class="line"><span class="lineno">  704</span>                        $balance = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a>(</div>
<div class="line"><span class="lineno">  705</span>                            $account-&gt;code[0],</div>
<div class="line"><span class="lineno">  706</span>                            $entrie-&gt;debit,</div>
<div class="line"><span class="lineno">  707</span>                            $entrie-&gt;assets</div>
<div class="line"><span class="lineno">  708</span>                        );</div>
<div class="line"><span class="lineno">  709</span>                        <span class="keywordflow">if</span> (!array_key_exists($account-&gt;code, $arr)) {</div>
<div class="line"><span class="lineno">  710</span>                            $data = [</div>
<div class="line"><span class="lineno">  711</span>                                <span class="stringliteral">&quot;id&quot;</span> =&gt; $account-&gt;id,</div>
<div class="line"><span class="lineno">  712</span>                                <span class="stringliteral">&quot;code&quot;</span> =&gt; $account-&gt;code,</div>
<div class="line"><span class="lineno">  713</span>                                <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno">  714</span>                                <span class="stringliteral">&quot;balance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  715</span>                                <span class="stringliteral">&quot;beginningBalance&quot;</span> =&gt; $balance,</div>
<div class="line"><span class="lineno">  716</span>                                <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno">  717</span>                                <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  718</span>                            ];</div>
<div class="line"><span class="lineno">  719</span>                            $arr[$account-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  720</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  721</span>                            $arr[$account-&gt;code][<span class="stringliteral">&#39;beginningBalance&#39;</span>] += $balance;</div>
<div class="line"><span class="lineno">  722</span>                        }</div>
<div class="line"><span class="lineno">  723</span>                    }</div>
<div class="line"><span class="lineno">  724</span>                }</div>
<div class="line"><span class="lineno">  725</span>            }</div>
<div class="line"><span class="lineno">  726</span>        }</div>
<div class="line"><span class="lineno">  727</span> </div>
<div class="line"><span class="lineno">  728</span>        $parentsArray = [];</div>
<div class="line"><span class="lineno">  729</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  730</span>            $b = explode(<span class="charliteral">&#39;.&#39;</span>, $a[<span class="stringliteral">&quot;code&quot;</span>]);</div>
<div class="line"><span class="lineno">  731</span>            <span class="keywordflow">if</span> ($b[6] == 000) {</div>
<div class="line"><span class="lineno">  732</span>                unset($arr[$key]);</div>
<div class="line"><span class="lineno">  733</span>            }</div>
<div class="line"><span class="lineno">  734</span>        }</div>
<div class="line"><span class="lineno">  735</span>        <span class="keywordflow">foreach</span> ($arr as $finalAccount) {</div>
<div class="line"><span class="lineno">  736</span>            $parents = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aece89e986c4cfa1db456acdb13987406">getAccountParents</a>($finalAccount, []);</div>
<div class="line"><span class="lineno">  737</span>            array_push($parentsArray, $parents);</div>
<div class="line"><span class="lineno">  738</span>        }</div>
<div class="line"><span class="lineno">  739</span>        $arr = [];</div>
<div class="line"><span class="lineno">  740</span>        <span class="comment">// este es un array de cuentas con sus padres mas proximos</span></div>
<div class="line"><span class="lineno">  741</span>        <span class="comment">// este foreach agrega la cuenta 6.0.00.0 a $arr</span></div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordflow">foreach</span> ($parentsArray as $pArray) {</div>
<div class="line"><span class="lineno">  743</span>            <span class="keywordflow">foreach</span> ($pArray as $pA) {</div>
<div class="line"><span class="lineno">  744</span>                <span class="keywordflow">if</span> (!array_key_exists($pA-&gt;code, $arr)) {</div>
<div class="line"><span class="lineno">  745</span>                    $data = [</div>
<div class="line"><span class="lineno">  746</span>                        <span class="stringliteral">&quot;id&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno">  747</span>                        <span class="stringliteral">&quot;code&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;code&#39;</span>],</div>
<div class="line"><span class="lineno">  748</span>                        <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;denomination&#39;</span>],</div>
<div class="line"><span class="lineno">  749</span>                        <span class="stringliteral">&quot;balance&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;balance&#39;</span>],</div>
<div class="line"><span class="lineno">  750</span>                        <span class="stringliteral">&quot;beginningBalance&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;beginningBalance&#39;</span>],</div>
<div class="line"><span class="lineno">  751</span>                        <span class="stringliteral">&quot;level&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;level&#39;</span>],</div>
<div class="line"><span class="lineno">  752</span>                        <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  753</span>                    ];</div>
<div class="line"><span class="lineno">  754</span>                    $arr[$pA-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  755</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  756</span>                    $childrenCode = explode(<span class="charliteral">&#39;.&#39;</span>, $pA[<span class="stringliteral">&#39;code&#39;</span>]);</div>
<div class="line"><span class="lineno">  757</span>                    <span class="keywordflow">if</span> ($childrenCode[6] == <span class="stringliteral">&#39;000&#39;</span> &amp;&amp; $arr[$pA-&gt;code][<span class="stringliteral">&#39;code&#39;</span>] != <span class="stringliteral">&#39;3.1.5.02.00.00.000&#39;</span>) {</div>
<div class="line"><span class="lineno">  758</span>                        $arr[$pA-&gt;code][<span class="stringliteral">&#39;balance&#39;</span>] += $pA[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno">  759</span>                        $arr[$pA-&gt;code][<span class="stringliteral">&#39;beginningBalance&#39;</span>] += $pA[<span class="stringliteral">&#39;beginningBalance&#39;</span>];</div>
<div class="line"><span class="lineno">  760</span>                    }</div>
<div class="line"><span class="lineno">  761</span>                }</div>
<div class="line"><span class="lineno">  762</span>            }</div>
<div class="line"><span class="lineno">  763</span>        }</div>
<div class="line"><span class="lineno">  764</span>        <span class="keywordflow">if</span> ($zero) {</div>
<div class="line"><span class="lineno">  765</span>            $zeroAccount = AccountingAccount::whereBetween(<span class="stringliteral">&#39;group&#39;</span>, [5, 6])</div>
<div class="line"><span class="lineno">  766</span>                -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  767</span>                -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  768</span>                -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  769</span>                -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  770</span>                -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  771</span>                -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  772</span>                -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  773</span>            <span class="keywordflow">foreach</span> ($zeroAccount as $pA) {</div>
<div class="line"><span class="lineno">  774</span>                <span class="keywordflow">if</span> (!array_key_exists($pA-&gt;code, $arr)) {</div>
<div class="line"><span class="lineno">  775</span>                    $data = [</div>
<div class="line"><span class="lineno">  776</span>                        <span class="stringliteral">&quot;id&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno">  777</span>                        <span class="stringliteral">&quot;code&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;code&#39;</span>],</div>
<div class="line"><span class="lineno">  778</span>                        <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;denomination&#39;</span>],</div>
<div class="line"><span class="lineno">  779</span>                        <span class="stringliteral">&quot;balance&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;balance&#39;</span>],</div>
<div class="line"><span class="lineno">  780</span>                        <span class="stringliteral">&quot;beginningBalance&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;beginningBalance&#39;</span>],</div>
<div class="line"><span class="lineno">  781</span>                        <span class="stringliteral">&quot;level&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;level&#39;</span>],</div>
<div class="line"><span class="lineno">  782</span>                        <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  783</span>                    ];</div>
<div class="line"><span class="lineno">  784</span>                    $arr[$pA-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  785</span>                }</div>
<div class="line"><span class="lineno">  786</span>            }</div>
<div class="line"><span class="lineno">  787</span>        }</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span>        ksort($arr);</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span>        <span class="keywordflow">if</span> ($level == 1) {</div>
<div class="line"><span class="lineno">  792</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  793</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>                <span class="keywordflow">if</span> ($b[1] != 0) {</div>
<div class="line"><span class="lineno">  796</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  797</span>                }</div>
<div class="line"><span class="lineno">  798</span>            }</div>
<div class="line"><span class="lineno">  799</span>        } elseif ($level == 2) {</div>
<div class="line"><span class="lineno">  800</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  801</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  802</span> </div>
<div class="line"><span class="lineno">  803</span>                <span class="keywordflow">if</span> ($b[2] != 0) {</div>
<div class="line"><span class="lineno">  804</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  805</span>                }</div>
<div class="line"><span class="lineno">  806</span>            }</div>
<div class="line"><span class="lineno">  807</span>        } elseif ($level == 3) {</div>
<div class="line"><span class="lineno">  808</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  809</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>                <span class="keywordflow">if</span> ($b[3] != 0) {</div>
<div class="line"><span class="lineno">  812</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  813</span>                }</div>
<div class="line"><span class="lineno">  814</span>            }</div>
<div class="line"><span class="lineno">  815</span>        } elseif ($level == 4) {</div>
<div class="line"><span class="lineno">  816</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  817</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>                <span class="keywordflow">if</span> ($b[4] != 0) {</div>
<div class="line"><span class="lineno">  820</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  821</span>                }</div>
<div class="line"><span class="lineno">  822</span>            }</div>
<div class="line"><span class="lineno">  823</span>        } elseif ($level == 5) {</div>
<div class="line"><span class="lineno">  824</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  825</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>                <span class="keywordflow">if</span> ($b[5] != 0) {</div>
<div class="line"><span class="lineno">  828</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  829</span>                }</div>
<div class="line"><span class="lineno">  830</span>            }</div>
<div class="line"><span class="lineno">  831</span>        }</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>        <span class="comment">/* configuración general de la apliación */</span></div>
<div class="line"><span class="lineno">  834</span>        $setting = Setting::all()-&gt;first();</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>        <span class="comment">/* base para generar el pdf */</span></div>
<div class="line"><span class="lineno">  837</span>        $pdf = <span class="keyword">new</span> ReportRepository();</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>        <span class="comment">/* Definicion de las caracteristicas generales de la página pdf */</span></div>
<div class="line"><span class="lineno">  840</span>        <span class="keywordflow">if</span> (count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1) {</div>
<div class="line"><span class="lineno">  841</span>            $lastOfThePreviousMonth = date(</div>
<div class="line"><span class="lineno">  842</span>                <span class="charliteral">&#39;d&#39;</span>,</div>
<div class="line"><span class="lineno">  843</span>                (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1], 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1)</div>
<div class="line"><span class="lineno">  844</span>            );</div>
<div class="line"><span class="lineno">  845</span>            $last = $lastOfThePreviousMonth . <span class="charliteral">&#39;/&#39;</span> . (explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] - 1) . <span class="charliteral">&#39;/&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0];</div>
<div class="line"><span class="lineno">  846</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  847</span>            $last = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><span class="lineno">  848</span>        }</div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span>        $institution = Institution::find(1);</div>
<div class="line"><span class="lineno">  851</span>        <span class="keywordflow">if</span> ($xml) {</div>
<div class="line"><span class="lineno">  852</span>            <span class="keywordflow">return</span> Excel::download(<span class="keyword">new</span> AccountingStateOfResultsExport([</div>
<div class="line"><span class="lineno">  853</span>            <span class="stringliteral">&#39;pdf&#39;</span> =&gt; $pdf,</div>
<div class="line"><span class="lineno">  854</span>            <span class="stringliteral">&#39;records&#39;</span> =&gt; $arr,</div>
<div class="line"><span class="lineno">  855</span>            <span class="stringliteral">&#39;currency&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a>(),</div>
<div class="line"><span class="lineno">  856</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno">  857</span>            <span class="stringliteral">&#39;zero&#39;</span> =&gt; $zero,</div>
<div class="line"><span class="lineno">  858</span>            <span class="stringliteral">&#39;endDate&#39;</span> =&gt; $endDate,</div>
<div class="line"><span class="lineno">  859</span>            <span class="stringliteral">&#39;monthBefore&#39;</span> =&gt; $last,</div>
<div class="line"><span class="lineno">  860</span>            <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno">  861</span>            ]), now()-&gt;format(<span class="stringliteral">&#39;d-m-Y&#39;</span>) . <span class="stringliteral">&#39;_ESTADO_DE_RENDIMIENTO_FINANCIERA.xlsx&#39;</span>);</div>
<div class="line"><span class="lineno">  862</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  863</span>            $pdf-&gt;setConfig([<span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution, <span class="stringliteral">&#39;urlVerify&#39;</span> =&gt; url(<span class="stringliteral">&#39;report/stateOfResults/&#39;</span> . $report-&gt;id)]);</div>
<div class="line"><span class="lineno">  864</span>            $pdf-&gt;setHeader(<span class="stringliteral">&#39;Reporte de Contabilidad&#39;</span>, <span class="stringliteral">&#39;Reporte de Estado de Rendimiento financiero&#39;</span>);</div>
<div class="line"><span class="lineno">  865</span>            $pdf-&gt;setFooter();</div>
<div class="line"><span class="lineno">  866</span>            $pdf-&gt;setBody(<span class="stringliteral">&#39;accounting::pdf.state_of_results&#39;</span>, <span class="keyword">true</span>, [</div>
<div class="line"><span class="lineno">  867</span>            <span class="stringliteral">&#39;pdf&#39;</span> =&gt; $pdf,</div>
<div class="line"><span class="lineno">  868</span>            <span class="stringliteral">&#39;records&#39;</span> =&gt; $arr,</div>
<div class="line"><span class="lineno">  869</span>            <span class="stringliteral">&#39;currency&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a>(),</div>
<div class="line"><span class="lineno">  870</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno">  871</span>            <span class="stringliteral">&#39;zero&#39;</span> =&gt; $zero,</div>
<div class="line"><span class="lineno">  872</span>            <span class="stringliteral">&#39;endDate&#39;</span> =&gt; $endDate,</div>
<div class="line"><span class="lineno">  873</span>            <span class="stringliteral">&#39;monthBefore&#39;</span> =&gt; $last,</div>
<div class="line"><span class="lineno">  874</span>            <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno">  875</span>            ]);</div>
<div class="line"><span class="lineno">  876</span>        }</div>
<div class="line"><span class="lineno">  877</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a0db19fdd230ae36f5cadc50c61a451b0"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a0db19fdd230ae36f5cadc50c61a451b0">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\getRealBalaceCalculator</a></div><div class="ttdeci">getRealBalaceCalculator($ini, $debit, $assets)</div><div class="ttdoc">Realiza el calculo de las cuentas de acuerdo a como suman.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01265">AccountingStateOfResultsController.php:1265</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a4a9edafe924a4efeb9d1a9daf1bc1dfe"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\setCurrency</a></div><div class="ttdeci">setCurrency($currency)</div><div class="ttdoc">Establece los datos de la moneda.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00128">AccountingStateOfResultsController.php:128</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_html_a55459f9e07fdc6b85953811024ab61d3"><div class="ttname"><a href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3">Modules\Accounting\Http\Controllers\Reports\AccountingStateOfResultsController\getCurrency</a></div><div class="ttdeci">getCurrency()</div><div class="ttdoc">Obtiene los datos de la moneda.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00114">AccountingStateOfResultsController.php:114</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01300">AccountingStateOfResultsController\getAccountParents()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00114">AccountingStateOfResultsController\getCurrency()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01265">AccountingStateOfResultsController\getRealBalaceCalculator()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00128">AccountingStateOfResultsController\setCurrency()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00538">AccountingStateOfResultsController\export()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_cgraph">
<area shape="rect" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,104,48,129"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aece89e986c4cfa1db456acdb13987406" title="Método para buscar las cuentas padre de una formulación." alt="" coords="116,29,259,55"/>
<area shape="poly" title=" " alt="" coords="40,102,65,82,95,64,112,57,114,61,97,68,68,86,44,106"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3" title="Obtiene los datos de la moneda." alt="" coords="137,79,238,104"/>
<area shape="poly" title=" " alt="" coords="48,111,123,99,123,104,48,116"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a0db19fdd230ae36f5cadc50c61a451b0" title="Realiza el calculo de las cuentas de acuerdo a como suman." alt="" coords="96,128,279,153"/>
<area shape="poly" title=" " alt="" coords="48,117,90,123,89,129,48,122"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece los datos de la moneda." alt="" coords="137,177,237,203"/>
<area shape="poly" title=" " alt="" coords="45,128,69,146,97,162,125,173,123,178,95,167,66,150,42,132"/>
<area shape="poly" title=" " alt="" coords="160,31,155,21,158,11,169,5,187,3,209,6,219,15,215,19,207,11,187,8,171,10,162,15,160,20,165,28"/>
</map>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a5c0379fc68799a3f32447bd6760dcd02_icgraph">
<area shape="rect" title="Genera el reporte en pdf de estado de resultados." alt="" coords="117,5,160,31"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de estado de resultados." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="103,21,70,21,70,15,103,15"/>
</map>
</div>

</div>
</div>
<a id="a23c281813aa2f3d73fe2c7089b2b7f03" name="a23c281813aa2f3d73fe2c7089b2b7f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c281813aa2f3d73fe2c7089b2b7f03">&#9670;&#160;</a></span>pdfSign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdfSign </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$report</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de estado de resultados. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$report</td><td>id de reporte y su informacion</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00888">888</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  889</span>    {</div>
<div class="line"><span class="lineno">  890</span>        $report = AccountingReportHistory::with(<span class="stringliteral">&#39;currency&#39;</span>)-&gt;find($report);</div>
<div class="line"><span class="lineno">  891</span>        <span class="comment">// Validar acceso para el registro</span></div>
<div class="line"><span class="lineno">  892</span>        <span class="keywordflow">if</span> (!auth()-&gt;user()-&gt;isAdmin()) {</div>
<div class="line"><span class="lineno">  893</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  894</span>            <span class="keywordflow">if</span> ($report &amp;&amp; $report-&gt;queryAccess($user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>])) {</div>
<div class="line"><span class="lineno">  895</span>                <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;errors.403&#39;</span>);</div>
<div class="line"><span class="lineno">  896</span>            }</div>
<div class="line"><span class="lineno">  897</span>        }</div>
<div class="line"><span class="lineno">  898</span>        $endDate = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[1];</div>
<div class="line"><span class="lineno">  899</span>        $level = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[2];</div>
<div class="line"><span class="lineno">  900</span>        $zero = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[3];</div>
<div class="line"><span class="lineno">  901</span>        $date = explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0] . <span class="charliteral">&#39;-&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[1];</div>
<div class="line"><span class="lineno">  902</span>        $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a>($report-&gt;currency);</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>        $institution_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  905</span> </div>
<div class="line"><span class="lineno">  906</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  909</span>            $institution_id = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><span class="lineno">  910</span>        }</div>
<div class="line"><span class="lineno">  911</span> </div>
<div class="line"><span class="lineno">  912</span>        <span class="comment">/* establece la consulta de ralación que se desean realizar */</span></div>
<div class="line"><span class="lineno">  913</span>        $level_1 = <span class="stringliteral">&#39;entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>        <span class="comment">/* establece la consulta de ralación que se desean realizar */</span></div>
<div class="line"><span class="lineno">  916</span>        $level_2 = <span class="stringliteral">&#39;children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>        <span class="comment">/* establece la consulta de ralación que se desean realizar */</span></div>
<div class="line"><span class="lineno">  919</span>        $level_3 = <span class="stringliteral">&#39;children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>        <span class="comment">/* establece la consulta de ralación que se desean realizar */</span></div>
<div class="line"><span class="lineno">  922</span>        $level_4 = <span class="stringliteral">&#39;children.children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  923</span> </div>
<div class="line"><span class="lineno">  924</span>        <span class="comment">/* establece la consulta de ralación que se desean realizar */</span></div>
<div class="line"><span class="lineno">  925</span>        $level_5 = <span class="stringliteral">&#39;children.children.children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  926</span> </div>
<div class="line"><span class="lineno">  927</span>        <span class="comment">/* establece la consulta de ralación que se desean realizar */</span></div>
<div class="line"><span class="lineno">  928</span>        $level_6 = <span class="stringliteral">&#39;children.children.children.children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  929</span> </div>
<div class="line"><span class="lineno">  930</span>        <span class="comment">/* Se realiza la consulta de cada cuenta y asiento que pertenezca a INGRESOS Y GASTOS */</span></div>
<div class="line"><span class="lineno">  931</span>        $records = AccountingAccount::with($level_1, $level_2, $level_3, $level_4, $level_5, $level_6)</div>
<div class="line"><span class="lineno">  932</span>            -&gt;with([$level_1 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  933</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  934</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  935</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  936</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  937</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  938</span>                }</div>
<div class="line"><span class="lineno">  939</span>            }])</div>
<div class="line"><span class="lineno">  940</span>            -&gt;with([$level_2 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  941</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  942</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  943</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  944</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  945</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  946</span>                }</div>
<div class="line"><span class="lineno">  947</span>            }])</div>
<div class="line"><span class="lineno">  948</span>            -&gt;with([$level_3 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  949</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  950</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  951</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  952</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  953</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  954</span>                }</div>
<div class="line"><span class="lineno">  955</span>            }])</div>
<div class="line"><span class="lineno">  956</span>            -&gt;with([$level_4 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  957</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  958</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  959</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  960</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  961</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  962</span>                }</div>
<div class="line"><span class="lineno">  963</span>            }])</div>
<div class="line"><span class="lineno">  964</span>            -&gt;with([$level_5 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  965</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  966</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  967</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  968</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  969</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  970</span>                }</div>
<div class="line"><span class="lineno">  971</span>            }])</div>
<div class="line"><span class="lineno">  972</span>            -&gt;with([$level_6 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  973</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  974</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  975</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  976</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  977</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  978</span>                }</div>
<div class="line"><span class="lineno">  979</span>            }])</div>
<div class="line"><span class="lineno">  980</span>            -&gt;whereBetween(<span class="stringliteral">&#39;group&#39;</span>, [5, 6])</div>
<div class="line"><span class="lineno">  981</span>            -&gt;where(<span class="stringliteral">&#39;subgroup&#39;</span>, 0)</div>
<div class="line"><span class="lineno">  982</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  983</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  984</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  985</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  986</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  987</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>        <span class="comment">/* registros de las cuentas */</span></div>
<div class="line"><span class="lineno">  990</span>        $records = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc">formatDataInArray</a>($records, $date, $endDate);</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>        <span class="comment">/* general de la apliación */</span></div>
<div class="line"><span class="lineno">  993</span>        $setting = Setting::all()-&gt;first();</div>
<div class="line"><span class="lineno">  994</span> </div>
<div class="line"><span class="lineno">  995</span>        <span class="comment">/* base para generar el pdf */</span></div>
<div class="line"><span class="lineno">  996</span>        $pdf = <span class="keyword">new</span> ReportRepositorySign();</div>
<div class="line"><span class="lineno">  997</span> </div>
<div class="line"><span class="lineno">  998</span>        <span class="comment">/* Definicion de las caracteristicas generales de la página pdf */</span></div>
<div class="line"><span class="lineno">  999</span>        $lastOfThePreviousMonth = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1], 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno"> 1000</span>        $last = ($lastOfThePreviousMonth . <span class="charliteral">&#39;/&#39;</span> . (explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] - 1) . <span class="charliteral">&#39;/&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]);</div>
<div class="line"><span class="lineno"> 1001</span> </div>
<div class="line"><span class="lineno"> 1002</span>        $institution = Institution::find(1);</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>        $pdf-&gt;setConfig(</div>
<div class="line"><span class="lineno"> 1005</span>            [<span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno"> 1006</span>            <span class="stringliteral">&#39;urlVerify&#39;</span> =&gt; url(<span class="stringliteral">&#39;report/StateOfResultsSign/&#39;</span> . $report-&gt;id)]</div>
<div class="line"><span class="lineno"> 1007</span>        );</div>
<div class="line"><span class="lineno"> 1008</span>        $pdf-&gt;setHeader(<span class="stringliteral">&#39;Reporte de Contabilidad&#39;</span>, <span class="stringliteral">&#39;Reporte de Estado de Rendimiento financiero&#39;</span>);</div>
<div class="line"><span class="lineno"> 1009</span>        $pdf-&gt;setFooter();</div>
<div class="line"><span class="lineno"> 1010</span>        $sign = $pdf-&gt;setBody(<span class="stringliteral">&#39;accounting::pdf.state_of_results&#39;</span>, <span class="keyword">true</span>, [</div>
<div class="line"><span class="lineno"> 1011</span>            <span class="stringliteral">&#39;pdf&#39;</span> =&gt; $pdf,</div>
<div class="line"><span class="lineno"> 1012</span>            <span class="stringliteral">&#39;records&#39;</span> =&gt; $records,</div>
<div class="line"><span class="lineno"> 1013</span>            <span class="stringliteral">&#39;currency&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a>(),</div>
<div class="line"><span class="lineno"> 1014</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno"> 1015</span>            <span class="stringliteral">&#39;zero&#39;</span> =&gt; $zero,</div>
<div class="line"><span class="lineno"> 1016</span>            <span class="stringliteral">&#39;endDate&#39;</span> =&gt; $endDate,</div>
<div class="line"><span class="lineno"> 1017</span>            <span class="stringliteral">&#39;monthBefore&#39;</span> =&gt; $last,</div>
<div class="line"><span class="lineno"> 1018</span>            <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno"> 1019</span>        ]);</div>
<div class="line"><span class="lineno"> 1020</span>        <span class="keywordflow">if</span> ($sign[<span class="stringliteral">&#39;status&#39;</span>] == <span class="stringliteral">&#39;true&#39;</span>) {</div>
<div class="line"><span class="lineno"> 1021</span>            <span class="keywordflow">return</span> response()-&gt;download($sign[<span class="stringliteral">&#39;file&#39;</span>], $sign[<span class="stringliteral">&#39;filename&#39;</span>], [], <span class="stringliteral">&#39;inline&#39;</span>);</div>
<div class="line"><span class="lineno"> 1022</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1023</span>            <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; $sign[<span class="stringliteral">&#39;status&#39;</span>], <span class="stringliteral">&#39;message&#39;</span> =&gt; $sign[<span class="stringliteral">&#39;message&#39;</span>]], 200);</div>
<div class="line"><span class="lineno"> 1024</span>        }</div>
<div class="line"><span class="lineno"> 1025</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01039">AccountingStateOfResultsController\formatDataInArray()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00114">AccountingStateOfResultsController\getCurrency()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00128">AccountingStateOfResultsController\setCurrency()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph">
<area shape="rect" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,153,76,179"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,104,268,129"/>
<area shape="poly" title=" " alt="" coords="75,152,141,131,143,136,77,157"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a55459f9e07fdc6b85953811024ab61d3" title="Obtiene los datos de la moneda." alt="" coords="145,153,247,179"/>
<area shape="poly" title=" " alt="" coords="76,163,131,163,131,169,76,169"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece los datos de la moneda." alt="" coords="146,203,246,228"/>
<area shape="poly" title=" " alt="" coords="77,175,143,196,141,201,75,180"/>
<area shape="poly" title=" " alt="" coords="170,105,164,96,167,86,178,80,196,77,217,81,226,89,223,93,215,86,196,83,180,85,172,89,170,95,174,103"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,104,497,129"/>
<area shape="poly" title=" " alt="" coords="268,114,302,114,302,119,268,119"/>
<area shape="poly" title=" " alt="" coords="372,106,365,96,369,86,383,80,407,77,436,81,448,90,444,94,434,86,407,83,384,85,372,89,370,95,376,102"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="545,5,727,31"/>
<area shape="poly" title=" " alt="" coords="426,102,479,71,544,40,565,32,567,37,546,44,481,76,429,106"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6f3d70e44a5afea25eb600c5e19f6a29" title="Realiza la conversion de saldo." alt="" coords="563,55,709,80"/>
<area shape="poly" title=" " alt="" coords="466,101,562,80,563,86,467,107"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4412028831ce993246eb29b08f2ebb03" title="Obtiene las conversiones de cuentas." alt="" coords="575,104,697,129"/>
<area shape="poly" title=" " alt="" coords="498,114,562,114,562,119,498,119"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4" title="Obtiene el identificador de la moneda." alt="" coords="579,153,693,179"/>
<area shape="poly" title=" " alt="" coords="467,127,567,148,565,154,466,132"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a678f5c49204c69d24b2b293794996ecd" title="Establece las conversiones de cuentas." alt="" coords="576,203,696,228"/>
<area shape="poly" title=" " alt="" coords="430,127,482,157,546,188,571,196,569,201,544,192,479,162,427,132"/>
</map>
</div>

</div>
</div>
<a id="ac8cc7e992a9a4e0958361ae05c79d406" name="ac8cc7e992a9a4e0958361ae05c79d406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8cc7e992a9a4e0958361ae05c79d406">&#9670;&#160;</a></span>pdfVue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdfVue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a>&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$zero</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de balance general. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$date</td><td>fecha </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$level</td><td>nivel de sub cuentas maximo a mostrar </td></tr>
    <tr><td class="paramtype">Currency</td><td class="paramname">$currency</td><td>moneda en que se expresara el reporte </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$zero</td><td>si se tomaran cuentas con saldo cero</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00145">145</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  146</span>    {</div>
<div class="line"><span class="lineno">  147</span>        $institution_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  154</span>            $institution_id = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><span class="lineno">  155</span>        }</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">if</span> (explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] != <span class="stringliteral">&#39;&#39;</span>) {</div>
<div class="line"><span class="lineno">  158</span>            <span class="comment">/* último dia correspondiente al mes */</span></div>
<div class="line"><span class="lineno">  159</span>            $day = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] + 1, 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>            <span class="comment">/* formatea la fecha final de busqueda, (YYYY-mm-dd HH:mm:ss) */</span></div>
<div class="line"><span class="lineno">  162</span>            $endDate = $date . <span class="charliteral">&#39;-&#39;</span> . $day;</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>            <span class="comment">/* consulta de cada cuenta y asiento que pertenezca a ACTIVO, PASIVO, PATRIMONIO y CUENTA DE ORDEN */</span></div>
<div class="line"><span class="lineno">  165</span>            <span class="comment">/* registros de las cuentas patrimoniales seleccionadas */</span></div>
<div class="line"><span class="lineno">  166</span>            $query = AccountingAccount::with(<span class="stringliteral">&#39;entryAccount.entries.currency&#39;</span>)</div>
<div class="line"><span class="lineno">  167</span>                -&gt;with([<span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($endDate, $date, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  168</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  169</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  170</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  171</span>                            -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  172</span>                        ) {</div>
<div class="line"><span class="lineno">  173</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  174</span>                                -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  175</span>                        }</div>
<div class="line"><span class="lineno">  176</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  177</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  178</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  179</span>                                -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  180</span>                        }</div>
<div class="line"><span class="lineno">  181</span>                    }</div>
<div class="line"><span class="lineno">  182</span>                }])</div>
<div class="line"><span class="lineno">  183</span>                -&gt;whereHas(<span class="stringliteral">&#39;entryAccount.entries&#39;</span>, <span class="keyword">function</span> ($query) use ($endDate, $date, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  184</span>                    $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  185</span>                        -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  186</span>                })</div>
<div class="line"><span class="lineno">  187</span>                -&gt;whereBetween(<span class="stringliteral">&#39;group&#39;</span>, [5, 6])</div>
<div class="line"><span class="lineno">  188</span>                -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  189</span>                -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  190</span>                -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  191</span>                -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  192</span>                -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  193</span>                -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  194</span>                -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  195</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  196</span>            $endDate = explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0];</div>
<div class="line"><span class="lineno">  197</span>            <span class="comment">/* consulta de cada cuenta y asiento que pertenezca a ACTIVO, PASIVO, PATRIMONIO y CUENTA DE ORDEN */</span></div>
<div class="line"><span class="lineno">  198</span>            <span class="comment">/* registros de las cuentas patrimoniales seleccionadas */</span></div>
<div class="line"><span class="lineno">  199</span>            $query = AccountingAccount::with(<span class="stringliteral">&#39;entryAccount.entries.currency&#39;</span>)</div>
<div class="line"><span class="lineno">  200</span>                -&gt;with([<span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id) {</div>
<div class="line"><span class="lineno">  201</span>                    $query</div>
<div class="line"><span class="lineno">  202</span>                        -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  203</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  204</span>                        -&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $endDate);</div>
<div class="line"><span class="lineno">  205</span>                }])</div>
<div class="line"><span class="lineno">  206</span>                -&gt;whereHas(<span class="stringliteral">&#39;entryAccount.entries&#39;</span>, <span class="keyword">function</span> ($query) use ($endDate, $institution_id) {</div>
<div class="line"><span class="lineno">  207</span>                    $query</div>
<div class="line"><span class="lineno">  208</span>                        -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  209</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  210</span>                        -&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $endDate);</div>
<div class="line"><span class="lineno">  211</span>                })</div>
<div class="line"><span class="lineno">  212</span>                -&gt;whereBetween(<span class="stringliteral">&#39;group&#39;</span>, [5, 6])</div>
<div class="line"><span class="lineno">  213</span>                -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  214</span>                -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  215</span>                -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  216</span>                -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  217</span>                -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  218</span>                -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  219</span>                -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  220</span>                -&gt;get();</div>
<div class="line"><span class="lineno">  221</span>        }</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>        <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = [];</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>        <span class="comment">/* Se recorre y evalua la relacion en las conversiones necesarias a realizar */</span></div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">foreach</span> ($query as $record) {</div>
<div class="line"><span class="lineno">  227</span>            <span class="keywordflow">foreach</span> ($record[<span class="stringliteral">&#39;entryAccount&#39;</span>] as $entryAccount) {</div>
<div class="line"><span class="lineno">  228</span>                $inRange = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  229</span>                <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>]) {</div>
<div class="line"><span class="lineno">  230</span>                    <span class="keywordflow">if</span> (!array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)) {</div>
<div class="line"><span class="lineno">  231</span>                        <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a>(</div>
<div class="line"><span class="lineno">  232</span>                            <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>,</div>
<div class="line"><span class="lineno">  233</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>],</div>
<div class="line"><span class="lineno">  234</span>                            <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;id&#39;</span>]</div>
<div class="line"><span class="lineno">  235</span>                        );</div>
<div class="line"><span class="lineno">  236</span>                    }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>                    <span class="keywordflow">foreach</span> (<a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> as $convertion) {</div>
<div class="line"><span class="lineno">  239</span>                        <span class="keywordflow">foreach</span> ($convertion as $convert) {</div>
<div class="line"><span class="lineno">  240</span>                            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  241</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &gt;= $convert[<span class="stringliteral">&#39;start_at&#39;</span>] &amp;&amp;</div>
<div class="line"><span class="lineno">  242</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &lt;= $convert[<span class="stringliteral">&#39;end_at&#39;</span>]</div>
<div class="line"><span class="lineno">  243</span>                            ) {</div>
<div class="line"><span class="lineno">  244</span>                                $inRange = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  245</span>                            }</div>
<div class="line"><span class="lineno">  246</span>                        }</div>
<div class="line"><span class="lineno">  247</span>                    }</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  250</span>                        !array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)</div>
<div class="line"><span class="lineno">  251</span>                        &amp;&amp; $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;id&#39;</span>]</div>
<div class="line"><span class="lineno">  252</span>                    ) {</div>
<div class="line"><span class="lineno">  253</span>                        <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  254</span>                            <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  255</span>                            <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  256</span>                            . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  257</span>                            <span class="stringliteral">&#39;, verificar tipos de cambio configurados. &#39;</span>,</div>
<div class="line"><span class="lineno">  258</span>                        ], 200);</div>
<div class="line"><span class="lineno">  259</span>                    } elseif (!$inRange) {</div>
<div class="line"><span class="lineno">  260</span>                        <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id) {</div>
<div class="line"><span class="lineno">  261</span>                            <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  262</span>                                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  263</span>                                <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  264</span>                                . <span class="stringliteral">&#39; (&#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span></div>
<div class="line"><span class="lineno">  265</span>                                . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  266</span>                                <span class="stringliteral">&#39;, verificar tipos de cambio configurados. Para la fecha de &#39;</span> .</div>
<div class="line"><span class="lineno">  267</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno">  268</span>                            ], 200);</div>
<div class="line"><span class="lineno">  269</span>                        }</div>
<div class="line"><span class="lineno">  270</span>                    }</div>
<div class="line"><span class="lineno">  271</span>                }</div>
<div class="line"><span class="lineno">  272</span>            }</div>
<div class="line"><span class="lineno">  273</span>        }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <span class="comment">/* Se guarda un registro cada vez que se genera un reporte, en caso de que ya exista se actualiza */</span></div>
<div class="line"><span class="lineno">  276</span>        $zero = ($zero) ? <span class="stringliteral">&#39;true&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><span class="lineno">  277</span>        $url = <span class="stringliteral">&#39;StateOfResults/&#39;</span> . $endDate . <span class="charliteral">&#39;/&#39;</span> . $level . <span class="charliteral">&#39;/&#39;</span> . $zero;</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>        $currentDate = <span class="keyword">new</span> DateTime();</div>
<div class="line"><span class="lineno">  280</span>        $currentDate = $currentDate-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>        <span class="comment">/* almacena el registro del reporte del dia si existe */</span></div>
<div class="line"><span class="lineno">  283</span>        $report = AccountingReportHistory::whereBetween(<span class="stringliteral">&#39;updated_at&#39;</span>, [</div>
<div class="line"><span class="lineno">  284</span>            $currentDate . <span class="stringliteral">&#39; 00:00:00&#39;</span>,</div>
<div class="line"><span class="lineno">  285</span>            $currentDate . <span class="stringliteral">&#39; 23:59:59&#39;</span>,</div>
<div class="line"><span class="lineno">  286</span>        ])</div>
<div class="line"><span class="lineno">  287</span>            -&gt;where(<span class="stringliteral">&#39;report&#39;</span>, <span class="stringliteral">&#39;Estado de Resultados&#39;</span>)</div>
<div class="line"><span class="lineno">  288</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;first();</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>        <span class="comment">/* se crea o actualiza el registro del reporte */</span></div>
<div class="line"><span class="lineno">  291</span>        <span class="keywordflow">if</span> (!$report) {</div>
<div class="line"><span class="lineno">  292</span>            $report = AccountingReportHistory::create(</div>
<div class="line"><span class="lineno">  293</span>                [</div>
<div class="line"><span class="lineno">  294</span>                    <span class="stringliteral">&#39;report&#39;</span> =&gt; <span class="stringliteral">&#39;Estado de Resultados&#39;</span>,</div>
<div class="line"><span class="lineno">  295</span>                    <span class="stringliteral">&#39;url&#39;</span> =&gt; $url,</div>
<div class="line"><span class="lineno">  296</span>                    <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id,</div>
<div class="line"><span class="lineno">  297</span>                    <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; $institution_id,</div>
<div class="line"><span class="lineno">  298</span>                ]</div>
<div class="line"><span class="lineno">  299</span>            );</div>
<div class="line"><span class="lineno">  300</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  301</span>            $report-&gt;url = $url;</div>
<div class="line"><span class="lineno">  302</span>            $report-&gt;currency_id = <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id;</div>
<div class="line"><span class="lineno">  303</span>            $report-&gt;institution_id = $institution_id;</div>
<div class="line"><span class="lineno">  304</span>            $report-&gt;save();</div>
<div class="line"><span class="lineno">  305</span>        }</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  308</span><span class="comment">         * El siguiente segmento es necesario para evaluar cuando se va a mostrar</span></div>
<div class="line"><span class="lineno">  309</span><span class="comment">         * información y cuando no en el reporte.</span></div>
<div class="line"><span class="lineno">  310</span><span class="comment">         * [$records Registros disponibles para mostrarse]</span></div>
<div class="line"><span class="lineno">  311</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>        $endDate = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[1];</div>
<div class="line"><span class="lineno">  314</span>        $level = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[2];</div>
<div class="line"><span class="lineno">  315</span>        $zero = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[3] == <span class="stringliteral">&#39;true&#39;</span> ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  316</span>        $date = count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1 ?</div>
<div class="line"><span class="lineno">  317</span>            explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0] . <span class="charliteral">&#39;-&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[1] :</div>
<div class="line"><span class="lineno">  318</span>            explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0];</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>        $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a>($report-&gt;currency);</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  323</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  324</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  325</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)</div>
<div class="line"><span class="lineno">  326</span>            -&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  327</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  328</span>        }</div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>        <span class="keywordflow">if</span> (count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1) {</div>
<div class="line"><span class="lineno">  331</span>            $records = AccountingEntry::query()</div>
<div class="line"><span class="lineno">  332</span>                -&gt;with([<span class="stringliteral">&#39;accountingAccounts&#39;</span> =&gt; <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  333</span>                    $query</div>
<div class="line"><span class="lineno">  334</span>                        -&gt;with(<span class="stringliteral">&#39;account&#39;</span>)</div>
<div class="line"><span class="lineno">  335</span>                        -&gt;whereHas(<span class="stringliteral">&#39;account&#39;</span>, <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  336</span>                            $query-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [5, 6]);</div>
<div class="line"><span class="lineno">  337</span>                        });</div>
<div class="line"><span class="lineno">  338</span>                }])</div>
<div class="line"><span class="lineno">  339</span>                -&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)</div>
<div class="line"><span class="lineno">  340</span>                -&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>)</div>
<div class="line"><span class="lineno">  341</span>                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution-&gt;id)</div>
<div class="line"><span class="lineno">  342</span>                -&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$date . <span class="stringliteral">&#39;-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  343</span>                -&gt;get();</div>
<div class="line"><span class="lineno">  344</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  345</span>            $records = AccountingEntry::query()</div>
<div class="line"><span class="lineno">  346</span>                -&gt;with([<span class="stringliteral">&#39;accountingAccounts&#39;</span> =&gt; <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  347</span>                    $query</div>
<div class="line"><span class="lineno">  348</span>                        -&gt;with(<span class="stringliteral">&#39;account&#39;</span>)</div>
<div class="line"><span class="lineno">  349</span>                        -&gt;whereHas(<span class="stringliteral">&#39;account&#39;</span>, <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  350</span>                            $query</div>
<div class="line"><span class="lineno">  351</span>                                -&gt;where(<span class="stringliteral">&#39;resource&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  352</span>                                -&gt;orWhere(<span class="stringliteral">&#39;egress&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  353</span>                        });</div>
<div class="line"><span class="lineno">  354</span>                }])</div>
<div class="line"><span class="lineno">  355</span>                -&gt;where(<span class="stringliteral">&#39;currency_id&#39;</span>, $this-&gt;currency-&gt;id)</div>
<div class="line"><span class="lineno">  356</span>                -&gt;where(<span class="stringliteral">&#39;concept&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;Cierre de ejercicio&#39;</span>)</div>
<div class="line"><span class="lineno">  357</span>                -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  358</span>                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution-&gt;id)</div>
<div class="line"><span class="lineno">  359</span>                -&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)</div>
<div class="line"><span class="lineno">  360</span>                -&gt;get();</div>
<div class="line"><span class="lineno">  361</span>        }</div>
<div class="line"><span class="lineno">  362</span> </div>
<div class="line"><span class="lineno">  363</span>        $dataInToEndDate = $records-&gt;toArray();</div>
<div class="line"><span class="lineno">  364</span>        <span class="keywordflow">if</span> ($dataInToEndDate == []) {</div>
<div class="line"><span class="lineno">  365</span>            <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  366</span>                [</div>
<div class="line"><span class="lineno">  367</span>                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  368</span>                <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;No se ha encontrado ningún registro que cumpla con los parámetros establecidos.&#39;</span>,</div>
<div class="line"><span class="lineno">  369</span>                ],</div>
<div class="line"><span class="lineno">  370</span>                200</div>
<div class="line"><span class="lineno">  371</span>            );</div>
<div class="line"><span class="lineno">  372</span>        }</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $report-&gt;id], 200);</div>
<div class="line"><span class="lineno">  375</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController\$convertions</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00055">AccountingStateOfResultsController\$currency</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01217">AccountingStateOfResultsController\calculateExchangeRates()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00128">AccountingStateOfResultsController\setCurrency()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="5,31,72,56"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="120,5,301,31"/>
<area shape="poly" title=" " alt="" coords="72,36,111,30,111,35,73,41"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece los datos de la moneda." alt="" coords="161,55,261,80"/>
<area shape="poly" title=" " alt="" coords="73,45,148,56,147,61,72,51"/>
</map>
</div>

</div>
</div>
<a id="ab6d7280e9d9218f3f62918686cd7906d" name="ab6d7280e9d9218f3f62918686cd7906d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d7280e9d9218f3f62918686cd7906d">&#9670;&#160;</a></span>pdfVueSign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdfVueSign </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a>&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$zero</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de balance general. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$date</td><td>fecha </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$level</td><td>nivel de sub cuentas maximo a mostrar </td></tr>
    <tr><td class="paramtype">Currency</td><td class="paramname">$currency</td><td>moneda en que se expresara el reporte </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$zero</td><td>si se tomaran cuentas con saldo cero</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00389">389</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  390</span>    {</div>
<div class="line"><span class="lineno">  391</span>        <span class="comment">/* último dia correspondiente al mes */</span></div>
<div class="line"><span class="lineno">  392</span>        $day = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] + 1, 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>        <span class="comment">/* formatea la fecha final de busqueda, (YYYY-mm-dd HH:mm:ss) */</span></div>
<div class="line"><span class="lineno">  395</span>        $endDate = $date . <span class="charliteral">&#39;-&#39;</span> . $day;</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>        $institution_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>        $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  404</span>            $institution_id = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><span class="lineno">  405</span>        }</div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>        <span class="comment">/* consulta de cada cuenta y asiento que pertenezca a ACTIVO, PASIVO, PATRIMONIO y CUENTA DE ORDEN */</span></div>
<div class="line"><span class="lineno">  408</span>        <span class="comment">/* registros de las cuentas patrimoniales seleccionadas */</span></div>
<div class="line"><span class="lineno">  409</span>        $query = AccountingAccount::with(<span class="stringliteral">&#39;entryAccount.entries.currency&#39;</span>)</div>
<div class="line"><span class="lineno">  410</span>            -&gt;with([<span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($endDate, $date, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  411</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  412</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  413</span>                        $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  414</span>                        -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  415</span>                    ) {</div>
<div class="line"><span class="lineno">  416</span>                        $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  417</span>                            -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  418</span>                    }</div>
<div class="line"><span class="lineno">  419</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  420</span>                    <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  421</span>                        $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  422</span>                            -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  423</span>                    }</div>
<div class="line"><span class="lineno">  424</span>                }</div>
<div class="line"><span class="lineno">  425</span>            }])</div>
<div class="line"><span class="lineno">  426</span>            -&gt;whereHas(<span class="stringliteral">&#39;entryAccount.entries&#39;</span>, <span class="keyword">function</span> ($query) use ($endDate, $date, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  427</span>                $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0] . <span class="stringliteral">&#39;-01-01&#39;</span>, $endDate])</div>
<div class="line"><span class="lineno">  428</span>                    -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)-&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  429</span>            })</div>
<div class="line"><span class="lineno">  430</span>            -&gt;whereBetween(<span class="stringliteral">&#39;group&#39;</span>, [5, 6])</div>
<div class="line"><span class="lineno">  431</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  432</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  433</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  434</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  435</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  436</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  437</span>            -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>        <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = [];</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>        <span class="comment">/* Se recorre y evalua la relacion en las conversiones necesarias a realizar */</span></div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">foreach</span> ($query as $record) {</div>
<div class="line"><span class="lineno">  443</span>            <span class="keywordflow">foreach</span> ($record[<span class="stringliteral">&#39;entryAccount&#39;</span>] as $entryAccount) {</div>
<div class="line"><span class="lineno">  444</span>                $inRange = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  445</span>                <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>]) {</div>
<div class="line"><span class="lineno">  446</span>                    <span class="keywordflow">if</span> (!array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)) {</div>
<div class="line"><span class="lineno">  447</span>                        <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = $this-&gt;<a class="code hl_function" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a>(</div>
<div class="line"><span class="lineno">  448</span>                            <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>,</div>
<div class="line"><span class="lineno">  449</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>],</div>
<div class="line"><span class="lineno">  450</span>                            <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;id&#39;</span>]</div>
<div class="line"><span class="lineno">  451</span>                        );</div>
<div class="line"><span class="lineno">  452</span>                    }</div>
<div class="line"><span class="lineno">  453</span> </div>
<div class="line"><span class="lineno">  454</span>                    <span class="keywordflow">foreach</span> (<a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> as $convertion) {</div>
<div class="line"><span class="lineno">  455</span>                        <span class="keywordflow">foreach</span> ($convertion as $convert) {</div>
<div class="line"><span class="lineno">  456</span>                            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  457</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &gt;= $convert[<span class="stringliteral">&#39;start_at&#39;</span>] &amp;&amp;</div>
<div class="line"><span class="lineno">  458</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &lt;= $convert[<span class="stringliteral">&#39;end_at&#39;</span>]</div>
<div class="line"><span class="lineno">  459</span>                            ) {</div>
<div class="line"><span class="lineno">  460</span>                                $inRange = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  461</span>                            }</div>
<div class="line"><span class="lineno">  462</span>                        }</div>
<div class="line"><span class="lineno">  463</span>                    }</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  466</span>                        !array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)</div>
<div class="line"><span class="lineno">  467</span>                        &amp;&amp; $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;id&#39;</span>]</div>
<div class="line"><span class="lineno">  468</span>                    ) {</div>
<div class="line"><span class="lineno">  469</span>                        <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  470</span>                            <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  471</span>                            <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  472</span>                            . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  473</span>                            <span class="stringliteral">&#39;, verificar tipos de cambio configurados. &#39;</span>,</div>
<div class="line"><span class="lineno">  474</span>                        ], 200);</div>
<div class="line"><span class="lineno">  475</span>                    } elseif (!$inRange) {</div>
<div class="line"><span class="lineno">  476</span>                        <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id) {</div>
<div class="line"><span class="lineno">  477</span>                            <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  478</span>                                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  479</span>                                <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  480</span>                                . <span class="stringliteral">&#39; (&#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span></div>
<div class="line"><span class="lineno">  481</span>                                . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  482</span>                                <span class="stringliteral">&#39;, verificar tipos de cambio configurados. Para la fecha de &#39;</span> .</div>
<div class="line"><span class="lineno">  483</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno">  484</span>                            ], 200);</div>
<div class="line"><span class="lineno">  485</span>                        }</div>
<div class="line"><span class="lineno">  486</span>                    }</div>
<div class="line"><span class="lineno">  487</span>                }</div>
<div class="line"><span class="lineno">  488</span>            }</div>
<div class="line"><span class="lineno">  489</span>        }</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>        <span class="comment">/* almacena el ultimo dia correspondiente al mes */</span></div>
<div class="line"><span class="lineno">  492</span>        $day = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] + 1, 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>        <span class="comment">/* formatea la fecha final de busqueda, (YYYY-mm-dd HH:mm:ss) */</span></div>
<div class="line"><span class="lineno">  495</span>        $endDate = $date . <span class="charliteral">&#39;-&#39;</span> . $day;</div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>        <span class="comment">/* Se guarda un registro cada vez que se genera un reporte, en caso de que ya exista se actualiza */</span></div>
<div class="line"><span class="lineno">  498</span>        $zero = ($zero) ? <span class="stringliteral">&#39;true&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><span class="lineno">  499</span>        $url = <span class="stringliteral">&#39;StateOfResultsSign/&#39;</span> . $endDate . <span class="charliteral">&#39;/&#39;</span> . $level . <span class="charliteral">&#39;/&#39;</span> . $zero;</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>        $currentDate = <span class="keyword">new</span> DateTime();</div>
<div class="line"><span class="lineno">  502</span>        $currentDate = $currentDate-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  503</span> </div>
<div class="line"><span class="lineno">  504</span>        <span class="comment">/* almacena el registro del reporte del dia si existe */</span></div>
<div class="line"><span class="lineno">  505</span>        $report = AccountingReportHistory::whereBetween(<span class="stringliteral">&#39;updated_at&#39;</span>, [</div>
<div class="line"><span class="lineno">  506</span>            $currentDate . <span class="stringliteral">&#39; 00:00:00&#39;</span>,</div>
<div class="line"><span class="lineno">  507</span>            $currentDate . <span class="stringliteral">&#39; 23:59:59&#39;</span>,</div>
<div class="line"><span class="lineno">  508</span>        ])</div>
<div class="line"><span class="lineno">  509</span>            -&gt;where(<span class="stringliteral">&#39;report&#39;</span>, <span class="stringliteral">&#39;Estado de Resultados&#39;</span>)</div>
<div class="line"><span class="lineno">  510</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;first();</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>        <span class="comment">/* se crea o actualiza el registro del reporte */</span></div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordflow">if</span> (!$report) {</div>
<div class="line"><span class="lineno">  514</span>            $report = AccountingReportHistory::create(</div>
<div class="line"><span class="lineno">  515</span>                [</div>
<div class="line"><span class="lineno">  516</span>                    <span class="stringliteral">&#39;report&#39;</span> =&gt; <span class="stringliteral">&#39;Estado de Resultados&#39;</span>,</div>
<div class="line"><span class="lineno">  517</span>                    <span class="stringliteral">&#39;url&#39;</span> =&gt; $url,</div>
<div class="line"><span class="lineno">  518</span>                    <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id,</div>
<div class="line"><span class="lineno">  519</span>                    <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; $institution_id,</div>
<div class="line"><span class="lineno">  520</span>                ]</div>
<div class="line"><span class="lineno">  521</span>            );</div>
<div class="line"><span class="lineno">  522</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  523</span>            $report-&gt;url = $url;</div>
<div class="line"><span class="lineno">  524</span>            $report-&gt;currency_id = <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id;</div>
<div class="line"><span class="lineno">  525</span>            $report-&gt;institution_id = $institution_id;</div>
<div class="line"><span class="lineno">  526</span>            $report-&gt;save();</div>
<div class="line"><span class="lineno">  527</span>        }</div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $report-&gt;id], 200);</div>
<div class="line"><span class="lineno">  529</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController\$convertions</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00055">AccountingStateOfResultsController\$currency</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01217">AccountingStateOfResultsController\calculateExchangeRates()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab6d7280e9d9218f3f62918686cd7906d_cgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab6d7280e9d9218f3f62918686cd7906d_cgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab6d7280e9d9218f3f62918686cd7906d_cgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_ab6d7280e9d9218f3f62918686cd7906d_cgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="5,5,100,31"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="148,5,329,31"/>
<area shape="poly" title=" " alt="" coords="100,15,134,15,134,21,100,21"/>
</map>
</div>

</div>
</div>
<a id="a678f5c49204c69d24b2b293794996ecd" name="a678f5c49204c69d24b2b293794996ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678f5c49204c69d24b2b293794996ecd">&#9670;&#160;</a></span>setConvertions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setConvertions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$convertions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establece las conversiones de cuentas. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$convertions</td><td>Lista de conversiones de cuentas</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00094">94</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span>    {</div>
<div class="line"><span class="lineno">   96</span>        $this-&gt;convertions = <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>;</div>
<div class="line"><span class="lineno">   97</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">AccountingStateOfResultsController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01093">AccountingStateOfResultsController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a678f5c49204c69d24b2b293794996ecd_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a678f5c49204c69d24b2b293794996ecd_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a678f5c49204c69d24b2b293794996ecd_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a678f5c49204c69d24b2b293794996ecd_icgraph">
<area shape="rect" title="Establece las conversiones de cuentas." alt="" coords="545,29,665,55"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aaf408629462a34c9e16a85f68f74ee0a" title="Cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al ultimo nivel de..." alt="" coords="316,29,497,55"/>
<area shape="poly" title=" " alt="" coords="531,45,498,45,498,39,531,39"/>
<area shape="poly" title=" " alt="" coords="442,19,432,11,407,8,386,10,375,15,372,20,378,28,374,31,367,21,371,11,384,5,407,3,434,6,445,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="302,45,268,45,268,39,302,39"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="a4a9edafe924a4efeb9d1a9daf1bc1dfe" name="a4a9edafe924a4efeb9d1a9daf1bc1dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a9edafe924a4efeb9d1a9daf1bc1dfe">&#9670;&#160;</a></span>setCurrency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setCurrency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establece los datos de la moneda. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Currency</td><td class="paramname">$currency</td><td>Datos de la moneda</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00128">128</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>    {</div>
<div class="line"><span class="lineno">  130</span>        $this-&gt;currency = <a class="code hl_variable" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>;</div>
<div class="line"><span class="lineno">  131</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00055">AccountingStateOfResultsController\$currency</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00552">AccountingStateOfResultsController\pdf()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00888">AccountingStateOfResultsController\pdfSign()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00145">AccountingStateOfResultsController\pdfVue()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph.png" border="0" usemap="#add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph" alt=""/></div>
<map name="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph" id="add/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph">
<area shape="rect" title="Establece los datos de la moneda." alt="" coords="236,55,336,80"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de estado de resultados." alt="" coords="131,5,174,31"/>
<area shape="poly" title=" " alt="" coords="238,52,173,28,175,23,239,47"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de estado de resultados." alt="" coords="117,55,188,80"/>
<area shape="poly" title=" " alt="" coords="222,70,188,70,188,65,222,65"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#ac8cc7e992a9a4e0958361ae05c79d406" title="Genera el reporte en pdf de balance general." alt="" coords="119,104,186,129"/>
<area shape="poly" title=" " alt="" coords="239,87,187,107,185,102,237,82"/>
<area shape="rect" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de estado de resultados." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="118,21,70,21,70,15,118,15"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Documentación de campos</h2>
<a id="aa909c5b20912c383ac43c7e672007a1d" name="aa909c5b20912c383ac43c7e672007a1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa909c5b20912c383ac43c7e672007a1d">&#9670;&#160;</a></span>$convertions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $convertions = []</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lista de conversiones validas. </p>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00048">48</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01217">AccountingStateOfResultsController\calculateExchangeRates()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01186">AccountingStateOfResultsController\calculateOperation()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00082">AccountingStateOfResultsController\getConvertions()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00145">AccountingStateOfResultsController\pdfVue()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00389">AccountingStateOfResultsController\pdfVueSign()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00094">AccountingStateOfResultsController\setConvertions()</a>.</p>

</div>
</div>
<a id="a6ec628a1048bd2ab581320d0aa1aed30" name="a6ec628a1048bd2ab581320d0aa1aed30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec628a1048bd2ab581320d0aa1aed30">&#9670;&#160;</a></span>$currency</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a> $currency = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Moneda en la que se expresara el reporte. </p>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00055">55</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00114">AccountingStateOfResultsController\getCurrency()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00145">AccountingStateOfResultsController\pdfVue()</a>, <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00389">AccountingStateOfResultsController\pdfVueSign()</a> y <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00128">AccountingStateOfResultsController\setCurrency()</a>.</p>

</div>
</div>
<a id="a311b3d7033e348395d71484904c44767" name="a311b3d7033e348395d71484904c44767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311b3d7033e348395d71484904c44767">&#9670;&#160;</a></span>$PageBreakTrigger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mixed $PageBreakTrigger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Salto de página. </p>

<p class="definition">Definición en la línea <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l00041">41</a> del archivo <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html#l01247">AccountingStateOfResultsController\getCheckBreak()</a>.</p>

</div>
</div>
<hr/>La documentación de esta clase está generada del siguiente archivo:<ul>
<li><a class="el" href="../../d0/df3/AccountingStateOfResultsController_8php_source.html">AccountingStateOfResultsController.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Modules</b></li><li class="navelem"><b>Accounting</b></li><li class="navelem"><b>Http</b></li><li class="navelem"><b>Controllers</b></li><li class="navelem"><b>Reports</b></li><li class="navelem"><a class="el" href="../../dd/dee/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingStateOfResultsController.html">AccountingStateOfResultsController</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
