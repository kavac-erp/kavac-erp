<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KAVAC: Referencia de la clase UserController</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-doc.png"/></td>
  <td id="projectalign">
   <div id="projectname">KAVAC<span id="projectnumber">&#160;v1.0.5</span>
   </div>
   <div id="projectbrief">Sistema de Gestión Organizacional</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a>  </div>
  <div class="headertitle"><div class="title">Referencia de la clase UserController</div></div>
</div><!--header-->
<div class="contents">

<p>Gestiona información de usuarios.  
 <a href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#details">Más...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Diagrama de herencia de UserController</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d1/d0b/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController__inherit__graph.png" border="0" usemap="#aUserController_inherit__map" alt="Inheritance graph"/></div>
<map name="aUserController_inherit__map" id="aUserController_inherit__map">
<area shape="rect" title="Gestiona información de usuarios." alt="" coords="5,119,205,384"/>
<area shape="rect" href="../../d8/d70/classApp_1_1Http_1_1Controllers_1_1Controller.html" title="Controlador principal del framework del cual extienden los demás controladores." alt="" coords="66,5,145,71"/>
<area shape="poly" title=" " alt="" coords="108,84,108,119,103,119,103,84"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Diagrama de colaboración de UserController:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d0/d5d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController__coll__graph.png" border="0" usemap="#aUserController_coll__map" alt="Collaboration graph"/></div>
<map name="aUserController_coll__map" id="aUserController_coll__map">
<area shape="rect" title="Gestiona información de usuarios." alt="" coords="5,119,205,384"/>
<area shape="rect" href="../../d8/d70/classApp_1_1Http_1_1Controllers_1_1Controller.html" title="Controlador principal del framework del cual extienden los demás controladores." alt="" coords="66,5,145,71"/>
<area shape="poly" title=" " alt="" coords="108,84,108,119,103,119,103,84"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr class="memitem:a7dfc89b100526ec67b145baea4c4aa15" id="r_a7dfc89b100526ec67b145baea4c4aa15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a7dfc89b100526ec67b145baea4c4aa15">assignAccess</a> (<a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a7dfc89b100526ec67b145baea4c4aa15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra el formulario para la asignación de roles y permisos a usuarios.  <br /></td></tr>
<tr class="separator:a7dfc89b100526ec67b145baea4c4aa15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435e7d7525d4bcd0ed5e34a469f3adf6" id="r_a435e7d7525d4bcd0ed5e34a469f3adf6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a435e7d7525d4bcd0ed5e34a469f3adf6">create</a> ()</td></tr>
<tr class="memdesc:a435e7d7525d4bcd0ed5e34a469f3adf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra el formulario para crear un nuevo registro de usuario.  <br /></td></tr>
<tr class="separator:a435e7d7525d4bcd0ed5e34a469f3adf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ce9d7e767a3f3cf14e126dce7773ddb" id="r_a1ce9d7e767a3f3cf14e126dce7773ddb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a1ce9d7e767a3f3cf14e126dce7773ddb">destroy</a> (<a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a1ce9d7e767a3f3cf14e126dce7773ddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Elimina un usuario.  <br /></td></tr>
<tr class="separator:a1ce9d7e767a3f3cf14e126dce7773ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d282f6aedbdc5d785651627d247df08" id="r_a6d282f6aedbdc5d785651627d247df08"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a6d282f6aedbdc5d785651627d247df08">edit</a> (<a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a6d282f6aedbdc5d785651627d247df08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra el formulario para actualizar información de un usuario.  <br /></td></tr>
<tr class="separator:a6d282f6aedbdc5d785651627d247df08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0d5b303383fb5b1fabb5fd01cd3800" id="r_aba0d5b303383fb5b1fabb5fd01cd3800"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#aba0d5b303383fb5b1fabb5fd01cd3800">getAll</a> ()</td></tr>
<tr class="memdesc:aba0d5b303383fb5b1fabb5fd01cd3800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene información de todos los usuarios registrados en el sistema.  <br /></td></tr>
<tr class="separator:aba0d5b303383fb5b1fabb5fd01cd3800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66918171b54d502311874b6f828399a" id="r_ae66918171b54d502311874b6f828399a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#ae66918171b54d502311874b6f828399a">getExpiredSessions</a> (Request $request)</td></tr>
<tr class="memdesc:ae66918171b54d502311874b6f828399a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene la información de las sesiones activas e inactivas.  <br /></td></tr>
<tr class="separator:ae66918171b54d502311874b6f828399a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd48e81c906e4abdebda68cc548c34a" id="r_a2bd48e81c906e4abdebda68cc548c34a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a2bd48e81c906e4abdebda68cc548c34a">getLockScreenData</a> ()</td></tr>
<tr class="memdesc:a2bd48e81c906e4abdebda68cc548c34a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene información acerca de la pantalla de bloqueo del sistema.  <br /></td></tr>
<tr class="separator:a2bd48e81c906e4abdebda68cc548c34a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bfe83965d039b53335aa33852589779" id="r_a9bfe83965d039b53335aa33852589779"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a9bfe83965d039b53335aa33852589779">getRolesAndPermissions</a> ()</td></tr>
<tr class="memdesc:a9bfe83965d039b53335aa33852589779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene los roles y permisos disponibles.  <br /></td></tr>
<tr class="separator:a9bfe83965d039b53335aa33852589779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a149eb92716c1084a935e04a8d95f7347" id="r_a149eb92716c1084a935e04a8d95f7347"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a149eb92716c1084a935e04a8d95f7347">index</a> ()</td></tr>
<tr class="memdesc:a149eb92716c1084a935e04a8d95f7347"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listado de todos los registros de los usuarios.  <br /></td></tr>
<tr class="separator:a149eb92716c1084a935e04a8d95f7347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342adf348321f63adfc7b2f17ed281df" id="r_a342adf348321f63adfc7b2f17ed281df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a342adf348321f63adfc7b2f17ed281df">indexRolesPermissions</a> ()</td></tr>
<tr class="memdesc:a342adf348321f63adfc7b2f17ed281df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra un listado de roles y permisos de usuario.  <br /></td></tr>
<tr class="separator:a342adf348321f63adfc7b2f17ed281df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5183b2d30664a49a58784512555692e6" id="r_a5183b2d30664a49a58784512555692e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a5183b2d30664a49a58784512555692e6">info</a> (<a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a5183b2d30664a49a58784512555692e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra información del usuario.  <br /></td></tr>
<tr class="separator:a5183b2d30664a49a58784512555692e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a629ea2454d2e26ee54b8a888c4775590" id="r_a629ea2454d2e26ee54b8a888c4775590"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a629ea2454d2e26ee54b8a888c4775590">restore</a> ($userId)</td></tr>
<tr class="memdesc:a629ea2454d2e26ee54b8a888c4775590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restaurar registro de usuario eliminado.  <br /></td></tr>
<tr class="separator:a629ea2454d2e26ee54b8a888c4775590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac177de66677ebcb21b702d839904bb0d" id="r_ac177de66677ebcb21b702d839904bb0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#ac177de66677ebcb21b702d839904bb0d">sendCredentials</a> (Request $request)</td></tr>
<tr class="memdesc:ac177de66677ebcb21b702d839904bb0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Envía nuevas credenciales de acceso al usuario.  <br /></td></tr>
<tr class="separator:ac177de66677ebcb21b702d839904bb0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47605dabaa715d9459137a0a518e23a9" id="r_a47605dabaa715d9459137a0a518e23a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a47605dabaa715d9459137a0a518e23a9">setAccess</a> (Request $request)</td></tr>
<tr class="memdesc:a47605dabaa715d9459137a0a518e23a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asigna permisos de acceso a los usuarios del sistema.  <br /></td></tr>
<tr class="separator:a47605dabaa715d9459137a0a518e23a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae6bd7e645a723cc4749a105d4cee76" id="r_a4ae6bd7e645a723cc4749a105d4cee76"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a4ae6bd7e645a723cc4749a105d4cee76">setAdminUserSetting</a> (Request $request)</td></tr>
<tr class="memdesc:a4ae6bd7e645a723cc4749a105d4cee76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece la configuración de un usuario desde el panel administrativo.  <br /></td></tr>
<tr class="separator:a4ae6bd7e645a723cc4749a105d4cee76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c158bcaff242fca5f50789fbaeba0f7" id="r_a8c158bcaff242fca5f50789fbaeba0f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a8c158bcaff242fca5f50789fbaeba0f7">setLockScreenData</a> (Request $request)</td></tr>
<tr class="memdesc:a8c158bcaff242fca5f50789fbaeba0f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actualiza información de la pantalla de bloqueo del sistema.  <br /></td></tr>
<tr class="separator:a8c158bcaff242fca5f50789fbaeba0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3269e0654e48445c6f9553d544d49d30" id="r_a3269e0654e48445c6f9553d544d49d30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a3269e0654e48445c6f9553d544d49d30">setMyNotifications</a> (Request $request)</td></tr>
<tr class="memdesc:a3269e0654e48445c6f9553d544d49d30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gestiona la configuración de notificaciones establecida por el usuario.  <br /></td></tr>
<tr class="separator:a3269e0654e48445c6f9553d544d49d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a386a39316c04607fe17ed391c99defe6" id="r_a386a39316c04607fe17ed391c99defe6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a386a39316c04607fe17ed391c99defe6">setRolesAndPermissions</a> (Request $request)</td></tr>
<tr class="memdesc:a386a39316c04607fe17ed391c99defe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuración de permisos asociados a roles de usuarios.  <br /></td></tr>
<tr class="separator:a386a39316c04607fe17ed391c99defe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbc843b73ff2640c1f584ca26b3df94" id="r_a6dbc843b73ff2640c1f584ca26b3df94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a6dbc843b73ff2640c1f584ca26b3df94">setUserSettings</a> (Request $request)</td></tr>
<tr class="memdesc:a6dbc843b73ff2640c1f584ca26b3df94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece la configuración personalizada de un usuario.  <br /></td></tr>
<tr class="separator:a6dbc843b73ff2640c1f584ca26b3df94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a4964eb0b83cafb88c6bd02f9e71020" id="r_a6a4964eb0b83cafb88c6bd02f9e71020"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a6a4964eb0b83cafb88c6bd02f9e71020">show</a> (<a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a6a4964eb0b83cafb88c6bd02f9e71020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Muestra información acerca del usuario.  <br /></td></tr>
<tr class="separator:a6a4964eb0b83cafb88c6bd02f9e71020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ef485163104597c12185b53cdacf638" id="r_a9ef485163104597c12185b53cdacf638"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a9ef485163104597c12185b53cdacf638">store</a> (Request $request)</td></tr>
<tr class="memdesc:a9ef485163104597c12185b53cdacf638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registra un nuevo usuario.  <br /></td></tr>
<tr class="separator:a9ef485163104597c12185b53cdacf638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f4ff005fbb573159370df2a33ee578" id="r_a67f4ff005fbb573159370df2a33ee578"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a67f4ff005fbb573159370df2a33ee578">unlock</a> (Request $request, <a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a67f4ff005fbb573159370df2a33ee578"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desbloquea un usuario.  <br /></td></tr>
<tr class="separator:a67f4ff005fbb573159370df2a33ee578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb00adc5ddc29f404ae12ff164b319c5" id="r_acb00adc5ddc29f404ae12ff164b319c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#acb00adc5ddc29f404ae12ff164b319c5">unlockScreen</a> (Request $request)</td></tr>
<tr class="memdesc:acb00adc5ddc29f404ae12ff164b319c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza las gestiones necesarias para desbloquear la pantalla del sistema.  <br /></td></tr>
<tr class="separator:acb00adc5ddc29f404ae12ff164b319c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45835822d3af4f6b70500212c7da02ba" id="r_a45835822d3af4f6b70500212c7da02ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a45835822d3af4f6b70500212c7da02ba">update</a> (Request $request, <a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a> $user)</td></tr>
<tr class="memdesc:a45835822d3af4f6b70500212c7da02ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actualiza la información del usuario.  <br /></td></tr>
<tr class="separator:a45835822d3af4f6b70500212c7da02ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698ce548b2a4b383e1f8adfd09bce0b0" id="r_a698ce548b2a4b383e1f8adfd09bce0b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html#a698ce548b2a4b383e1f8adfd09bce0b0">userSettings</a> ()</td></tr>
<tr class="memdesc:a698ce548b2a4b383e1f8adfd09bce0b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gestiona la configuración de la cuenta de un usuario.  <br /></td></tr>
<tr class="separator:a698ce548b2a4b383e1f8adfd09bce0b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><p>Gestiona información de usuarios. </p>
<p>Controlador para gestionar usuarios</p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section user"><dt>Licencia:</dt><dd><a href="http://conocimientolibre.cenditel.gob.ve/licencia-de-software-v-1-3/">LICENCIA DE SOFTWARE CENDITEL</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00033">33</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
</div><h2 class="groupheader">Documentación de funciones miembro</h2>
<a id="a7dfc89b100526ec67b145baea4c4aa15" name="a7dfc89b100526ec67b145baea4c4aa15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfc89b100526ec67b145baea4c4aa15">&#9670;&#160;</a></span>assignAccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">assignAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra el formulario para la asignación de roles y permisos a usuarios. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td>Modelo de Usuario</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>
<p>Si el usuario es administrador y no tiene registro de permisos</p>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00415">415</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  416</span>    {</div>
<div class="line"><span class="lineno">  417</span>        <span class="keywordflow">if</span> ($user-&gt;hasRole(<span class="stringliteral">&#39;admin&#39;</span>) &amp;&amp; $user-&gt;permissions()-&gt;get()-&gt;isEmpty()) {<span class="comment"></span></div>
<div class="line"><span class="lineno">  418</span><span class="comment">            /** Si el usuario es administrador y no tiene registro de permisos */</span></div>
<div class="line"><span class="lineno">  419</span>            $user-&gt;syncPermissions(Permission::select(<span class="stringliteral">&#39;id&#39;</span>)-&gt;<span class="keyword">get</span>()-&gt;map(<span class="keyword">function</span> ($p) {</div>
<div class="line"><span class="lineno">  420</span>                <span class="keywordflow">return</span> $p-&gt;id;</div>
<div class="line"><span class="lineno">  421</span>            })-&gt;toArray());</div>
<div class="line"><span class="lineno">  422</span>        }</div>
<div class="line"><span class="lineno">  423</span> </div>
<div class="line"><span class="lineno">  424</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;admin.setting-user-access&#39;</span>, compact(<span class="stringliteral">&#39;user&#39;</span>));</div>
<div class="line"><span class="lineno">  425</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a435e7d7525d4bcd0ed5e34a469f3adf6" name="a435e7d7525d4bcd0ed5e34a469f3adf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a435e7d7525d4bcd0ed5e34a469f3adf6">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra el formulario para crear un nuevo registro de usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00056">56</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   57</span>    {</div>
<div class="line"><span class="lineno">   58</span>        $header = [</div>
<div class="line"><span class="lineno">   59</span>            <span class="stringliteral">&#39;route&#39;</span> =&gt; <span class="stringliteral">&#39;users.store&#39;</span>,</div>
<div class="line"><span class="lineno">   60</span>            <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;POST&#39;</span>,</div>
<div class="line"><span class="lineno">   61</span>            <span class="stringliteral">&#39;role&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>,</div>
<div class="line"><span class="lineno">   62</span>        ];</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>        <span class="comment">// Listado de los perfiles con datos de empleados</span></div>
<div class="line"><span class="lineno">   65</span>        $allPersons = Profile::whereNotNull(<span class="stringliteral">&#39;employee_id&#39;</span>)</div>
<div class="line"><span class="lineno">   66</span>            -&gt;whereNull(<span class="stringliteral">&#39;user_id&#39;</span>)</div>
<div class="line"><span class="lineno">   67</span>            -&gt;get([<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;first_name&#39;</span>, <span class="stringliteral">&#39;last_name&#39;</span>]);</div>
<div class="line"><span class="lineno">   68</span> </div>
<div class="line"><span class="lineno">   69</span>        $institutions = template_choices(<span class="stringliteral">&#39;App\Models\Institution&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>);</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;auth.register&#39;</span>, compact(<span class="stringliteral">&#39;header&#39;</span>, <span class="stringliteral">&#39;institutions&#39;</span>, <span class="stringliteral">&#39;allPersons&#39;</span>));</div>
<div class="line"><span class="lineno">   72</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ce9d7e767a3f3cf14e126dce7773ddb" name="a1ce9d7e767a3f3cf14e126dce7773ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ce9d7e767a3f3cf14e126dce7773ddb">&#9670;&#160;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Elimina un usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00332">332</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  333</span>    {</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">if</span> (auth()-&gt;user()-&gt;<span class="keywordtype">id</span> === $user-&gt;id) {</div>
<div class="line"><span class="lineno">  335</span>            <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  336</span>                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  337</span>                <span class="stringliteral">&#39;message&#39;</span> =&gt; __(<span class="stringliteral">&#39;Usted no puede eliminarse a si mismo&#39;</span>)</div>
<div class="line"><span class="lineno">  338</span>            ], 200);</div>
<div class="line"><span class="lineno">  339</span>        }</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>        $user-&gt;delete();</div>
<div class="line"><span class="lineno">  342</span>        session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;destroy&#39;</span>]);</div>
<div class="line"><span class="lineno">  343</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;record&#39;</span> =&gt; $user, <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Success&#39;</span>], 200);</div>
<div class="line"><span class="lineno">  344</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d282f6aedbdc5d785651627d247df08" name="a6d282f6aedbdc5d785651627d247df08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d282f6aedbdc5d785651627d247df08">&#9670;&#160;</a></span>edit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">edit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra el formulario para actualizar información de un usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00194">194</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>    {</div>
<div class="line"><span class="lineno">  196</span>        $header = [</div>
<div class="line"><span class="lineno">  197</span>            <span class="stringliteral">&#39;route&#39;</span> =&gt; [<span class="stringliteral">&#39;users.update&#39;</span>, $user-&gt;id],</div>
<div class="line"><span class="lineno">  198</span>            <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;PUT&#39;</span>,</div>
<div class="line"><span class="lineno">  199</span>            <span class="stringliteral">&#39;role&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>,</div>
<div class="line"><span class="lineno">  200</span>        ];</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>        <span class="comment">// Recuperar el modelo con la relación &#39;profile&#39;</span></div>
<div class="line"><span class="lineno">  203</span>        $model = $user-&gt;where(<span class="stringliteral">&#39;id&#39;</span>, $user-&gt;id)-&gt;with(<span class="stringliteral">&#39;profile&#39;</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>        <span class="comment">// Recuperar la lista de empleados que cumplen las condiciones</span></div>
<div class="line"><span class="lineno">  206</span>        $allPersons = Profile::where(<span class="keyword">function</span> ($query) use ($user) {</div>
<div class="line"><span class="lineno">  207</span>            $query-&gt;whereNull(<span class="stringliteral">&#39;user_id&#39;</span>)-&gt;orWhere(<span class="stringliteral">&#39;user_id&#39;</span>, $user-&gt;id);</div>
<div class="line"><span class="lineno">  208</span>        })-&gt;<span class="keyword">get</span>([<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;first_name&#39;</span>, <span class="stringliteral">&#39;last_name&#39;</span>, <span class="stringliteral">&#39;employee_id&#39;</span>]);</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>        <span class="comment">// Construir la lista de nombres completos</span></div>
<div class="line"><span class="lineno">  211</span>        $allPersons = $allPersons-&gt;mapWithKeys(<span class="keyword">function</span> ($person) {</div>
<div class="line"><span class="lineno">  212</span>            <span class="keywordflow">return</span> [$person-&gt;employee_id =&gt; $person-&gt;first_name . <span class="charliteral">&#39; &#39;</span> . $person-&gt;last_name];</div>
<div class="line"><span class="lineno">  213</span>        });</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>        $institutions = template_choices(<span class="stringliteral">&#39;App\Models\Institution&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>);</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordflow">return</span> view(</div>
<div class="line"><span class="lineno">  218</span>            <span class="stringliteral">&#39;auth.register&#39;</span>,</div>
<div class="line"><span class="lineno">  219</span>            compact(<span class="stringliteral">&#39;header&#39;</span>, <span class="stringliteral">&#39;model&#39;</span>, <span class="stringliteral">&#39;institutions&#39;</span>, <span class="stringliteral">&#39;allPersons&#39;</span>)</div>
<div class="line"><span class="lineno">  220</span>        );</div>
<div class="line"><span class="lineno">  221</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aba0d5b303383fb5b1fabb5fd01cd3800" name="aba0d5b303383fb5b1fabb5fd01cd3800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba0d5b303383fb5b1fabb5fd01cd3800">&#9670;&#160;</a></span>getAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene información de todos los usuarios registrados en el sistema. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00762">762</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  763</span>    {</div>
<div class="line"><span class="lineno">  764</span>        $users = User::select(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  765</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;records&#39;</span> =&gt; $users]);</div>
<div class="line"><span class="lineno">  766</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae66918171b54d502311874b6f828399a" name="ae66918171b54d502311874b6f828399a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66918171b54d502311874b6f828399a">&#9670;&#160;</a></span>getExpiredSessions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getExpiredSessions </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene la información de las sesiones activas e inactivas. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\Illuminate\Http\Request</td><td class="paramname">$request</td><td>Datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00799">799</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  800</span>    {</div>
<div class="line"><span class="lineno">  801</span>        <span class="keywordflow">if</span> (Auth::check()) {</div>
<div class="line"><span class="lineno">  802</span>            <span class="comment">// La sesión del usuario está activa</span></div>
<div class="line"><span class="lineno">  803</span>            <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;active&#39;</span> =&gt; <span class="keyword">true</span>]);</div>
<div class="line"><span class="lineno">  804</span>        }</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>        <span class="comment">// La sesión del usuario no está activa</span></div>
<div class="line"><span class="lineno">  807</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;active&#39;</span> =&gt; <span class="keyword">false</span>], 401);</div>
<div class="line"><span class="lineno">  808</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bd48e81c906e4abdebda68cc548c34a" name="a2bd48e81c906e4abdebda68cc548c34a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd48e81c906e4abdebda68cc548c34a">&#9670;&#160;</a></span>getLockScreenData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLockScreenData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene información acerca de la pantalla de bloqueo del sistema. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse Devuelve los datos correspondientes a la pantalla de bloqueo </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00679">679</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  680</span>    {</div>
<div class="line"><span class="lineno">  681</span>        $user = auth()-&gt;user();</div>
<div class="line"><span class="lineno">  682</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;lock_screen&#39;</span> =&gt; $user-&gt;lock_screen, <span class="stringliteral">&#39;time_lock&#39;</span> =&gt; $user-&gt;time_lock], 200);</div>
<div class="line"><span class="lineno">  683</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9bfe83965d039b53335aa33852589779" name="a9bfe83965d039b53335aa33852589779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bfe83965d039b53335aa33852589779">&#9670;&#160;</a></span>getRolesAndPermissions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getRolesAndPermissions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene los roles y permisos disponibles. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse JSON con información de los roles y permisos </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00353">353</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  354</span>    {</div>
<div class="line"><span class="lineno">  355</span>        <span class="comment">// Objeto con información de roles registrados</span></div>
<div class="line"><span class="lineno">  356</span>        $roles = Role::with(<span class="stringliteral">&#39;permissions&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  357</span>        <span class="comment">// Objeto con información de los permisos registrados</span></div>
<div class="line"><span class="lineno">  358</span>        $permissions = Permission::with(<span class="stringliteral">&#39;roles&#39;</span>)-&gt;orderBy(<span class="stringliteral">&#39;model_prefix&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;roles&#39;</span> =&gt; $roles, <span class="stringliteral">&#39;permissions&#39;</span> =&gt; $permissions], 200);</div>
<div class="line"><span class="lineno">  360</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a149eb92716c1084a935e04a8d95f7347" name="a149eb92716c1084a935e04a8d95f7347"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a149eb92716c1084a935e04a8d95f7347">&#9670;&#160;</a></span>index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">index </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listado de todos los registros de los usuarios. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00044">44</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span>    {</div>
<div class="line"><span class="lineno">   46</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;admin.setting-users&#39;</span>);</div>
<div class="line"><span class="lineno">   47</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a342adf348321f63adfc7b2f17ed281df" name="a342adf348321f63adfc7b2f17ed281df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a342adf348321f63adfc7b2f17ed281df">&#9670;&#160;</a></span>indexRolesPermissions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">indexRolesPermissions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra un listado de roles y permisos de usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View Devuelve la vista correspondiente para mostrar el listado de roles y permisos </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00544">544</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  545</span>    {</div>
<div class="line"><span class="lineno">  546</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;admin.settings-access&#39;</span>);</div>
<div class="line"><span class="lineno">  547</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5183b2d30664a49a58784512555692e6" name="a5183b2d30664a49a58784512555692e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5183b2d30664a49a58784512555692e6">&#9670;&#160;</a></span>info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra información del usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td>Objero que abstrae información del usuario</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse Devuelve los datos asociados al usuario </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00514">514</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  515</span>    {</div>
<div class="line"><span class="lineno">  516</span>        <span class="comment">// Arreglo con las relaciones a incorporar en la información del usuario</span></div>
<div class="line"><span class="lineno">  517</span>        $with = [];</div>
<div class="line"><span class="lineno">  518</span>        <span class="keywordflow">if</span> ($user-&gt;<a class="code hl_function" href="../../dc/d3b/classApp_1_1Models_1_1User.html#a7bd7264f00dc27e7316ac4382a1f0f4c">profile</a> !== <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno">  519</span>            $with[] = <span class="stringliteral">&#39;profile&#39;</span>;</div>
<div class="line"><span class="lineno">  520</span>        }</div>
<div class="line"><span class="lineno">  521</span>        <span class="keywordflow">if</span> ($user-&gt;roles !== <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno">  522</span>            $with[] = <span class="stringliteral">&#39;roles&#39;</span>;</div>
<div class="line"><span class="lineno">  523</span>        }</div>
<div class="line"><span class="lineno">  524</span>        <span class="keywordflow">if</span> ($user-&gt;permissions !== <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno">  525</span>            $with[] = <span class="stringliteral">&#39;permissions&#39;</span>;</div>
<div class="line"><span class="lineno">  526</span>        }</div>
<div class="line"><span class="lineno">  527</span> </div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordflow">if</span> (!empty($with)) {</div>
<div class="line"><span class="lineno">  529</span>            $user-&gt;with($with);</div>
<div class="line"><span class="lineno">  530</span>        }</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>        <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  533</span>            <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;user&#39;</span> =&gt; $user, <span class="stringliteral">&#39;permissions&#39;</span> =&gt; $user-&gt;getPermissions(),</div>
<div class="line"><span class="lineno">  534</span>        ], 200);</div>
<div class="line"><span class="lineno">  535</span>    }</div>
<div class="ttc" id="aclassApp_1_1Models_1_1User_html_a7bd7264f00dc27e7316ac4382a1f0f4c"><div class="ttname"><a href="../../dc/d3b/classApp_1_1Models_1_1User.html#a7bd7264f00dc27e7316ac4382a1f0f4c">App\Models\User\profile</a></div><div class="ttdeci">profile()</div><div class="ttdoc">Método que obtiene el perfil de un usuario.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d5e/app_2Models_2User_8php_source.html#l00099">app/Models/User.php:99</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../d1/d5e/app_2Models_2User_8php_source.html#l00099">User\profile()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController_a5183b2d30664a49a58784512555692e6_cgraph.png" border="0" usemap="#ad5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController_a5183b2d30664a49a58784512555692e6_cgraph" alt=""/></div>
<map name="ad5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController_a5183b2d30664a49a58784512555692e6_cgraph" id="ad5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController_a5183b2d30664a49a58784512555692e6_cgraph">
<area shape="rect" title="Muestra información del usuario." alt="" coords="5,5,52,31"/>
<area shape="rect" href="../../dc/d3b/classApp_1_1Models_1_1User.html#a7bd7264f00dc27e7316ac4382a1f0f4c" title="Método que obtiene el perfil de un usuario." alt="" coords="100,5,277,31"/>
<area shape="poly" title=" " alt="" coords="52,15,86,15,86,21,52,21"/>
</map>
</div>

</div>
</div>
<a id="a629ea2454d2e26ee54b8a888c4775590" name="a629ea2454d2e26ee54b8a888c4775590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a629ea2454d2e26ee54b8a888c4775590">&#9670;&#160;</a></span>restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">restore </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$userId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restaurar registro de usuario eliminado. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;integer</td><td class="paramname">$userId</td><td>Identificador del usuario a restaurar</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00819">819</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  820</span>    {</div>
<div class="line"><span class="lineno">  821</span>        $user = User::withTrashed()-&gt;find($userId);</div>
<div class="line"><span class="lineno">  822</span>        $user-&gt;restore();</div>
<div class="line"><span class="lineno">  823</span>        $user-&gt;profile-&gt;restore();</div>
<div class="line"><span class="lineno">  824</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>]);</div>
<div class="line"><span class="lineno">  825</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac177de66677ebcb21b702d839904bb0d" name="ac177de66677ebcb21b702d839904bb0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac177de66677ebcb21b702d839904bb0d">&#9670;&#160;</a></span>sendCredentials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sendCredentials </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Envía nuevas credenciales de acceso al usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\Illuminate\Http\Request</td><td class="paramname">$request</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00777">777</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  778</span>    {</div>
<div class="line"><span class="lineno">  779</span>        $user = User::find($request-&gt;id);</div>
<div class="line"><span class="lineno">  780</span>        <span class="keywordflow">if</span> (!$user) {</div>
<div class="line"><span class="lineno">  781</span>            <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>]);</div>
<div class="line"><span class="lineno">  782</span>        }</div>
<div class="line"><span class="lineno">  783</span>        $password = generate_hash();</div>
<div class="line"><span class="lineno">  784</span>        $user-&gt;password = Hash::make($password);</div>
<div class="line"><span class="lineno">  785</span>        $user-&gt;save();</div>
<div class="line"><span class="lineno">  786</span>        $user-&gt;notify(<span class="keyword">new</span> UserRegistered($user, $password, <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  787</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>]);</div>
<div class="line"><span class="lineno">  788</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a47605dabaa715d9459137a0a518e23a9" name="a47605dabaa715d9459137a0a518e23a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47605dabaa715d9459137a0a518e23a9">&#9670;&#160;</a></span>setAccess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setAccess </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asigna permisos de acceso a los usuarios del sistema. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Objeto con los datos de la petición </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00434">434</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  435</span>    {</div>
<div class="line"><span class="lineno">  436</span>        <span class="comment">// Arreglo con reglas de validación</span></div>
<div class="line"><span class="lineno">  437</span>        $rules = [</div>
<div class="line"><span class="lineno">  438</span>            <span class="stringliteral">&#39;user&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">  439</span>            <span class="stringliteral">&#39;role&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:permission&#39;</span>, <span class="stringliteral">&#39;array&#39;</span>],</div>
<div class="line"><span class="lineno">  440</span>            <span class="stringliteral">&#39;permission&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:role&#39;</span>, <span class="stringliteral">&#39;array&#39;</span>, <span class="stringliteral">&#39;min:1&#39;</span>],</div>
<div class="line"><span class="lineno">  441</span>        ];</div>
<div class="line"><span class="lineno">  442</span>        <span class="comment">// Arreglo con mensajes de validación</span></div>
<div class="line"><span class="lineno">  443</span>        $messages = [</div>
<div class="line"><span class="lineno">  444</span>            <span class="stringliteral">&#39;user.required&#39;</span> =&gt; __(<span class="stringliteral">&#39;Se requiere de un usuario para asignar roles y permisos&#39;</span>),</div>
<div class="line"><span class="lineno">  445</span>            <span class="stringliteral">&#39;role.max&#39;</span> =&gt; __(<span class="stringliteral">&#39;Solo puede asignar un rol al usuario&#39;</span>),</div>
<div class="line"><span class="lineno">  446</span>            <span class="stringliteral">&#39;permission.min&#39;</span> =&gt; __(<span class="stringliteral">&#39;Se requiere al menos un permiso asignado al usuario&#39;</span>),</div>
<div class="line"><span class="lineno">  447</span>        ];</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>        <span class="comment">// Objeto con información de un usuario</span></div>
<div class="line"><span class="lineno">  450</span>        $user = User::find($request-&gt;user);</div>
<div class="line"><span class="lineno">  451</span>        <span class="keywordflow">if</span> (!$user &amp;&amp; $request?-&gt;user?-&gt;<span class="keywordtype">id</span>) {</div>
<div class="line"><span class="lineno">  452</span>            $user = User::find($request-&gt;user-&gt;id);</div>
<div class="line"><span class="lineno">  453</span>        }</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>        <span class="keywordflow">if</span> (isset($request-&gt;role)) {</div>
<div class="line"><span class="lineno">  456</span>            <span class="keywordflow">foreach</span> ($request-&gt;role as $role) {</div>
<div class="line"><span class="lineno">  457</span>                <span class="keywordflow">if</span> (Role::find($role)-&gt;permissions-&gt;isEmpty()) {</div>
<div class="line"><span class="lineno">  458</span>                    $rules[<span class="stringliteral">&#39;permission&#39;</span>] = str_replace(<span class="stringliteral">&#39;required_without:role&#39;</span>, <span class="stringliteral">&#39;required&#39;</span>, $rules[<span class="stringliteral">&#39;permission&#39;</span>]);</div>
<div class="line"><span class="lineno">  459</span>                    <span class="keywordflow">if</span> (count($request-&gt;role) &gt; 1) {</div>
<div class="line"><span class="lineno">  460</span>                        <span class="comment">// Mensaje a mostrar en la validación de roles</span></div>
<div class="line"><span class="lineno">  461</span>                        $msg = __(</div>
<div class="line"><span class="lineno">  462</span>                            <span class="stringliteral">&#39;Uno de los roles seleccionados no tiene permisos asignados, &#39;</span> .</div>
<div class="line"><span class="lineno">  463</span>                                <span class="stringliteral">&#39;debe indicar los permisos de acceso&#39;</span></div>
<div class="line"><span class="lineno">  464</span>                        );</div>
<div class="line"><span class="lineno">  465</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  466</span>                        <span class="comment">// Mensaje a mostrar en la validación de roles</span></div>
<div class="line"><span class="lineno">  467</span>                        $msg = __(</div>
<div class="line"><span class="lineno">  468</span>                            <span class="stringliteral">&#39;El rol seleccionado no tiene permisos asignados, &#39;</span> .</div>
<div class="line"><span class="lineno">  469</span>                            <span class="stringliteral">&#39;debe indicar los permisos de acceso&#39;</span></div>
<div class="line"><span class="lineno">  470</span>                        );</div>
<div class="line"><span class="lineno">  471</span>                    }</div>
<div class="line"><span class="lineno">  472</span>                    $messages[<span class="stringliteral">&#39;permission.required&#39;</span>] = $msg;</div>
<div class="line"><span class="lineno">  473</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  474</span>                }</div>
<div class="line"><span class="lineno">  475</span>            }</div>
<div class="line"><span class="lineno">  476</span>        }</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>        $this-&gt;validate($request, $rules, $messages);</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>        $roleUser = RoleUser::where(<span class="stringliteral">&#39;user_id&#39;</span>, $user-&gt;id)-&gt;get();</div>
<div class="line"><span class="lineno">  481</span>        <span class="keywordflow">foreach</span> ($roleUser as $ru) {</div>
<div class="line"><span class="lineno">  482</span>            $ru-&gt;delete();</div>
<div class="line"><span class="lineno">  483</span>        }</div>
<div class="line"><span class="lineno">  484</span>        $permissionUser = PermissionUser::where(<span class="stringliteral">&#39;user_id&#39;</span>, $user-&gt;id)-&gt;get();</div>
<div class="line"><span class="lineno">  485</span>        <span class="keywordflow">foreach</span> ($permissionUser as $pu) {</div>
<div class="line"><span class="lineno">  486</span>            $pu-&gt;delete();</div>
<div class="line"><span class="lineno">  487</span>        }</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordflow">if</span> (isset($request-&gt;role)) {</div>
<div class="line"><span class="lineno">  490</span>            $user-&gt;syncRoles($request-&gt;role);</div>
<div class="line"><span class="lineno">  491</span>        }</div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">if</span> (isset($request-&gt;permission)) {</div>
<div class="line"><span class="lineno">  493</span>            $user-&gt;syncPermissions($request-&gt;permission);</div>
<div class="line"><span class="lineno">  494</span>        }</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>        $request-&gt;session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;store&#39;</span>]);</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordflow">if</span> ($request-&gt;ajax() || $request-&gt;api == <span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">  499</span>            <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>], 200);</div>
<div class="line"><span class="lineno">  500</span>        }</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordflow">return</span> redirect()-&gt;route(<span class="stringliteral">&#39;index&#39;</span>);</div>
<div class="line"><span class="lineno">  503</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ae6bd7e645a723cc4749a105d4cee76" name="a4ae6bd7e645a723cc4749a105d4cee76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ae6bd7e645a723cc4749a105d4cee76">&#9670;&#160;</a></span>setAdminUserSetting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setAdminUserSetting </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establece la configuración de un usuario desde el panel administrativo. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Datos de la petición </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00629">629</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  630</span>    {</div>
<div class="line"><span class="lineno">  631</span>        $user = User::find($request-&gt;user_id);</div>
<div class="line"><span class="lineno">  632</span>        $user-&gt;blocked_at = ($request-&gt;blocked_at === <span class="keyword">true</span>) ? Carbon::now() : <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  633</span>        $user-&gt;active = ($request-&gt;active === <span class="keyword">true</span>) ? <span class="keyword">true</span> : false;</div>
<div class="line"><span class="lineno">  634</span>        $user-&gt;save();</div>
<div class="line"><span class="lineno">  635</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>], 200);</div>
<div class="line"><span class="lineno">  636</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c158bcaff242fca5f50789fbaeba0f7" name="a8c158bcaff242fca5f50789fbaeba0f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c158bcaff242fca5f50789fbaeba0f7">&#9670;&#160;</a></span>setLockScreenData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setLockScreenData </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actualiza información de la pantalla de bloqueo del sistema. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse Devuelve el resultado de la operación </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00694">694</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  695</span>    {</div>
<div class="line"><span class="lineno">  696</span>        <span class="comment">// Objeto con información de un usuario</span></div>
<div class="line"><span class="lineno">  697</span>        $user = User::find(auth()-&gt;user()-&gt;<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  698</span>        $user-&gt;lock_screen = $request-&gt;lock_screen;</div>
<div class="line"><span class="lineno">  699</span>        $user-&gt;save();</div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>], 200);</div>
<div class="line"><span class="lineno">  701</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3269e0654e48445c6f9553d544d49d30" name="a3269e0654e48445c6f9553d544d49d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3269e0654e48445c6f9553d544d49d30">&#9670;&#160;</a></span>setMyNotifications()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setMyNotifications </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gestiona la configuración de notificaciones establecida por el usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Objeto con información de la petición </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00645">645</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  646</span>    {</div>
<div class="line"><span class="lineno">  647</span>        <span class="comment">// Objeto con información de las configuraciones del usuario a establecer</span></div>
<div class="line"><span class="lineno">  648</span>        $fields = $request-&gt;all();</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>        <span class="keywordflow">if</span> (count($fields) &gt; 1) {</div>
<div class="line"><span class="lineno">  651</span>            auth()-&gt;user()-&gt;notificationSettings()-&gt;detach();</div>
<div class="line"><span class="lineno">  652</span>            <span class="comment">// Arreglo con los identificadores de las configuraciones de notificaciones</span></div>
<div class="line"><span class="lineno">  653</span>            $notifications = [];</div>
<div class="line"><span class="lineno">  654</span>            <span class="keywordflow">foreach</span> ($fields as $keyField =&gt; $valueField) {</div>
<div class="line"><span class="lineno">  655</span>                <span class="keywordflow">if</span> ($keyField === <span class="stringliteral">&#39;_token&#39;</span>) {</div>
<div class="line"><span class="lineno">  656</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  657</span>                }</div>
<div class="line"><span class="lineno">  658</span>                <span class="comment">// Objeto con información de la configuración de notificación</span></div>
<div class="line"><span class="lineno">  659</span>                $notifySetting = NotificationSetting::where(<span class="stringliteral">&#39;slug&#39;</span>, $keyField)-&gt;first();</div>
<div class="line"><span class="lineno">  660</span> </div>
<div class="line"><span class="lineno">  661</span>                <span class="keywordflow">if</span> ($notifySetting) {</div>
<div class="line"><span class="lineno">  662</span>                    array_push($notifications, $notifySetting-&gt;id);</div>
<div class="line"><span class="lineno">  663</span>                }</div>
<div class="line"><span class="lineno">  664</span>            }</div>
<div class="line"><span class="lineno">  665</span>            auth()-&gt;user()-&gt;notificationSettings()-&gt;sync($notifications);</div>
<div class="line"><span class="lineno">  666</span>        }</div>
<div class="line"><span class="lineno">  667</span> </div>
<div class="line"><span class="lineno">  668</span>        $request-&gt;session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;store&#39;</span>]);</div>
<div class="line"><span class="lineno">  669</span>        <span class="keywordflow">return</span> redirect()-&gt;route(<span class="stringliteral">&#39;my.settings&#39;</span>);</div>
<div class="line"><span class="lineno">  670</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a386a39316c04607fe17ed391c99defe6" name="a386a39316c04607fe17ed391c99defe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a386a39316c04607fe17ed391c99defe6">&#9670;&#160;</a></span>setRolesAndPermissions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setRolesAndPermissions </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configuración de permisos asociados a roles de usuarios. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse Retorna la vista que ejecuta la acción junto con el mensaje al usuario </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00371">371</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  372</span>    {</div>
<div class="line"><span class="lineno">  373</span>        $this-&gt;validate($request, [</div>
<div class="line"><span class="lineno">  374</span>            <span class="stringliteral">&#39;roles_attach_permissions&#39;</span> =&gt; <span class="stringliteral">&#39;required|array|min:1&#39;</span>,</div>
<div class="line"><span class="lineno">  375</span>        ], [</div>
<div class="line"><span class="lineno">  376</span>            <span class="stringliteral">&#39;roles_attach_permissions.required&#39;</span> =&gt; __(<span class="stringliteral">&#39;Se requiere asignar al menos un permiso a un rol&#39;</span>),</div>
<div class="line"><span class="lineno">  377</span>        ]);</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>        <span class="keywordflow">foreach</span> (Role::all() as $r) {</div>
<div class="line"><span class="lineno">  380</span>            $r-&gt;detachAllPermissions();</div>
<div class="line"><span class="lineno">  381</span>        }</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>        <span class="comment">// Arreglo con listado de roles y permisos asociados</span></div>
<div class="line"><span class="lineno">  384</span>        $rolesAndPerms = [];</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>        <span class="comment">// Crea un arreglo de permisos asociados a los diferentes roles seleccionados</span></div>
<div class="line"><span class="lineno">  387</span>        <span class="keywordflow">foreach</span> ($request-&gt;roles_attach_permissions as $role_perm) {</div>
<div class="line"><span class="lineno">  388</span>            list($role_id, $perm_id) = explode(<span class="stringliteral">&quot;_&quot;</span>, $role_perm);</div>
<div class="line"><span class="lineno">  389</span>            <span class="keywordflow">if</span> (!array_key_exists($role_id, $rolesAndPerms)) {</div>
<div class="line"><span class="lineno">  390</span>                $rolesAndPerms[$role_id] = [];</div>
<div class="line"><span class="lineno">  391</span>            }</div>
<div class="line"><span class="lineno">  392</span>            array_push($rolesAndPerms[$role_id], $perm_id);</div>
<div class="line"><span class="lineno">  393</span>        }</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>        <span class="comment">// Asigna los distintos permisos a los roles</span></div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">foreach</span> ($rolesAndPerms as $roleId =&gt; $roleValues) {</div>
<div class="line"><span class="lineno">  397</span>            $role = Role::find($roleId);</div>
<div class="line"><span class="lineno">  398</span>            <span class="keywordflow">if</span> ($role) {</div>
<div class="line"><span class="lineno">  399</span>                $role-&gt;syncPermissions($roleValues);</div>
<div class="line"><span class="lineno">  400</span>            }</div>
<div class="line"><span class="lineno">  401</span>        }</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>], 200);</div>
<div class="line"><span class="lineno">  404</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6dbc843b73ff2640c1f584ca26b3df94" name="a6dbc843b73ff2640c1f584ca26b3df94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dbc843b73ff2640c1f584ca26b3df94">&#9670;&#160;</a></span>setUserSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setUserSettings </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establece la configuración personalizada de un usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Objeto con datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>RedirectResponse redirecciona a la página de configuración del usuario </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00608">608</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  609</span>    {</div>
<div class="line"><span class="lineno">  610</span>        <span class="comment">// Objeto con información de un usuario</span></div>
<div class="line"><span class="lineno">  611</span>        $user = User::find(auth()-&gt;user()-&gt;<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  612</span>        $user-&gt;lock_screen = (!is_null($request-&gt;lock_screen));</div>
<div class="line"><span class="lineno">  613</span>        $user-&gt;time_lock =  ((bool) $request-&gt;lock_screen)</div>
<div class="line"><span class="lineno">  614</span>            ? (($request-&gt;time_lock &gt; 0) ? $request-&gt;time_lock : 10)</div>
<div class="line"><span class="lineno">  615</span>            : 0;</div>
<div class="line"><span class="lineno">  616</span>        $user-&gt;save();</div>
<div class="line"><span class="lineno">  617</span>        $request-&gt;session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;store&#39;</span>]);</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>        <span class="keywordflow">return</span> redirect()-&gt;route(<span class="stringliteral">&#39;my.settings&#39;</span>);</div>
<div class="line"><span class="lineno">  620</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a4964eb0b83cafb88c6bd02f9e71020" name="a6a4964eb0b83cafb88c6bd02f9e71020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a4964eb0b83cafb88c6bd02f9e71020">&#9670;&#160;</a></span>show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">show </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Muestra información acerca del usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00163">163</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  164</span>    {</div>
<div class="line"><span class="lineno">  165</span>        <span class="comment">// Objeto con información del usuario</span></div>
<div class="line"><span class="lineno">  166</span>        $model = $user;</div>
<div class="line"><span class="lineno">  167</span>        <span class="comment">// Atributos del formulario para la gestión de usuarios</span></div>
<div class="line"><span class="lineno">  168</span>        $header = [</div>
<div class="line"><span class="lineno">  169</span>            <span class="stringliteral">&#39;route&#39;</span> =&gt; [<span class="stringliteral">&#39;users.update&#39;</span>, $user-&gt;id], <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;PUT&#39;</span>, <span class="stringliteral">&#39;role&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>, <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>,</div>
<div class="line"><span class="lineno">  170</span>        ];</div>
<div class="line"><span class="lineno">  171</span>        $directory = User::with([<span class="stringliteral">&#39;profile&#39;</span> =&gt; <span class="keyword">function</span> ($q) {</div>
<div class="line"><span class="lineno">  172</span>            $q-&gt;with(<span class="stringliteral">&#39;image&#39;</span>);</div>
<div class="line"><span class="lineno">  173</span>        }])-&gt;where(</div>
<div class="line"><span class="lineno">  174</span>            <span class="stringliteral">&#39;id&#39;</span>,</div>
<div class="line"><span class="lineno">  175</span>            <span class="stringliteral">&#39;&lt;&gt;&#39;</span>,</div>
<div class="line"><span class="lineno">  176</span>            auth()-&gt;user()-&gt;<span class="keywordtype">id</span></div>
<div class="line"><span class="lineno">  177</span>        )-&gt;where(</div>
<div class="line"><span class="lineno">  178</span>            <span class="stringliteral">&#39;username&#39;</span>,</div>
<div class="line"><span class="lineno">  179</span>            <span class="stringliteral">&#39;&lt;&gt;&#39;</span>,</div>
<div class="line"><span class="lineno">  180</span>            <span class="stringliteral">&#39;admin&#39;</span></div>
<div class="line"><span class="lineno">  181</span>        )-&gt;get()-&gt;toArray();</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;auth.profile&#39;</span>, compact(<span class="stringliteral">&#39;model&#39;</span>, <span class="stringliteral">&#39;header&#39;</span>, <span class="stringliteral">&#39;directory&#39;</span>));</div>
<div class="line"><span class="lineno">  183</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ef485163104597c12185b53cdacf638" name="a9ef485163104597c12185b53cdacf638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ef485163104597c12185b53cdacf638">&#9670;&#160;</a></span>store()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">store </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registra un nuevo usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>RedirectResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00083">83</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>    {</div>
<div class="line"><span class="lineno">   85</span>        $this-&gt;validate(</div>
<div class="line"><span class="lineno">   86</span>            $request,</div>
<div class="line"><span class="lineno">   87</span>            [</div>
<div class="line"><span class="lineno">   88</span>                <span class="stringliteral">&#39;first_name&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:staff&#39;</span>],</div>
<div class="line"><span class="lineno">   89</span>                <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>],</div>
<div class="line"><span class="lineno">   90</span>                <span class="stringliteral">&#39;email&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;email&#39;</span>, <span class="stringliteral">&#39;max:255&#39;</span>, <span class="stringliteral">&#39;unique:users&#39;</span>],</div>
<div class="line"><span class="lineno">   91</span>                <span class="stringliteral">&#39;username&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;max:25&#39;</span>, <span class="stringliteral">&#39;unique:users&#39;</span>],</div>
<div class="line"><span class="lineno">   92</span>                <span class="stringliteral">&#39;role&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:permission&#39;</span>, <span class="stringliteral">&#39;array&#39;</span>],</div>
<div class="line"><span class="lineno">   93</span>                <span class="stringliteral">&#39;permission&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:role&#39;</span>, <span class="stringliteral">&#39;array&#39;</span>],</div>
<div class="line"><span class="lineno">   94</span>            ],</div>
<div class="line"><span class="lineno">   95</span>            [</div>
<div class="line"><span class="lineno">   96</span>                <span class="stringliteral">&#39;first_name.required_without&#39;</span> =&gt; __(</div>
<div class="line"><span class="lineno">   97</span>                    <span class="stringliteral">&#39;El campo nombre es requerido cuando no se ha seleccionado un empleado&#39;</span></div>
<div class="line"><span class="lineno">   98</span>                ),</div>
<div class="line"><span class="lineno">   99</span>                <span class="stringliteral">&#39;institution_id.required&#39;</span> =&gt; __(<span class="stringliteral">&#39;El campo institución es obligatorio&#39;</span>),</div>
<div class="line"><span class="lineno">  100</span>                <span class="stringliteral">&#39;role.required_without&#39;</span> =&gt; __(</div>
<div class="line"><span class="lineno">  101</span>                    <span class="stringliteral">&#39;El campo roles es obligatorio cuando no se asignado al menos un permiso.&#39;</span></div>
<div class="line"><span class="lineno">  102</span>                ),</div>
<div class="line"><span class="lineno">  103</span>                <span class="stringliteral">&#39;permission.required_without&#39;</span> =&gt; __(</div>
<div class="line"><span class="lineno">  104</span>                    <span class="stringliteral">&#39;El campo permisos es obligatorio cuando no se asignado al menos un rol.&#39;</span></div>
<div class="line"><span class="lineno">  105</span>                ),</div>
<div class="line"><span class="lineno">  106</span>            ]</div>
<div class="line"><span class="lineno">  107</span>        );</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">if</span> ($request-&gt;staff) {</div>
<div class="line"><span class="lineno">  110</span>            <span class="comment">// Objeto con información del perfil del usuario</span></div>
<div class="line"><span class="lineno">  111</span>            $profile = Profile::find($request-&gt;staff);</div>
<div class="line"><span class="lineno">  112</span>        }</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>        <span class="comment">// Hash con una contraseña generada aleatoriamente</span></div>
<div class="line"><span class="lineno">  115</span>        $password = generate_hash();</div>
<div class="line"><span class="lineno">  116</span>        <span class="comment">// Objeto con información del usuario registrado</span></div>
<div class="line"><span class="lineno">  117</span>        $user = User::create([</div>
<div class="line"><span class="lineno">  118</span>            <span class="stringliteral">&#39;name&#39;</span> =&gt; (!isset($profile)) ? $request-&gt;first_name : trim($profile-&gt;first_name . <span class="stringliteral">&#39; &#39;</span> . $profile-&gt;last_name ?? <span class="stringliteral">&#39;&#39;</span>),</div>
<div class="line"><span class="lineno">  119</span>            <span class="stringliteral">&#39;email&#39;</span> =&gt; $request-&gt;email,</div>
<div class="line"><span class="lineno">  120</span>            <span class="stringliteral">&#39;username&#39;</span> =&gt; $request-&gt;username,</div>
<div class="line"><span class="lineno">  121</span>            <span class="stringliteral">&#39;password&#39;</span> =&gt; bcrypt($password),</div>
<div class="line"><span class="lineno">  122</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; 2,</div>
<div class="line"><span class="lineno">  123</span>            <span class="stringliteral">&#39;email_verified_at&#39;</span> =&gt; (config(<span class="stringliteral">&#39;active-directory.enabled&#39;</span>)) ? Carbon::now() : null,</div>
<div class="line"><span class="lineno">  124</span>        ]);</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> (!$request-&gt;staff) {</div>
<div class="line"><span class="lineno">  127</span>            <span class="comment">// Instancia al modelo de perfil de usuario</span></div>
<div class="line"><span class="lineno">  128</span>            $profile = <span class="keyword">new</span> Profile();</div>
<div class="line"><span class="lineno">  129</span>            $profile-&gt;first_name = $request-&gt;first_name;</div>
<div class="line"><span class="lineno">  130</span>        }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>        $profile-&gt;user_id = $user-&gt;id;</div>
<div class="line"><span class="lineno">  133</span>        $profile-&gt;institution_id = $request-&gt;institution_id;</div>
<div class="line"><span class="lineno">  134</span>        $profile-&gt;save();</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">if</span> (isset($request-&gt;role)) {</div>
<div class="line"><span class="lineno">  137</span>            <span class="comment">// Asigna los roles al usuario</span></div>
<div class="line"><span class="lineno">  138</span>            $user-&gt;syncRoles($request-&gt;role);</div>
<div class="line"><span class="lineno">  139</span>        }</div>
<div class="line"><span class="lineno">  140</span>        <span class="keywordflow">if</span> (isset($request-&gt;permission)) {</div>
<div class="line"><span class="lineno">  141</span>            <span class="comment">// Asigna los permisos al usuario</span></div>
<div class="line"><span class="lineno">  142</span>            $user-&gt;syncPermissions($request-&gt;permission);</div>
<div class="line"><span class="lineno">  143</span>        }</div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>        $user-&gt;notify(<span class="keyword">new</span> UserRegistered($user, $password));</div>
<div class="line"><span class="lineno">  146</span>        <span class="keywordflow">if</span> (!config(<span class="stringliteral">&#39;active-directory.enabled&#39;</span>)) {</div>
<div class="line"><span class="lineno">  147</span>            $user-&gt;sendEmailVerificationNotification();</div>
<div class="line"><span class="lineno">  148</span>        }</div>
<div class="line"><span class="lineno">  149</span>        $request-&gt;session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;store&#39;</span>]);</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordflow">return</span> redirect()-&gt;route(<span class="stringliteral">&#39;users.index&#39;</span>);</div>
<div class="line"><span class="lineno">  152</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a67f4ff005fbb573159370df2a33ee578" name="a67f4ff005fbb573159370df2a33ee578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f4ff005fbb573159370df2a33ee578">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unlock </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Desbloquea un usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Datos de la petición </td></tr>
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td>Usuario a desbloquear</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse$user-&gt;blocked_at = \Illuminate\Support\Facades\Date::setNull();$user-&gt;blocked_at = \Illuminate\Support\Facades\Date::setNull(); </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00747">747</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  748</span>    {</div>
<div class="line"><span class="lineno">  749</span>        $user-&gt;blocked_at = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  750</span>        $user-&gt;save();</div>
<div class="line"><span class="lineno">  751</span>        $request-&gt;session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;other&#39;</span>, <span class="stringliteral">&#39;text&#39;</span> =&gt; <span class="stringliteral">&#39;Usuario desbloqueado&#39;</span>]);</div>
<div class="line"><span class="lineno">  752</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>], 200);</div>
<div class="line"><span class="lineno">  753</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb00adc5ddc29f404ae12ff164b319c5" name="acb00adc5ddc29f404ae12ff164b319c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb00adc5ddc29f404ae12ff164b319c5">&#9670;&#160;</a></span>unlockScreen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unlockScreen </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza las gestiones necesarias para desbloquear la pantalla del sistema. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td>Datos de la petición</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse Devuelve el resultado de la operación </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00712">712</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  713</span>    {</div>
<div class="line"><span class="lineno">  714</span>        <span class="comment">// Objeto con información de un usuario</span></div>
<div class="line"><span class="lineno">  715</span>        $user = User::where(<span class="stringliteral">&#39;username&#39;</span>, $request-&gt;username)-&gt;first();</div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>        <span class="comment">// Verifica si la contraseña es correcta, de lo contrario retorna falso</span></div>
<div class="line"><span class="lineno">  718</span>        <span class="keywordflow">if</span> (!Hash::check($request-&gt;password, $user-&gt;password)) {</div>
<div class="line"><span class="lineno">  719</span>            <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>], 200);</div>
<div class="line"><span class="lineno">  720</span>        }</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>        <span class="keywordflow">if</span> (!auth()-&gt;check()) {</div>
<div class="line"><span class="lineno">  723</span>            <span class="comment">// Objeto con información de las credenciales de acceso de un usuario</span></div>
<div class="line"><span class="lineno">  724</span>            $userCredentials = $request-&gt;only(<span class="stringliteral">&#39;username&#39;</span>, <span class="stringliteral">&#39;password&#39;</span>);</div>
<div class="line"><span class="lineno">  725</span>            <span class="keywordflow">if</span> (!Auth::attempt($userCredentials)) {</div>
<div class="line"><span class="lineno">  726</span>                <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>], 200);</div>
<div class="line"><span class="lineno">  727</span>            }</div>
<div class="line"><span class="lineno">  728</span>        }</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>        <span class="comment">// Actualiza el campo que determina si la pantalla de bloqueo esta o no activada</span></div>
<div class="line"><span class="lineno">  731</span>        $user-&gt;lock_screen = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  732</span>        $user-&gt;save();</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;new_csrf&#39;</span> =&gt; csrf_token()], 200);</div>
<div class="line"><span class="lineno">  735</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45835822d3af4f6b70500212c7da02ba" name="a45835822d3af4f6b70500212c7da02ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45835822d3af4f6b70500212c7da02ba">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update </td>
          <td>(</td>
          <td class="paramtype">Request&#160;</td>
          <td class="paramname"><em>$request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d3b/classApp_1_1Models_1_1User.html">User</a>&#160;</td>
          <td class="paramname"><em>$user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actualiza la información del usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Request</td><td class="paramname">$request</td><td></td></tr>
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>RedirectResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00233">233</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  234</span>    {</div>
<div class="line"><span class="lineno">  235</span>        <span class="keywordflow">if</span> (!$request-&gt;has(<span class="stringliteral">&#39;source&#39;</span>) || $request-&gt;source !== <span class="stringliteral">&#39;profile&#39;</span>) {</div>
<div class="line"><span class="lineno">  236</span>            $this-&gt;validate($request, [</div>
<div class="line"><span class="lineno">  237</span>                <span class="stringliteral">&#39;first_name&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:staff&#39;</span>],</div>
<div class="line"><span class="lineno">  238</span>                <span class="stringliteral">&#39;email&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;email&#39;</span>, <span class="stringliteral">&#39;max:255&#39;</span>, <span class="stringliteral">&#39;unique:users,email,&#39;</span> . $user-&gt;id],</div>
<div class="line"><span class="lineno">  239</span>                <span class="stringliteral">&#39;username&#39;</span> =&gt; [<span class="stringliteral">&#39;required&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;max:25&#39;</span>, <span class="stringliteral">&#39;unique:users,username,&#39;</span> . $user-&gt;id],</div>
<div class="line"><span class="lineno">  240</span>                <span class="stringliteral">&#39;role&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:permission&#39;</span>, <span class="stringliteral">&#39;array&#39;</span>],</div>
<div class="line"><span class="lineno">  241</span>                <span class="stringliteral">&#39;permission&#39;</span> =&gt; [<span class="stringliteral">&#39;required_without:role&#39;</span>, <span class="stringliteral">&#39;array&#39;</span>],</div>
<div class="line"><span class="lineno">  242</span>            ], [</div>
<div class="line"><span class="lineno">  243</span>                <span class="stringliteral">&#39;first_name.required_without&#39;</span> =&gt; __(</div>
<div class="line"><span class="lineno">  244</span>                    <span class="stringliteral">&#39;El campo nombre es requerido cuando no se ha seleccionado un empleado&#39;</span></div>
<div class="line"><span class="lineno">  245</span>                ),</div>
<div class="line"><span class="lineno">  246</span>            ]);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>            $user-&gt;name = $request-&gt;first_name;</div>
<div class="line"><span class="lineno">  249</span>            $user-&gt;email = $request-&gt;email;</div>
<div class="line"><span class="lineno">  250</span>            $user-&gt;username = $request-&gt;username;</div>
<div class="line"><span class="lineno">  251</span>            $user-&gt;save();</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>            $profile = Profile::where(<span class="stringliteral">&#39;user_id&#39;</span>, $user-&gt;id)-&gt;first();</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordflow">if</span> (!$request-&gt;staff &amp;&amp; !$profile) {</div>
<div class="line"><span class="lineno">  256</span>                <span class="comment">// Crear un nuevo perfil si no hay un empleado seleccionado y no hay perfil existente</span></div>
<div class="line"><span class="lineno">  257</span>                $profile = <span class="keyword">new</span> <a class="code hl_class" href="../../d9/de5/classApp_1_1Models_1_1Profile.html">Profile</a>();</div>
<div class="line"><span class="lineno">  258</span>            } elseif ($request-&gt;staff &amp;&amp; $profile) {</div>
<div class="line"><span class="lineno">  259</span>                <span class="comment">// Desasociar el perfil del usuario anterior</span></div>
<div class="line"><span class="lineno">  260</span>                $profile-&gt;user_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  261</span>                $profile-&gt;save();</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>                <span class="comment">// Encontrar o crear el perfil para el nuevo empleado</span></div>
<div class="line"><span class="lineno">  264</span>                $profile = Profile::where(<span class="stringliteral">&#39;employee_id&#39;</span>, $request-&gt;staff)-&gt;first() ?? <span class="keyword">new</span> Profile();</div>
<div class="line"><span class="lineno">  265</span>            }</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>            <span class="comment">// Asignar los valores al perfil</span></div>
<div class="line"><span class="lineno">  268</span>            $profile-&gt;user_id = $user-&gt;id;</div>
<div class="line"><span class="lineno">  269</span>            $profile-&gt;institution_id = $request-&gt;institution_id ?? $profile-&gt;institution_id ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  270</span>            $profile-&gt;first_name = $request-&gt;first_name;</div>
<div class="line"><span class="lineno">  271</span>            $profile-&gt;save();</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>            $roleUser = RoleUser::where(<span class="stringliteral">&#39;user_id&#39;</span>, $user-&gt;id)-&gt;get();</div>
<div class="line"><span class="lineno">  274</span>            <span class="keywordflow">if</span> ($roleUser) {</div>
<div class="line"><span class="lineno">  275</span>                <span class="keywordflow">foreach</span> ($roleUser as $ru) {</div>
<div class="line"><span class="lineno">  276</span>                    $ru-&gt;delete();</div>
<div class="line"><span class="lineno">  277</span>                }</div>
<div class="line"><span class="lineno">  278</span>            }</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>            $permissionUser = PermissionUser::where(<span class="stringliteral">&#39;user_id&#39;</span>, $user-&gt;id)-&gt;get();</div>
<div class="line"><span class="lineno">  281</span>            <span class="keywordflow">if</span> ($permissionUser) {</div>
<div class="line"><span class="lineno">  282</span>                <span class="keywordflow">foreach</span> ($permissionUser as $pu) {</div>
<div class="line"><span class="lineno">  283</span>                    $pu-&gt;delete();</div>
<div class="line"><span class="lineno">  284</span>                }</div>
<div class="line"><span class="lineno">  285</span>            }</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>            <span class="keywordflow">if</span> (isset($request-&gt;role)) {</div>
<div class="line"><span class="lineno">  288</span>                $user-&gt;detachAllRoles();</div>
<div class="line"><span class="lineno">  289</span>                $user-&gt;syncRoles($request-&gt;role);</div>
<div class="line"><span class="lineno">  290</span>            }</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>            <span class="keywordflow">if</span> (isset($request-&gt;permission)) {</div>
<div class="line"><span class="lineno">  293</span>                $user-&gt;detachAllPermissions();</div>
<div class="line"><span class="lineno">  294</span>                $user-&gt;syncPermissions($request-&gt;permission);</div>
<div class="line"><span class="lineno">  295</span>            }</div>
<div class="line"><span class="lineno">  296</span>        }</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">if</span> ($request-&gt;has(<span class="stringliteral">&#39;password&#39;</span>) &amp;&amp; $request-&gt;password !== <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno">  299</span>            $this-&gt;validate($request, [</div>
<div class="line"><span class="lineno">  300</span>                <span class="stringliteral">&#39;password&#39;</span> =&gt; [<span class="stringliteral">&#39;min:6&#39;</span>, <span class="stringliteral">&#39;confirmed&#39;</span>],</div>
<div class="line"><span class="lineno">  301</span>                <span class="stringliteral">&#39;password_confirmation&#39;</span> =&gt; [<span class="stringliteral">&#39;min:6&#39;</span>, <span class="stringliteral">&#39;required_with:password&#39;</span>],</div>
<div class="line"><span class="lineno">  302</span>                <span class="stringliteral">&#39;complexity-level&#39;</span> =&gt; [<span class="stringliteral">&#39;numeric&#39;</span>, <span class="stringliteral">&#39;min:43&#39;</span>, <span class="stringliteral">&#39;max:100&#39;</span>],</div>
<div class="line"><span class="lineno">  303</span>            ], [</div>
<div class="line"><span class="lineno">  304</span>                <span class="stringliteral">&#39;confirmed&#39;</span> =&gt; __(<span class="stringliteral">&#39;La contraseña no coincide con la verificación&#39;</span>),</div>
<div class="line"><span class="lineno">  305</span>                <span class="stringliteral">&#39;required_with&#39;</span> =&gt; __(<span class="stringliteral">&#39;Debe confirmar la nueva contraseña&#39;</span>),</div>
<div class="line"><span class="lineno">  306</span>                <span class="stringliteral">&#39;complexity-level.numeric&#39;</span> =&gt; __(<span class="stringliteral">&#39;No es posible determinar la complejidad de la contraseña&#39;</span>),</div>
<div class="line"><span class="lineno">  307</span>                <span class="stringliteral">&#39;complexity-level.min&#39;</span> =&gt; __(</div>
<div class="line"><span class="lineno">  308</span>                    <span class="stringliteral">&#39;Contraseña muy débil. Intente incorporar símbolos, letras y números, &#39;</span> .</div>
<div class="line"><span class="lineno">  309</span>                        <span class="stringliteral">&#39;en combinación con mayúsculas y minúsculas. &#39;</span> .</div>
<div class="line"><span class="lineno">  310</span>                        <span class="stringliteral">&#39;Por medidas de seguridad de los datos y de la aplicación, debe indicar una contraseña robusta&#39;</span></div>
<div class="line"><span class="lineno">  311</span>                ),</div>
<div class="line"><span class="lineno">  312</span>            ]);</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>            $user-&gt;password = bcrypt($request-&gt;input(<span class="stringliteral">&#39;password&#39;</span>));</div>
<div class="line"><span class="lineno">  315</span>            $user-&gt;save();</div>
<div class="line"><span class="lineno">  316</span>        }</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>        $request-&gt;session()-&gt;flash(<span class="stringliteral">&#39;message&#39;</span>, [<span class="stringliteral">&#39;type&#39;</span> =&gt; <span class="stringliteral">&#39;update&#39;</span>]);</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>        <span class="keywordflow">return</span> redirect()-&gt;route(<span class="stringliteral">&#39;users.index&#39;</span>);</div>
<div class="line"><span class="lineno">  321</span>    }</div>
<div class="ttc" id="aclassApp_1_1Models_1_1Profile_html"><div class="ttname"><a href="../../d9/de5/classApp_1_1Models_1_1Profile.html">App\Models\Profile</a></div><div class="ttdoc">Datos de Perfiles de usuario.</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d1a/app_2Models_2Profile_8php_source.html#l00030">app/Models/Profile.php:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a698ce548b2a4b383e1f8adfd09bce0b0" name="a698ce548b2a4b383e1f8adfd09bce0b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698ce548b2a4b383e1f8adfd09bce0b0">&#9670;&#160;</a></span>userSettings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">userSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gestiona la configuración de la cuenta de un usuario. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Roldan Vargas <a href="#" onclick="location.href='mai'+'lto:'+'rva'+'rg'+'as@'+'ce'+'ndi'+'te'+'l.g'+'ob'+'.ve'; return false;">rvarg<span class="obfuscator">.nosp@m.</span>as@c<span class="obfuscator">.nosp@m.</span>endit<span class="obfuscator">.nosp@m.</span>el.g<span class="obfuscator">.nosp@m.</span>ob.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'rol'+'da'+'ndv'+'g@'+'gma'+'il'+'.co'+'m'; return false;">rolda<span class="obfuscator">.nosp@m.</span>ndvg<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>\Illuminate\View\View Devuelve la vista para la configuración de la cuenta de usuario </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../d9/d07/UserController_8php_source.html#l00556">556</a> del archivo <a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  557</span>    {</div>
<div class="line"><span class="lineno">  558</span>        <span class="comment">// Objeto con información del usuario autenticado en la aplicación</span></div>
<div class="line"><span class="lineno">  559</span>        $user = auth()-&gt;user();</div>
<div class="line"><span class="lineno">  560</span>        <span class="comment">// Objeto con información de los permisos asociados a un usuario</span></div>
<div class="line"><span class="lineno">  561</span>        $userPermissions = $user-&gt;getPermissions()-&gt;where(<span class="stringliteral">&#39;slug&#39;</span>, <span class="stringliteral">&#39;&lt;&gt;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)-&gt;pluck(<span class="stringliteral">&#39;slug&#39;</span>)-&gt;toArray();</div>
<div class="line"><span class="lineno">  562</span>        <span class="comment">// Arreglo con información de los permisos asociados a notificaciones de usuarios</span></div>
<div class="line"><span class="lineno">  563</span>        $arr = array_filter($userPermissions, <span class="keyword">function</span> ($value, $index) {</div>
<div class="line"><span class="lineno">  564</span>            <span class="keywordflow">return</span> strpos($value, <span class="stringliteral">&#39;notify&#39;</span>) !== <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  565</span>        }, ARRAY_FILTER_USE_BOTH);</div>
<div class="line"><span class="lineno">  566</span>        <span class="comment">// Arreglo de permisos para notificaciones</span></div>
<div class="line"><span class="lineno">  567</span>        $userPermissions = $arr;</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>        <span class="comment">// Objeto con información de la configuración de notificaciones</span></div>
<div class="line"><span class="lineno">  570</span>        $notifySettings = NotificationSetting::whereIn(</div>
<div class="line"><span class="lineno">  571</span>            <span class="stringliteral">&#39;perm_required&#39;</span>,</div>
<div class="line"><span class="lineno">  572</span>            $userPermissions</div>
<div class="line"><span class="lineno">  573</span>        )-&gt;orWhereNull(<span class="stringliteral">&#39;perm_required&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>        <span class="comment">// Arreglo de notificaciones establecidas por el usuario</span></div>
<div class="line"><span class="lineno">  576</span>        $myNotifications = auth()-&gt;user()-&gt;notificationSettings()-&gt;select(<span class="stringliteral">&#39;slug&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  577</span>        $configuredNotify = [];</div>
<div class="line"><span class="lineno">  578</span>        <span class="keywordflow">foreach</span> ($myNotifications as $myNotify) {</div>
<div class="line"><span class="lineno">  579</span>            $configuredNotify[] = $myNotify-&gt;slug;</div>
<div class="line"><span class="lineno">  580</span>        }</div>
<div class="line"><span class="lineno">  581</span> </div>
<div class="line"><span class="lineno">  582</span>        <span class="comment">// Arreglo con los atributos del formulario para el registro de configuraciones del usuario</span></div>
<div class="line"><span class="lineno">  583</span>        $header_general_settings = [</div>
<div class="line"><span class="lineno">  584</span>            <span class="stringliteral">&#39;route&#39;</span> =&gt; <span class="stringliteral">&#39;set.my.settings&#39;</span>, <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;role&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>, <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>,</div>
<div class="line"><span class="lineno">  585</span>        ];</div>
<div class="line"><span class="lineno">  586</span>        <span class="comment">// Arreglo con los atributos del formulario para la configuraciones de notificaciones del usuario</span></div>
<div class="line"><span class="lineno">  587</span>        $header_notify_settings = [</div>
<div class="line"><span class="lineno">  588</span>            <span class="stringliteral">&#39;route&#39;</span> =&gt; <span class="stringliteral">&#39;set.my.notifications&#39;</span>, <span class="stringliteral">&#39;method&#39;</span> =&gt; <span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;role&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>, <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>,</div>
<div class="line"><span class="lineno">  589</span>        ];</div>
<div class="line"><span class="lineno">  590</span>        <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;auth.my-settings&#39;</span>, compact(</div>
<div class="line"><span class="lineno">  591</span>            <span class="stringliteral">&#39;user&#39;</span>,</div>
<div class="line"><span class="lineno">  592</span>            <span class="stringliteral">&#39;notifySettings&#39;</span>,</div>
<div class="line"><span class="lineno">  593</span>            <span class="stringliteral">&#39;header_notify_settings&#39;</span>,</div>
<div class="line"><span class="lineno">  594</span>            <span class="stringliteral">&#39;header_general_settings&#39;</span>,</div>
<div class="line"><span class="lineno">  595</span>            <span class="stringliteral">&#39;configuredNotify&#39;</span></div>
<div class="line"><span class="lineno">  596</span>        ));</div>
<div class="line"><span class="lineno">  597</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>La documentación de esta clase está generada del siguiente archivo:<ul>
<li><a class="el" href="../../d9/d07/UserController_8php_source.html">UserController.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>App</b></li><li class="navelem"><b>Http</b></li><li class="navelem"><b>Controllers</b></li><li class="navelem"><b>Auth</b></li><li class="navelem"><a class="el" href="../../d5/d9d/classApp_1_1Http_1_1Controllers_1_1Auth_1_1UserController.html">UserController</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
