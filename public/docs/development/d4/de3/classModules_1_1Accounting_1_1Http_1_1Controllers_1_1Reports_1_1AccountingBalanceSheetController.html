<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KAVAC: Referencia de la clase AccountingBalanceSheetController</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-doc.png"/></td>
  <td id="projectalign">
   <div id="projectname">KAVAC<span id="projectnumber">&#160;v1.0.5</span>
   </div>
   <div id="projectbrief">Sistema de Gestión Organizacional</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="#pro-attribs">Atributos protegidos</a>  </div>
  <div class="headertitle"><div class="title">Referencia de la clase AccountingBalanceSheetController</div></div>
</div><!--header-->
<div class="contents">

<p>Controlador para la generación del reporte de balance general.  
 <a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#details">Más...</a></p>

<p>Hereda de Controller.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Diagrama de colaboración de AccountingBalanceSheetController:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d5/d47/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController__coll__graph.png" border="0" usemap="#aAccountingBalanceSheetController_coll__map" alt="Collaboration graph"/></div>
<map name="aAccountingBalanceSheetController_coll__map" id="aAccountingBalanceSheetController_coll__map">
<area shape="rect" title="Controlador para la generación del reporte de balance general." alt="" coords="5,5,244,311"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr class="memitem:a095c5d389db211932136b53f25f39685" id="r_a095c5d389db211932136b53f25f39685"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a095c5d389db211932136b53f25f39685">__construct</a> ()</td></tr>
<tr class="memdesc:a095c5d389db211932136b53f25f39685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define la configuración de la clase.  <br /></td></tr>
<tr class="separator:a095c5d389db211932136b53f25f39685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ddffde595d12d9c85da6f4c1eb2605" id="r_ab0ddffde595d12d9c85da6f4c1eb2605"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a> ($convertions, $entry, $currency_id)</td></tr>
<tr class="memdesc:ab0ddffde595d12d9c85da6f4c1eb2605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encuentra los tipos de cambio.  <br /></td></tr>
<tr class="separator:ab0ddffde595d12d9c85da6f4c1eb2605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3d70e44a5afea25eb600c5e19f6a29" id="r_a6f3d70e44a5afea25eb600c5e19f6a29"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6f3d70e44a5afea25eb600c5e19f6a29">calculateOperation</a> ($convertions, $currency_id, $value, $date, $equalCurrency)</td></tr>
<tr class="memdesc:a6f3d70e44a5afea25eb600c5e19f6a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza la conversion de saldo.  <br /></td></tr>
<tr class="separator:a6f3d70e44a5afea25eb600c5e19f6a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e29f82d56bc92e45daa978c31e35cd6" id="r_a6e29f82d56bc92e45daa978c31e35cd6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6">calculateValuesInEntries</a> ($account)</td></tr>
<tr class="memdesc:a6e29f82d56bc92e45daa978c31e35cd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al último nivel de parentela solo se sumaran los valores de los asientos contables aprobados.  <br /></td></tr>
<tr class="separator:a6e29f82d56bc92e45daa978c31e35cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d7453ab9e51eca5ab50a38ce4a84c0" id="r_a23d7453ab9e51eca5ab50a38ce4a84c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0">export</a> ($report)</td></tr>
<tr class="memdesc:a23d7453ab9e51eca5ab50a38ce4a84c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en hojade calculo de balance general.  <br /></td></tr>
<tr class="separator:a23d7453ab9e51eca5ab50a38ce4a84c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa825cb7aedbc4c92b3fcc708263200bc" id="r_aa825cb7aedbc4c92b3fcc708263200bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa825cb7aedbc4c92b3fcc708263200bc">formatDataInArray</a> ($records, $initD, $endD, $level=1)</td></tr>
<tr class="memdesc:aa825cb7aedbc4c92b3fcc708263200bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sintetiza la información de una cuenta en un array con sus respectivas subcuentas.  <br /></td></tr>
<tr class="separator:aa825cb7aedbc4c92b3fcc708263200bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece89e986c4cfa1db456acdb13987406" id="r_aece89e986c4cfa1db456acdb13987406"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aece89e986c4cfa1db456acdb13987406">getAccountParents</a> ($childData, $parents=[])</td></tr>
<tr class="memdesc:aece89e986c4cfa1db456acdb13987406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Método para buscar las cuentas padre de una formulación.  <br /></td></tr>
<tr class="separator:aece89e986c4cfa1db456acdb13987406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c710b0ad0cd4c8f24081c8425443be9" id="r_a6c710b0ad0cd4c8f24081c8425443be9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6c710b0ad0cd4c8f24081c8425443be9">getCheckBreak</a> ()</td></tr>
<tr class="memdesc:a6c710b0ad0cd4c8f24081c8425443be9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene el valor de la bandera de salto de página.  <br /></td></tr>
<tr class="separator:a6c710b0ad0cd4c8f24081c8425443be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4412028831ce993246eb29b08f2ebb03" id="r_a4412028831ce993246eb29b08f2ebb03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a> ()</td></tr>
<tr class="memdesc:a4412028831ce993246eb29b08f2ebb03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene el listado de conversiones.  <br /></td></tr>
<tr class="separator:a4412028831ce993246eb29b08f2ebb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55459f9e07fdc6b85953811024ab61d3" id="r_a55459f9e07fdc6b85953811024ab61d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a> ()</td></tr>
<tr class="memdesc:a55459f9e07fdc6b85953811024ab61d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene la moneda.  <br /></td></tr>
<tr class="separator:a55459f9e07fdc6b85953811024ab61d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4c79afa7ea1ba7a95b832f2b6ab8ec4" id="r_aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a> ()</td></tr>
<tr class="memdesc:aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene el identificador de la moneda.  <br /></td></tr>
<tr class="separator:aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c67a4c228ee25967d4b59b72bc21bac" id="r_a5c67a4c228ee25967d4b59b72bc21bac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac">getLastTotalResults</a> ($formDate, $endDate, $lastAvalible)</td></tr>
<tr class="memdesc:a5c67a4c228ee25967d4b59b72bc21bac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el cálculo de las cuentas de acuerdo a como suman.  <br /></td></tr>
<tr class="separator:a5c67a4c228ee25967d4b59b72bc21bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db19fdd230ae36f5cadc50c61a451b0" id="r_a0db19fdd230ae36f5cadc50c61a451b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a> ($ini, $debit, $assets)</td></tr>
<tr class="memdesc:a0db19fdd230ae36f5cadc50c61a451b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el cálculo de las cuentas de acuerdo a como suman.  <br /></td></tr>
<tr class="separator:a0db19fdd230ae36f5cadc50c61a451b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc5a35a2b0439e6e613eeb2ed98f50dc" id="r_abc5a35a2b0439e6e613eeb2ed98f50dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc">getTotalResults</a> ($date, $formDate)</td></tr>
<tr class="memdesc:abc5a35a2b0439e6e613eeb2ed98f50dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Realiza el cálculo de las cuentas de acuerdo a como suman.  <br /></td></tr>
<tr class="separator:abc5a35a2b0439e6e613eeb2ed98f50dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0379fc68799a3f32447bd6760dcd02" id="r_a5c0379fc68799a3f32447bd6760dcd02"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02">pdf</a> ($report, $xml=false)</td></tr>
<tr class="memdesc:a5c0379fc68799a3f32447bd6760dcd02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de balance general.  <br /></td></tr>
<tr class="separator:a5c0379fc68799a3f32447bd6760dcd02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c281813aa2f3d73fe2c7089b2b7f03" id="r_a23c281813aa2f3d73fe2c7089b2b7f03"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23c281813aa2f3d73fe2c7089b2b7f03">pdfSign</a> ($report)</td></tr>
<tr class="memdesc:a23c281813aa2f3d73fe2c7089b2b7f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de balance general.  <br /></td></tr>
<tr class="separator:a23c281813aa2f3d73fe2c7089b2b7f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8cc7e992a9a4e0958361ae05c79d406" id="r_ac8cc7e992a9a4e0958361ae05c79d406"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ac8cc7e992a9a4e0958361ae05c79d406">pdfVue</a> ($date, $level, <a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a> $currency, $zero=false)</td></tr>
<tr class="memdesc:ac8cc7e992a9a4e0958361ae05c79d406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de balance general.  <br /></td></tr>
<tr class="separator:ac8cc7e992a9a4e0958361ae05c79d406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d7280e9d9218f3f62918686cd7906d" id="r_ab6d7280e9d9218f3f62918686cd7906d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab6d7280e9d9218f3f62918686cd7906d">pdfVueSign</a> ($date, $level, <a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a> $currency, $zero=false)</td></tr>
<tr class="memdesc:ab6d7280e9d9218f3f62918686cd7906d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Genera el reporte en pdf de balance general.  <br /></td></tr>
<tr class="separator:ab6d7280e9d9218f3f62918686cd7906d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678f5c49204c69d24b2b293794996ecd" id="r_a678f5c49204c69d24b2b293794996ecd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a678f5c49204c69d24b2b293794996ecd">setConvertions</a> ($convertions)</td></tr>
<tr class="memdesc:a678f5c49204c69d24b2b293794996ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece el listado de conversiones.  <br /></td></tr>
<tr class="separator:a678f5c49204c69d24b2b293794996ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9edafe924a4efeb9d1a9daf1bc1dfe" id="r_a4a9edafe924a4efeb9d1a9daf1bc1dfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a> ($currency)</td></tr>
<tr class="memdesc:a4a9edafe924a4efeb9d1a9daf1bc1dfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece la moneda.  <br /></td></tr>
<tr class="separator:a4a9edafe924a4efeb9d1a9daf1bc1dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Atributos protegidos</h2></td></tr>
<tr class="memitem:aa909c5b20912c383ac43c7e672007a1d" id="r_aa909c5b20912c383ac43c7e672007a1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = []</td></tr>
<tr class="memdesc:aa909c5b20912c383ac43c7e672007a1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lista de conversiones validas.  <br /></td></tr>
<tr class="separator:aa909c5b20912c383ac43c7e672007a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ec628a1048bd2ab581320d0aa1aed30" id="r_a6ec628a1048bd2ab581320d0aa1aed30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a> = null</td></tr>
<tr class="memdesc:a6ec628a1048bd2ab581320d0aa1aed30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moneda en la que se expresara el reporte.  <br /></td></tr>
<tr class="separator:a6ec628a1048bd2ab581320d0aa1aed30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a311b3d7033e348395d71484904c44767" id="r_a311b3d7033e348395d71484904c44767"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a311b3d7033e348395d71484904c44767">$PageBreakTrigger</a></td></tr>
<tr class="memdesc:a311b3d7033e348395d71484904c44767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establece el trigger de salto de página.  <br /></td></tr>
<tr class="separator:a311b3d7033e348395d71484904c44767"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<div class="textblock"><p>Controlador para la generación del reporte de balance general. </p>
<p>Clase que gestiona el reporte de balance general</p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section user"><dt>Licencia:</dt><dd><a href="http://conocimientolibre.cenditel.gob.ve/licencia-de-software-v-1-3/">LICENCIA DE SOFTWARE CENDITEL</a> </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00037">37</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
</div><h2 class="groupheader">Documentación de constructores y destructores</h2>
<a id="a095c5d389db211932136b53f25f39685" name="a095c5d389db211932136b53f25f39685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a095c5d389db211932136b53f25f39685">&#9670;&#160;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define la configuración de la clase. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00067">67</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>    {</div>
<div class="line"><span class="lineno">   69</span>        <span class="comment">// Establece permisos de acceso para cada método del controlador</span></div>
<div class="line"><span class="lineno">   70</span>        $this-&gt;middleware(<span class="stringliteral">&#39;permission:accounting.report.balancesheet&#39;</span>, [</div>
<div class="line"><span class="lineno">   71</span>            <span class="stringliteral">&#39;only&#39;</span> =&gt; [<span class="stringliteral">&#39;pdf&#39;</span>, <span class="stringliteral">&#39;pdfVue&#39;</span>, <span class="stringliteral">&#39;pdfSign&#39;</span>, <span class="stringliteral">&#39;pdfVueSign&#39;</span>],</div>
<div class="line"><span class="lineno">   72</span>        ]);</div>
<div class="line"><span class="lineno">   73</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentación de funciones miembro</h2>
<a id="ab0ddffde595d12d9c85da6f4c1eb2605" name="ab0ddffde595d12d9c85da6f4c1eb2605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0ddffde595d12d9c85da6f4c1eb2605">&#9670;&#160;</a></span>calculateExchangeRates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">calculateExchangeRates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$convertions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encuentra los tipos de cambio. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$convertions</td><td>Lista de conversiones </td></tr>
    <tr><td class="paramtype">AccountingEntry</td><td class="paramname">$entry</td><td>Asiento contable </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$currency_id</td><td>Identificador de la moneda a la cual se realizara la conversión</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>array Lista de conversiones actualizada </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01227">1227</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1228</span>    {</div>
<div class="line"><span class="lineno"> 1229</span>        $exchangeRate = ExchangeRate::where(<span class="stringliteral">&#39;active&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1230</span>            -&gt;whereIn(<span class="stringliteral">&#39;to_currency_id&#39;</span>, [$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], $currency_id])</div>
<div class="line"><span class="lineno"> 1231</span>            -&gt;whereIn(<span class="stringliteral">&#39;from_currency_id&#39;</span>, [$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], $currency_id])</div>
<div class="line"><span class="lineno"> 1232</span>            -&gt;orderBy(<span class="stringliteral">&#39;end_at&#39;</span>, <span class="stringliteral">&#39;DESC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno"> 1233</span>        <span class="keywordflow">if</span> (count($exchangeRate) != 0) {</div>
<div class="line"><span class="lineno"> 1234</span>            <span class="keywordflow">if</span> (!array_key_exists($entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)) {</div>
<div class="line"><span class="lineno"> 1235</span>                <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>]] = [];</div>
<div class="line"><span class="lineno"> 1236</span>                <span class="keywordflow">foreach</span> ($exchangeRate as $recordExchangeRate) {</div>
<div class="line"><span class="lineno"> 1237</span>                    array_push(</div>
<div class="line"><span class="lineno"> 1238</span>                        <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$entry[<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>]],</div>
<div class="line"><span class="lineno"> 1239</span>                        [</div>
<div class="line"><span class="lineno"> 1240</span>                            <span class="stringliteral">&#39;amount&#39;</span> =&gt; $recordExchangeRate-&gt;amount,</div>
<div class="line"><span class="lineno"> 1241</span>                            <span class="stringliteral">&#39;operator&#39;</span> =&gt; ($currency_id == $recordExchangeRate-&gt;from_currency_id) ? <span class="stringliteral">&#39;from&#39;</span> : <span class="stringliteral">&#39;to&#39;</span>,</div>
<div class="line"><span class="lineno"> 1242</span>                            <span class="stringliteral">&#39;start_at&#39;</span> =&gt; $recordExchangeRate-&gt;start_at,</div>
<div class="line"><span class="lineno"> 1243</span>                            <span class="stringliteral">&#39;end_at&#39;</span> =&gt; $recordExchangeRate-&gt;end_at,</div>
<div class="line"><span class="lineno"> 1244</span>                        ]</div>
<div class="line"><span class="lineno"> 1245</span>                    );</div>
<div class="line"><span class="lineno"> 1246</span>                }</div>
<div class="line"><span class="lineno"> 1247</span>            }</div>
<div class="line"><span class="lineno"> 1248</span>        }</div>
<div class="line"><span class="lineno"> 1249</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>;</div>
<div class="line"><span class="lineno"> 1250</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_aa909c5b20912c383ac43c7e672007a1d"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\$convertions</a></div><div class="ttdeci">$convertions</div><div class="ttdoc">Lista de conversiones validas.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController.php:51</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00143">AccountingBalanceSheetController\pdfVue()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00339">AccountingBalanceSheetController\pdfVueSign()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab0ddffde595d12d9c85da6f4c1eb2605_icgraph">
<area shape="rect" title="Encuentra los tipos de cambio." alt="" coords="235,79,416,104"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,29,187,55"/>
<area shape="poly" title=" " alt="" coords="252,78,155,57,156,52,253,73"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ac8cc7e992a9a4e0958361ae05c79d406" title="Genera el reporte en pdf de balance general." alt="" coords="63,79,129,104"/>
<area shape="poly" title=" " alt="" coords="221,94,130,94,130,89,221,89"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab6d7280e9d9218f3f62918686cd7906d" title="Genera el reporte en pdf de balance general." alt="" coords="49,128,143,153"/>
<area shape="poly" title=" " alt="" coords="253,110,144,133,143,128,252,104"/>
<area shape="poly" title=" " alt="" coords="137,20,126,11,96,8,71,10,58,15,56,20,63,27,59,31,51,21,55,11,70,5,96,3,128,7,141,16"/>
</map>
</div>

</div>
</div>
<a id="a6f3d70e44a5afea25eb600c5e19f6a29" name="a6f3d70e44a5afea25eb600c5e19f6a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f3d70e44a5afea25eb600c5e19f6a29">&#9670;&#160;</a></span>calculateOperation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">calculateOperation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$convertions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$equalCurrency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza la conversion de saldo. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$convertions</td><td>Lista de tipos cambios para la moneda </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$currency_id</td><td>Identificador de la moneda </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$value</td><td>Saldo del asiento </td></tr>
    <tr><td class="paramtype">float</td><td class="paramname">$date</td><td>Fecha del asiento </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$equalCurrency</td><td>Bandera que indica si el tipo de moneda en el que esta el asiento es las misma que la que se desea expresar</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float Resultdado de la operación </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01196">1196</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1197</span>    {</div>
<div class="line"><span class="lineno"> 1198</span>        <span class="keywordflow">if</span> ($equalCurrency) {</div>
<div class="line"><span class="lineno"> 1199</span>            <span class="keywordflow">return</span> $value;</div>
<div class="line"><span class="lineno"> 1200</span>        }</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>        <span class="keywordflow">if</span> ($currency_id &amp;&amp; array_key_exists($currency_id, <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>) &amp;&amp; <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$currency_id]) {</div>
<div class="line"><span class="lineno"> 1203</span>            <span class="keywordflow">foreach</span> (<a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>[$currency_id] as $convertion) {</div>
<div class="line"><span class="lineno"> 1204</span>                <span class="keywordflow">if</span> ($date &gt;= $convertion[<span class="stringliteral">&#39;start_at&#39;</span>] &amp;&amp; $date &lt;= $convertion[<span class="stringliteral">&#39;end_at&#39;</span>]) {</div>
<div class="line"><span class="lineno"> 1205</span>                    <span class="keywordflow">if</span> ($convertion[<span class="stringliteral">&#39;operator&#39;</span>] == <span class="stringliteral">&#39;to&#39;</span>) {</div>
<div class="line"><span class="lineno"> 1206</span>                        <span class="keywordflow">return</span> ($value * $convertion[<span class="stringliteral">&#39;amount&#39;</span>]);</div>
<div class="line"><span class="lineno"> 1207</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1208</span>                        <span class="keywordflow">return</span> ($value / $convertion[<span class="stringliteral">&#39;amount&#39;</span>]);</div>
<div class="line"><span class="lineno"> 1209</span>                    }</div>
<div class="line"><span class="lineno"> 1210</span>                }</div>
<div class="line"><span class="lineno"> 1211</span>            }</div>
<div class="line"><span class="lineno"> 1212</span>        }</div>
<div class="line"><span class="lineno"> 1213</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno"> 1214</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6f3d70e44a5afea25eb600c5e19f6a29_icgraph">
<area shape="rect" title="Realiza la conversion de saldo." alt="" coords="235,29,380,55"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,29,187,55"/>
<area shape="poly" title=" " alt="" coords="221,45,187,45,187,39,221,39"/>
<area shape="poly" title=" " alt="" coords="134,20,123,11,96,8,74,10,62,15,59,20,66,28,61,31,54,21,58,11,72,5,96,3,125,6,137,15"/>
</map>
</div>

</div>
</div>
<a id="a6e29f82d56bc92e45daa978c31e35cd6" name="a6e29f82d56bc92e45daa978c31e35cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e29f82d56bc92e45daa978c31e35cd6">&#9670;&#160;</a></span>calculateValuesInEntries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">calculateValuesInEntries </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$account</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al último nivel de parentela solo se sumaran los valores de los asientos contables aprobados. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">AccountingAccount</td><td class="paramname">$account</td><td>Registro de una cuenta o subcuenta patrimonial</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float Resultado de realizar la operaciones de suma y resta </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">1132</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1133</span>    {</div>
<div class="line"><span class="lineno"> 1134</span>        <span class="comment">/* Saldo total en el debe de la cuenta */</span></div>
<div class="line"><span class="lineno"> 1135</span>        $debit = 0.00;</div>
<div class="line"><span class="lineno"> 1136</span> </div>
<div class="line"><span class="lineno"> 1137</span>        <span class="comment">/* Saldo total en el haber de la cuenta */</span></div>
<div class="line"><span class="lineno"> 1138</span>        $assets = 0.00;</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>        <span class="comment">/* Saldo total de la suma de los saldos de sus cuentas hijo */</span></div>
<div class="line"><span class="lineno"> 1141</span>        $balanceChildren = 0.00;</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>        <span class="keywordflow">foreach</span> ($account-&gt;entryAccount as $entryAccount) {</div>
<div class="line"><span class="lineno"> 1144</span>            <span class="keywordflow">if</span> ($entryAccount-&gt;entries &amp;&amp; $entryAccount-&gt;entries[<span class="stringliteral">&#39;approved&#39;</span>]) {</div>
<div class="line"><span class="lineno"> 1145</span>                <span class="keywordflow">if</span> (!array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>())) {</div>
<div class="line"><span class="lineno"> 1146</span>                    $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a678f5c49204c69d24b2b293794996ecd">setConvertions</a>($this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a>(</div>
<div class="line"><span class="lineno"> 1147</span>                        $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>(),</div>
<div class="line"><span class="lineno"> 1148</span>                        $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>],</div>
<div class="line"><span class="lineno"> 1149</span>                        $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a>()</div>
<div class="line"><span class="lineno"> 1150</span>                    ));</div>
<div class="line"><span class="lineno"> 1151</span>                }</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>                $debit += ($entryAccount[<span class="stringliteral">&#39;debit&#39;</span>] != 0) ?</div>
<div class="line"><span class="lineno"> 1154</span>                $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6f3d70e44a5afea25eb600c5e19f6a29">calculateOperation</a>(</div>
<div class="line"><span class="lineno"> 1155</span>                    $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>(),</div>
<div class="line"><span class="lineno"> 1156</span>                    $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno"> 1157</span>                    $entryAccount[<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno"> 1158</span>                    $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno"> 1159</span>                    ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] == $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a>()) ?? <span class="keyword">false</span></div>
<div class="line"><span class="lineno"> 1160</span>                ) : 0;</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>                $assets += ($entryAccount[<span class="stringliteral">&#39;assets&#39;</span>] != 0) ?</div>
<div class="line"><span class="lineno"> 1163</span>                $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6f3d70e44a5afea25eb600c5e19f6a29">calculateOperation</a>(</div>
<div class="line"><span class="lineno"> 1164</span>                    $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03">getConvertions</a>(),</div>
<div class="line"><span class="lineno"> 1165</span>                    $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno"> 1166</span>                    $entryAccount[<span class="stringliteral">&#39;assets&#39;</span>],</div>
<div class="line"><span class="lineno"> 1167</span>                    $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno"> 1168</span>                    ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] == $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">getCurrencyId</a>()) ?? <span class="keyword">false</span></div>
<div class="line"><span class="lineno"> 1169</span>                ) : 0;</div>
<div class="line"><span class="lineno"> 1170</span>            }</div>
<div class="line"><span class="lineno"> 1171</span>        }</div>
<div class="line"><span class="lineno"> 1172</span> </div>
<div class="line"><span class="lineno"> 1173</span>        <span class="keywordflow">if</span> (count($account-&gt;children) &gt; 0) {</div>
<div class="line"><span class="lineno"> 1174</span>            <span class="keywordflow">foreach</span> ($account-&gt;children as $child) {</div>
<div class="line"><span class="lineno"> 1175</span>                <span class="comment">/* llamada recursiva y acumulación */</span></div>
<div class="line"><span class="lineno"> 1176</span>                $balanceChildren += $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6">calculateValuesInEntries</a>($child);</div>
<div class="line"><span class="lineno"> 1177</span>            }</div>
<div class="line"><span class="lineno"> 1178</span>        }</div>
<div class="line"><span class="lineno"> 1179</span>        <span class="keywordflow">return</span> (($debit - $assets) + $balanceChildren);</div>
<div class="line"><span class="lineno"> 1180</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a4412028831ce993246eb29b08f2ebb03"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getConvertions</a></div><div class="ttdeci">getConvertions()</div><div class="ttdoc">Obtiene el listado de conversiones.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00080">AccountingBalanceSheetController.php:80</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a678f5c49204c69d24b2b293794996ecd"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a678f5c49204c69d24b2b293794996ecd">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\setConvertions</a></div><div class="ttdeci">setConvertions($convertions)</div><div class="ttdoc">Establece el listado de conversiones.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00092">AccountingBalanceSheetController.php:92</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a6e29f82d56bc92e45daa978c31e35cd6"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\calculateValuesInEntries</a></div><div class="ttdeci">calculateValuesInEntries($account)</div><div class="ttdoc">Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi...</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController.php:1132</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a6f3d70e44a5afea25eb600c5e19f6a29"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6f3d70e44a5afea25eb600c5e19f6a29">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\calculateOperation</a></div><div class="ttdeci">calculateOperation($convertions, $currency_id, $value, $date, $equalCurrency)</div><div class="ttdoc">Realiza la conversion de saldo.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01196">AccountingBalanceSheetController.php:1196</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_aa4c79afa7ea1ba7a95b832f2b6ab8ec4"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getCurrencyId</a></div><div class="ttdeci">getCurrencyId()</div><div class="ttdoc">Obtiene el identificador de la moneda.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00102">AccountingBalanceSheetController.php:102</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_ab0ddffde595d12d9c85da6f4c1eb2605"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\calculateExchangeRates</a></div><div class="ttdeci">calculateExchangeRates($convertions, $entry, $currency_id)</div><div class="ttdoc">Encuentra los tipos de cambio.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01227">AccountingBalanceSheetController.php:1227</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01227">AccountingBalanceSheetController\calculateExchangeRates()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01196">AccountingBalanceSheetController\calculateOperation()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00080">AccountingBalanceSheetController\getConvertions()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00102">AccountingBalanceSheetController\getCurrencyId()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00092">AccountingBalanceSheetController\setConvertions()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_cgraph">
<area shape="rect" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,104,187,129"/>
<area shape="poly" title=" " alt="" coords="59,106,51,96,55,86,70,80,96,77,128,81,141,91,137,95,126,86,96,83,71,85,58,90,56,95,63,102"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="235,5,416,31"/>
<area shape="poly" title=" " alt="" coords="116,102,168,71,234,40,255,32,257,37,236,44,170,76,118,106"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6f3d70e44a5afea25eb600c5e19f6a29" title="Realiza la conversion de saldo." alt="" coords="253,55,398,80"/>
<area shape="poly" title=" " alt="" coords="155,101,251,80,253,86,156,107"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4412028831ce993246eb29b08f2ebb03" title="Obtiene el listado de conversiones." alt="" coords="265,104,386,129"/>
<area shape="poly" title=" " alt="" coords="187,114,251,114,251,119,187,119"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa4c79afa7ea1ba7a95b832f2b6ab8ec4" title="Obtiene el identificador de la moneda." alt="" coords="269,153,382,179"/>
<area shape="poly" title=" " alt="" coords="156,127,256,148,255,154,155,132"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a678f5c49204c69d24b2b293794996ecd" title="Establece el listado de conversiones." alt="" coords="265,203,385,228"/>
<area shape="poly" title=" " alt="" coords="119,127,171,157,236,188,260,196,258,201,234,192,169,162,117,132"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a6e29f82d56bc92e45daa978c31e35cd6_icgraph">
<area shape="rect" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,29,187,55"/>
<area shape="poly" title=" " alt="" coords="128,19,119,11,96,8,77,10,67,15,65,20,70,28,66,31,60,21,63,11,75,5,96,3,121,6,131,15"/>
</map>
</div>

</div>
</div>
<a id="a23d7453ab9e51eca5ab50a38ce4a84c0" name="a23d7453ab9e51eca5ab50a38ce4a84c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d7453ab9e51eca5ab50a38ce4a84c0">&#9670;&#160;</a></span>export()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">export </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$report</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en hojade calculo de balance general. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$report</td><td>id de reporte y su información</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00490">490</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  491</span>    {</div>
<div class="line"><span class="lineno">  492</span>        <span class="keywordflow">return</span>  $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02">pdf</a>($report, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  493</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a5c0379fc68799a3f32447bd6760dcd02"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\pdf</a></div><div class="ttdeci">pdf($report, $xml=false)</div><div class="ttdoc">Genera el reporte en pdf de balance general.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController.php:504</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23d7453ab9e51eca5ab50a38ce4a84c0_cgraph">
<area shape="rect" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,153,69,179"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="117,153,160,179"/>
<area shape="poly" title=" " alt="" coords="69,163,104,163,104,169,69,169"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aece89e986c4cfa1db456acdb13987406" title="Método para buscar las cuentas padre de una formulación." alt="" coords="211,29,354,55"/>
<area shape="poly" title=" " alt="" coords="143,152,166,109,184,85,206,64,214,59,217,63,210,68,188,88,171,112,148,155"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3" title="Obtiene la moneda." alt="" coords="232,79,333,104"/>
<area shape="poly" title=" " alt="" coords="153,151,177,132,207,113,221,107,223,111,209,118,180,136,156,155"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="208,128,357,153"/>
<area shape="poly" title=" " alt="" coords="160,160,196,153,197,158,161,165"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="405,179,588,204"/>
<area shape="poly" title=" " alt="" coords="160,165,392,181,392,187,160,170"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="221,229,344,255"/>
<area shape="poly" title=" " alt="" coords="159,177,209,208,238,221,235,226,207,212,157,181"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece la moneda." alt="" coords="233,279,333,304"/>
<area shape="poly" title=" " alt="" coords="148,177,171,220,188,243,210,264,222,271,219,276,206,268,184,247,166,223,143,180"/>
<area shape="poly" title=" " alt="" coords="258,30,253,21,256,11,266,5,283,3,303,6,311,15,307,18,300,11,283,8,268,10,260,15,258,20,263,28"/>
<area shape="poly" title=" " alt="" coords="338,151,430,173,429,178,337,156"/>
<area shape="poly" title=" " alt="" coords="337,227,429,205,430,210,338,232"/>
</map>
</div>

</div>
</div>
<a id="aa825cb7aedbc4c92b3fcc708263200bc" name="aa825cb7aedbc4c92b3fcc708263200bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa825cb7aedbc4c92b3fcc708263200bc">&#9670;&#160;</a></span>formatDataInArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">formatDataInArray </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$records</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$initD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$endD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sintetiza la información de una cuenta en un array con sus respectivas subcuentas. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">\Modules\Accounting\Models\AccountingAccount&#160;|&#160;array</td><td class="paramname">$records</td><td>Registro de una cuenta o subcuenta patrimonial </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$level</td><td>Contador que indica el nivel de profundidad de la recursividad para obtener subcuentas de una cuenta</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>array </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01079">1079</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1080</span>    {</div>
<div class="line"><span class="lineno"> 1081</span>        <span class="comment">/* Información pertinente de la consulta */</span></div>
<div class="line"><span class="lineno"> 1082</span>        $parent = [];</div>
<div class="line"><span class="lineno"> 1083</span> </div>
<div class="line"><span class="lineno"> 1084</span>        <span class="comment">/* Posición de la cuenta base */</span></div>
<div class="line"><span class="lineno"> 1085</span>        $pos = 0;</div>
<div class="line"><span class="lineno"> 1086</span> </div>
<div class="line"><span class="lineno"> 1087</span>        <span class="comment">/* Condición de parada del último nivel */</span></div>
<div class="line"><span class="lineno"> 1088</span>        <span class="keywordflow">if</span> ($level &gt; 6) {</div>
<div class="line"><span class="lineno"> 1089</span>            <span class="keywordflow">return</span> [];</div>
<div class="line"><span class="lineno"> 1090</span>        }</div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>        $lastOfThePreviousMonth = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[1], 1, explode(<span class="charliteral">&#39;-&#39;</span>, $initD)[0]) - 1));</div>
<div class="line"><span class="lineno"> 1093</span> </div>
<div class="line"><span class="lineno"> 1094</span>        <span class="keywordflow">if</span> (count($records) &gt; 0) {</div>
<div class="line"><span class="lineno"> 1095</span>            <span class="keywordflow">foreach</span> ($records as $account) {</div>
<div class="line"><span class="lineno"> 1096</span>                array_push($parent, [</div>
<div class="line"><span class="lineno"> 1097</span>                    <span class="stringliteral">&#39;code&#39;</span> =&gt; $account-&gt;getCodeAttribute(),</div>
<div class="line"><span class="lineno"> 1098</span>                    <span class="stringliteral">&#39;denomination&#39;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno"> 1099</span>                    <span class="stringliteral">&#39;balance&#39;</span> =&gt; $this-&gt;calculateValuesInEntries(</div>
<div class="line"><span class="lineno"> 1100</span>                        $account,</div>
<div class="line"><span class="lineno"> 1101</span>                        <span class="comment">/*explode(&#39;-&#39;, $endD)[0] . &#39;-&#39; . explode(&#39;-&#39;, $endD)[1] . &#39;-01&#39;,</span></div>
<div class="line"><span class="lineno"> 1102</span><span class="comment">                        $endD*/</span></div>
<div class="line"><span class="lineno"> 1103</span>                    ),</div>
<div class="line"><span class="lineno"> 1104</span>                    <span class="comment">// acumulado de los meses anteriores</span></div>
<div class="line"><span class="lineno"> 1105</span>                    <span class="stringliteral">&#39;lastMonthBalance&#39;</span> =&gt; $this-&gt;calculateValuesInEntries(</div>
<div class="line"><span class="lineno"> 1106</span>                        $account,</div>
<div class="line"><span class="lineno"> 1107</span>                        <span class="comment">/*explode(&#39;-&#39;, $initD)[0] . &#39;-01-01&#39;,</span></div>
<div class="line"><span class="lineno"> 1108</span><span class="comment">                        explode(&#39;-&#39;, $endD)[0] . &#39;-&#39; . (explode(&#39;-&#39;, $endD)[1] - 1) . &#39;-&#39; . $lastOfThePreviousMonth*/</span></div>
<div class="line"><span class="lineno"> 1109</span>                    ),</div>
<div class="line"><span class="lineno"> 1110</span>                    <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno"> 1111</span>                    <span class="stringliteral">&#39;children&#39;</span> =&gt; [],</div>
<div class="line"><span class="lineno"> 1112</span>                ]);</div>
<div class="line"><span class="lineno"> 1113</span>                $parent[$pos][<span class="stringliteral">&#39;children&#39;</span>] = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa825cb7aedbc4c92b3fcc708263200bc">formatDataInArray</a>($account-&gt;children, $initD, $endD, $level + 1);</div>
<div class="line"><span class="lineno"> 1114</span>                $pos++;</div>
<div class="line"><span class="lineno"> 1115</span>            }</div>
<div class="line"><span class="lineno"> 1116</span>            <span class="keywordflow">return</span> $parent;</div>
<div class="line"><span class="lineno"> 1117</span>        }</div>
<div class="line"><span class="lineno"> 1118</span>        <span class="keywordflow">return</span> [];</div>
<div class="line"><span class="lineno"> 1119</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_aa825cb7aedbc4c92b3fcc708263200bc"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa825cb7aedbc4c92b3fcc708263200bc">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\formatDataInArray</a></div><div class="ttdeci">formatDataInArray($records, $initD, $endD, $level=1)</div><div class="ttdoc">Sintetiza la información de una cuenta en un array con sus respectivas subcuentas.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01079">AccountingBalanceSheetController.php:1079</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01079">AccountingBalanceSheetController\formatDataInArray()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01079">AccountingBalanceSheetController\formatDataInArray()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00931">AccountingBalanceSheetController\pdfSign()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_cgraph">
<area shape="rect" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="5,29,149,55"/>
<area shape="poly" title=" " alt="" coords="53,30,48,21,50,11,61,5,77,3,97,6,106,15,102,18,95,11,77,8,62,10,55,15,53,20,57,28"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa825cb7aedbc4c92b3fcc708263200bc_icgraph">
<area shape="rect" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="223,19,215,11,196,8,180,10,172,15,170,20,174,28,170,31,164,21,167,11,178,5,196,3,217,6,226,15"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de balance general." alt="" coords="5,29,76,55"/>
<area shape="poly" title=" " alt="" coords="110,45,76,45,76,39,110,39"/>
</map>
</div>

</div>
</div>
<a id="aece89e986c4cfa1db456acdb13987406" name="aece89e986c4cfa1db456acdb13987406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece89e986c4cfa1db456acdb13987406">&#9670;&#160;</a></span>getAccountParents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getAccountParents </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$childData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$parents</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Método para buscar las cuentas padre de una formulación. </p>
<dl class="section author"><dt>Autor</dt><dd>Daniel Contreras <a href="#" onclick="location.href='mai'+'lto:'+'dco'+'nt'+'rer'+'as'+'@ce'+'nd'+'ite'+'l.'+'gob'+'.v'+'e'; return false;">dcont<span class="obfuscator">.nosp@m.</span>rera<span class="obfuscator">.nosp@m.</span>s@cen<span class="obfuscator">.nosp@m.</span>dite<span class="obfuscator">.nosp@m.</span>l.gob<span class="obfuscator">.nosp@m.</span>.ve</a></dd></dl>
<dl class="section return"><dt>Devuelve</dt><dd>array con las cuentas padre de la formulación </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01464">1464</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1465</span>    {</div>
<div class="line"><span class="lineno"> 1466</span>        $child = AccountingAccount::findOrFail($childData[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><span class="lineno"> 1467</span>        $child[<span class="stringliteral">&#39;balance&#39;</span>] = $childData[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1468</span>        $child[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>] = $childData[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1469</span>        $child[<span class="stringliteral">&#39;level&#39;</span>] = $childData[<span class="stringliteral">&#39;level&#39;</span>] - 1;</div>
<div class="line"><span class="lineno"> 1470</span>        <span class="keywordflow">if</span> (!isset($child)) {</div>
<div class="line"><span class="lineno"> 1471</span>            <span class="keywordflow">return</span> $parents;</div>
<div class="line"><span class="lineno"> 1472</span>        }</div>
<div class="line"><span class="lineno"> 1473</span> </div>
<div class="line"><span class="lineno"> 1474</span>        <span class="keywordflow">if</span> (!array_key_exists($child-&gt;id, $parents)) {</div>
<div class="line"><span class="lineno"> 1475</span>            $parents[$child-&gt;id] = $child;</div>
<div class="line"><span class="lineno"> 1476</span>        }</div>
<div class="line"><span class="lineno"> 1477</span> </div>
<div class="line"><span class="lineno"> 1478</span>        <span class="keywordflow">if</span> ($child-&gt;parent_id == <span class="keyword">null</span>) {</div>
<div class="line"><span class="lineno"> 1479</span>            <span class="keywordflow">return</span> $parents;</div>
<div class="line"><span class="lineno"> 1480</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1481</span>            $child-&gt;load(<span class="stringliteral">&#39;parent&#39;</span>);</div>
<div class="line"><span class="lineno"> 1482</span>            $parent = $child-&gt;parent;</div>
<div class="line"><span class="lineno"> 1483</span>            $parent[<span class="stringliteral">&#39;balance&#39;</span>] += $child[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1484</span>            $parent[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>] += $child[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1485</span>            $parent[<span class="stringliteral">&#39;level&#39;</span>] = $child[<span class="stringliteral">&#39;level&#39;</span>];</div>
<div class="line"><span class="lineno"> 1486</span> </div>
<div class="line"><span class="lineno"> 1487</span>            <span class="keywordflow">return</span> $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aece89e986c4cfa1db456acdb13987406">getAccountParents</a>($parent, $parents);</div>
<div class="line"><span class="lineno"> 1488</span>        }</div>
<div class="line"><span class="lineno"> 1489</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_aece89e986c4cfa1db456acdb13987406"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aece89e986c4cfa1db456acdb13987406">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getAccountParents</a></div><div class="ttdeci">getAccountParents($childData, $parents=[])</div><div class="ttdoc">Método para buscar las cuentas padre de una formulación.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01464">AccountingBalanceSheetController.php:1464</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01464">AccountingBalanceSheetController\getAccountParents()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01464">AccountingBalanceSheetController\getAccountParents()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_cgraph">
<area shape="rect" title="Método para buscar las cuentas padre de una formulación." alt="" coords="5,29,148,55"/>
<area shape="poly" title=" " alt="" coords="53,30,48,21,50,11,60,5,77,3,96,6,105,15,101,18,94,11,77,8,62,10,55,15,53,20,57,28"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aece89e986c4cfa1db456acdb13987406_icgraph">
<area shape="rect" title="Método para buscar las cuentas padre de una formulación." alt="" coords="208,29,351,55"/>
<area shape="poly" title=" " alt="" coords="303,18,296,11,279,8,265,10,258,15,256,20,260,28,256,30,251,21,253,11,263,5,279,3,299,6,307,15"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="117,29,160,55"/>
<area shape="poly" title=" " alt="" coords="194,45,161,45,161,39,194,39"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,29,69,55"/>
<area shape="poly" title=" " alt="" coords="103,45,70,45,70,39,103,39"/>
</map>
</div>

</div>
</div>
<a id="a6c710b0ad0cd4c8f24081c8425443be9" name="a6c710b0ad0cd4c8f24081c8425443be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c710b0ad0cd4c8f24081c8425443be9">&#9670;&#160;</a></span>getCheckBreak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getCheckBreak </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene el valor de la bandera de salto de página. </p>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01257">1257</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1258</span>    {</div>
<div class="line"><span class="lineno"> 1259</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a311b3d7033e348395d71484904c44767">$this-&gt;PageBreakTrigger</a>;</div>
<div class="line"><span class="lineno"> 1260</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a311b3d7033e348395d71484904c44767"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a311b3d7033e348395d71484904c44767">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\$PageBreakTrigger</a></div><div class="ttdeci">$PageBreakTrigger</div><div class="ttdoc">Establece el trigger de salto de página.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00044">AccountingBalanceSheetController.php:44</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00044">AccountingBalanceSheetController\$PageBreakTrigger</a>.</p>

</div>
</div>
<a id="a4412028831ce993246eb29b08f2ebb03" name="a4412028831ce993246eb29b08f2ebb03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4412028831ce993246eb29b08f2ebb03">&#9670;&#160;</a></span>getConvertions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getConvertions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene el listado de conversiones. </p>
<dl class="section return"><dt>Devuelve</dt><dd>array|mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00080">80</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   81</span>    {</div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$this-&gt;convertions</a>;</div>
<div class="line"><span class="lineno">   83</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4412028831ce993246eb29b08f2ebb03_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4412028831ce993246eb29b08f2ebb03_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4412028831ce993246eb29b08f2ebb03_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4412028831ce993246eb29b08f2ebb03_icgraph">
<area shape="rect" title="Obtiene el listado de conversiones." alt="" coords="235,29,356,55"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,29,187,55"/>
<area shape="poly" title=" " alt="" coords="221,45,187,45,187,39,221,39"/>
<area shape="poly" title=" " alt="" coords="131,19,121,11,96,8,75,10,64,15,62,20,68,28,63,31,57,21,60,11,74,5,96,3,123,6,134,15"/>
</map>
</div>

</div>
</div>
<a id="a55459f9e07fdc6b85953811024ab61d3" name="a55459f9e07fdc6b85953811024ab61d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55459f9e07fdc6b85953811024ab61d3">&#9670;&#160;</a></span>getCurrency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getCurrency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene la moneda. </p>
<dl class="section return"><dt>Devuelve</dt><dd>Currency </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00112">112</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  113</span>    {</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$this-&gt;currency</a>;</div>
<div class="line"><span class="lineno">  115</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a6ec628a1048bd2ab581320d0aa1aed30"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\$currency</a></div><div class="ttdeci">$currency</div><div class="ttdoc">Moneda en la que se expresara el reporte.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00058">AccountingBalanceSheetController.php:58</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00058">AccountingBalanceSheetController\$currency</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00931">AccountingBalanceSheetController\pdfSign()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a55459f9e07fdc6b85953811024ab61d3_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a55459f9e07fdc6b85953811024ab61d3_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a55459f9e07fdc6b85953811024ab61d3_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a55459f9e07fdc6b85953811024ab61d3_icgraph">
<area shape="rect" title="Obtiene la moneda." alt="" coords="236,31,337,56"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="131,5,174,31"/>
<area shape="poly" title=" " alt="" coords="222,34,174,25,175,19,223,29"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de balance general." alt="" coords="117,55,188,80"/>
<area shape="poly" title=" " alt="" coords="223,57,189,64,188,58,222,52"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="118,21,70,21,70,15,118,15"/>
</map>
</div>

</div>
</div>
<a id="aa4c79afa7ea1ba7a95b832f2b6ab8ec4" name="aa4c79afa7ea1ba7a95b832f2b6ab8ec4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4c79afa7ea1ba7a95b832f2b6ab8ec4">&#9670;&#160;</a></span>getCurrencyId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getCurrencyId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene el identificador de la moneda. </p>
<dl class="section return"><dt>Devuelve</dt><dd>string|int </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00102">102</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  103</span>    {</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">return</span> $this-&gt;currency-&gt;id;</div>
<div class="line"><span class="lineno">  105</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_aa4c79afa7ea1ba7a95b832f2b6ab8ec4_icgraph">
<area shape="rect" title="Obtiene el identificador de la moneda." alt="" coords="235,29,348,55"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,29,187,55"/>
<area shape="poly" title=" " alt="" coords="221,45,187,45,187,39,221,39"/>
<area shape="poly" title=" " alt="" coords="131,19,121,11,96,8,75,10,64,15,62,20,68,28,64,31,57,21,61,11,74,5,96,3,123,6,134,15"/>
</map>
</div>

</div>
</div>
<a id="a5c67a4c228ee25967d4b59b72bc21bac" name="a5c67a4c228ee25967d4b59b72bc21bac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c67a4c228ee25967d4b59b72bc21bac">&#9670;&#160;</a></span>getLastTotalResults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLastTotalResults </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$formDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$endDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$lastAvalible</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el cálculo de las cuentas de acuerdo a como suman. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Francisco Escala <a href="#" onclick="location.href='mai'+'lto:'+'fje'+'sc'+'ala'+'@g'+'mai'+'l.'+'com'; return false;">fjesc<span class="obfuscator">.nosp@m.</span>ala@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">object</td><td class="paramname">$formDate</td><td>Fecha de la consulta </td></tr>
    <tr><td class="paramtype">object</td><td class="paramname">$endDate</td><td>Fecha de la consulta </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$lastAvalible</td><td>Última disponibilidad</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float Retorna el valor del total de las cuentas en el asiento </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01386">1386</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1387</span>    {</div>
<div class="line"><span class="lineno"> 1388</span>        <span class="keywordflow">if</span> (!$lastAvalible) {</div>
<div class="line"><span class="lineno"> 1389</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 1390</span>        }</div>
<div class="line"><span class="lineno"> 1391</span>        <span class="comment">// determinamos el primero de enero del año a buscar</span></div>
<div class="line"><span class="lineno"> 1392</span>        <span class="comment">// Obtén el año de la fecha</span></div>
<div class="line"><span class="lineno"> 1393</span>        $ano = $formDate-&gt;year;</div>
<div class="line"><span class="lineno"> 1394</span> </div>
<div class="line"><span class="lineno"> 1395</span>        <span class="comment">// Crea una nueva instancia de Carbon para el 1 de enero del mismo año</span></div>
<div class="line"><span class="lineno"> 1396</span>        $primerDeEnero = Carbon::create($ano, 1, 1);</div>
<div class="line"><span class="lineno"> 1397</span>        $balance = 0;</div>
<div class="line"><span class="lineno"> 1398</span> </div>
<div class="line"><span class="lineno"> 1399</span>        $arr = [];</div>
<div class="line"><span class="lineno"> 1400</span>        $result_of_the_excersice = 0;</div>
<div class="line"><span class="lineno"> 1401</span>        $parentsArray = [];</div>
<div class="line"><span class="lineno"> 1402</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno"> 1403</span> </div>
<div class="line"><span class="lineno"> 1404</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno"> 1405</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno"> 1406</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1407</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno"> 1408</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1409</span>        }</div>
<div class="line"><span class="lineno"> 1410</span> </div>
<div class="line"><span class="lineno"> 1411</span>        $beginnBalances = AccountingEntry::query()</div>
<div class="line"><span class="lineno"> 1412</span>            -&gt;with([<span class="stringliteral">&#39;accountingAccounts&#39;</span> =&gt; <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno"> 1413</span>                $query</div>
<div class="line"><span class="lineno"> 1414</span>                    -&gt;with(<span class="stringliteral">&#39;account&#39;</span>)</div>
<div class="line"><span class="lineno"> 1415</span>                    -&gt;whereHas(<span class="stringliteral">&#39;account&#39;</span>, <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno"> 1416</span>                        $query-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [5, 6]);</div>
<div class="line"><span class="lineno"> 1417</span>                    });</div>
<div class="line"><span class="lineno"> 1418</span>            }])</div>
<div class="line"><span class="lineno"> 1419</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution-&gt;id)</div>
<div class="line"><span class="lineno"> 1420</span>            -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1421</span>            -&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$primerDeEnero, $endDate])</div>
<div class="line"><span class="lineno"> 1422</span>            -&gt;get();</div>
<div class="line"><span class="lineno"> 1423</span> </div>
<div class="line"><span class="lineno"> 1424</span>        <span class="keywordflow">foreach</span> ($beginnBalances as $beginnbalance) {</div>
<div class="line"><span class="lineno"> 1425</span>            <span class="keywordflow">if</span> ($beginnbalance[<span class="stringliteral">&#39;accountingAccounts&#39;</span>]) {</div>
<div class="line"><span class="lineno"> 1426</span>                <span class="keywordflow">foreach</span> ($beginnbalance[<span class="stringliteral">&#39;accountingAccounts&#39;</span>] as $account) {</div>
<div class="line"><span class="lineno"> 1427</span>                    $balance = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a>(</div>
<div class="line"><span class="lineno"> 1428</span>                        $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>][0],</div>
<div class="line"><span class="lineno"> 1429</span>                        $account[<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno"> 1430</span>                        $account[<span class="stringliteral">&#39;assets&#39;</span>]</div>
<div class="line"><span class="lineno"> 1431</span>                    );</div>
<div class="line"><span class="lineno"> 1432</span>                    <span class="keywordflow">if</span> (array_key_exists($account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>], $arr)) {</div>
<div class="line"><span class="lineno"> 1433</span>                        $arr[$account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>]][<span class="stringliteral">&#39;lastMonthBalance&#39;</span>] += $balance;</div>
<div class="line"><span class="lineno"> 1434</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1435</span>                        $acc = [</div>
<div class="line"><span class="lineno"> 1436</span>                        <span class="stringliteral">&#39;denomination&#39;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;denomination&#39;</span>],</div>
<div class="line"><span class="lineno"> 1437</span>                        <span class="stringliteral">&#39;code&#39;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&quot;code&quot;</span>],</div>
<div class="line"><span class="lineno"> 1438</span>                        <span class="stringliteral">&#39;lastMonthBalance&#39;</span> =&gt; $balance,</div>
<div class="line"><span class="lineno"> 1439</span>                        ];</div>
<div class="line"><span class="lineno"> 1440</span>                        $arr[$account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>]] = $acc;</div>
<div class="line"><span class="lineno"> 1441</span>                    }</div>
<div class="line"><span class="lineno"> 1442</span>                }</div>
<div class="line"><span class="lineno"> 1443</span>            }</div>
<div class="line"><span class="lineno"> 1444</span>        }</div>
<div class="line"><span class="lineno"> 1445</span> </div>
<div class="line"><span class="lineno"> 1446</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno"> 1447</span>            <span class="keywordflow">if</span> ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 6) {</div>
<div class="line"><span class="lineno"> 1448</span>                $result_of_the_excersice -= $a[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1449</span>            } elseif ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 5) {</div>
<div class="line"><span class="lineno"> 1450</span>                $result_of_the_excersice += $a[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1451</span>            }</div>
<div class="line"><span class="lineno"> 1452</span>        }</div>
<div class="line"><span class="lineno"> 1453</span> </div>
<div class="line"><span class="lineno"> 1454</span>        <span class="keywordflow">return</span> $result_of_the_excersice;</div>
<div class="line"><span class="lineno"> 1455</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a0db19fdd230ae36f5cadc50c61a451b0"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getRealBalaceCalculator</a></div><div class="ttdeci">getRealBalaceCalculator($ini, $debit, $assets)</div><div class="ttdoc">Realiza el cálculo de las cuentas de acuerdo a como suman.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01273">AccountingBalanceSheetController.php:1273</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01273">AccountingBalanceSheetController\getRealBalaceCalculator()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_cgraph">
<area shape="rect" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="5,5,155,31"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="203,5,385,31"/>
<area shape="poly" title=" " alt="" coords="155,15,189,15,189,21,155,21"/>
</map>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c67a4c228ee25967d4b59b72bc21bac_icgraph">
<area shape="rect" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="208,5,357,31"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="117,5,160,31"/>
<area shape="poly" title=" " alt="" coords="194,21,160,21,160,15,194,15"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="103,21,70,21,70,15,103,15"/>
</map>
</div>

</div>
</div>
<a id="a0db19fdd230ae36f5cadc50c61a451b0" name="a0db19fdd230ae36f5cadc50c61a451b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0db19fdd230ae36f5cadc50c61a451b0">&#9670;&#160;</a></span>getRealBalaceCalculator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getRealBalaceCalculator </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$ini</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$debit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$assets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el cálculo de las cuentas de acuerdo a como suman. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Francisco Escala <a href="#" onclick="location.href='mai'+'lto:'+'fje'+'sc'+'ala'+'@g'+'mai'+'l.'+'com'; return false;">fjesc<span class="obfuscator">.nosp@m.</span>ala@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$ini</td><td>Identificador del tipo de cuenta </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$debit</td><td>Valor de la cuenta por la columna del debe </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$assets</td><td>Valor de la cuenta por la columna del haber</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float Retorna el valor del total de las cuentas en el asiento </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01273">1273</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1274</span>    {</div>
<div class="line"><span class="lineno"> 1275</span>        $balance = 0;</div>
<div class="line"><span class="lineno"> 1276</span>        <span class="keywordflow">switch</span> ($ini) {</div>
<div class="line"><span class="lineno"> 1277</span>            <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno"> 1278</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno"> 1279</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1280</span>            <span class="keywordflow">case</span> 2:</div>
<div class="line"><span class="lineno"> 1281</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno"> 1282</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1283</span>            <span class="keywordflow">case</span> 3:</div>
<div class="line"><span class="lineno"> 1284</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno"> 1285</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1286</span>            <span class="keywordflow">case</span> 4:</div>
<div class="line"><span class="lineno"> 1287</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno"> 1288</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1289</span>            <span class="keywordflow">case</span> 5:</div>
<div class="line"><span class="lineno"> 1290</span>                $balance = $assets - $debit;</div>
<div class="line"><span class="lineno"> 1291</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1292</span>            <span class="keywordflow">case</span> 6:</div>
<div class="line"><span class="lineno"> 1293</span>                $balance = $debit - $assets;</div>
<div class="line"><span class="lineno"> 1294</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1295</span>        }</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>        <span class="keywordflow">return</span> $balance;</div>
<div class="line"><span class="lineno"> 1298</span>    }</div>
</div><!-- fragment -->
<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01386">AccountingBalanceSheetController\getLastTotalResults()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01311">AccountingBalanceSheetController\getTotalResults()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a0db19fdd230ae36f5cadc50c61a451b0_icgraph">
<area shape="rect" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="405,56,588,81"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="208,5,357,31"/>
<area shape="poly" title=" " alt="" coords="428,55,336,33,338,28,429,50"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="117,56,160,81"/>
<area shape="poly" title=" " alt="" coords="392,71,160,71,160,66,392,66"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="221,107,344,132"/>
<area shape="poly" title=" " alt="" coords="429,87,338,109,336,104,428,82"/>
<area shape="poly" title=" " alt="" coords="234,38,161,64,159,59,232,33"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,56,69,81"/>
<area shape="poly" title=" " alt="" coords="103,71,70,71,70,66,103,66"/>
<area shape="poly" title=" " alt="" coords="232,104,159,78,161,73,234,99"/>
</map>
</div>

</div>
</div>
<a id="abc5a35a2b0439e6e613eeb2ed98f50dc" name="abc5a35a2b0439e6e613eeb2ed98f50dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc5a35a2b0439e6e613eeb2ed98f50dc">&#9670;&#160;</a></span>getTotalResults()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getTotalResults </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$formDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Realiza el cálculo de las cuentas de acuerdo a como suman. </p>
<dl class="section author"><dt>Autor</dt><dd>Ing. Francisco Escala <a href="#" onclick="location.href='mai'+'lto:'+'fje'+'sc'+'ala'+'@g'+'mai'+'l.'+'com'; return false;">fjesc<span class="obfuscator">.nosp@m.</span>ala@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$date</td><td>Fecha de la consulta </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$formDate</td><td>Fecha de la consulta</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>float Retorna el valor del total de las cuentas en el asiento </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01311">1311</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1312</span>    {</div>
<div class="line"><span class="lineno"> 1313</span>        $balance = 0;</div>
<div class="line"><span class="lineno"> 1314</span> </div>
<div class="line"><span class="lineno"> 1315</span>        $arr = [];</div>
<div class="line"><span class="lineno"> 1316</span>        $result_of_the_excersice = 0;</div>
<div class="line"><span class="lineno"> 1317</span>        $parentsArray = [];</div>
<div class="line"><span class="lineno"> 1318</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno"> 1319</span> </div>
<div class="line"><span class="lineno"> 1320</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno"> 1321</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno"> 1322</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1323</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno"> 1324</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno"> 1325</span>        }</div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span>        $records = AccountingEntry::with([<span class="stringliteral">&#39;accountingAccounts&#39;</span> =&gt; <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno"> 1328</span>            $query-&gt;with(<span class="stringliteral">&#39;account&#39;</span>)</div>
<div class="line"><span class="lineno"> 1329</span>                -&gt;whereHas(<span class="stringliteral">&#39;account&#39;</span>, <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno"> 1330</span>                    $query-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [5, 6]);</div>
<div class="line"><span class="lineno"> 1331</span>                });</div>
<div class="line"><span class="lineno"> 1332</span>        }])</div>
<div class="line"><span class="lineno"> 1333</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution-&gt;id)</div>
<div class="line"><span class="lineno"> 1334</span>            -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1335</span>            -&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $date])</div>
<div class="line"><span class="lineno"> 1336</span>            -&gt;get();</div>
<div class="line"><span class="lineno"> 1337</span> </div>
<div class="line"><span class="lineno"> 1338</span>        <span class="keywordflow">foreach</span> ($records as $record) {</div>
<div class="line"><span class="lineno"> 1339</span>            <span class="keywordflow">if</span> ($record[<span class="stringliteral">&#39;accountingAccounts&#39;</span>]) {</div>
<div class="line"><span class="lineno"> 1340</span>                <span class="keywordflow">foreach</span> ($record[<span class="stringliteral">&#39;accountingAccounts&#39;</span>] as $account) {</div>
<div class="line"><span class="lineno"> 1341</span>                    $balance = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a>(</div>
<div class="line"><span class="lineno"> 1342</span>                        $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>][0],</div>
<div class="line"><span class="lineno"> 1343</span>                        $account[<span class="stringliteral">&#39;debit&#39;</span>],</div>
<div class="line"><span class="lineno"> 1344</span>                        $account[<span class="stringliteral">&#39;assets&#39;</span>]</div>
<div class="line"><span class="lineno"> 1345</span>                    );</div>
<div class="line"><span class="lineno"> 1346</span>                    <span class="keywordflow">if</span> (!array_key_exists($account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>], $arr)) {</div>
<div class="line"><span class="lineno"> 1347</span>                        $data = [</div>
<div class="line"><span class="lineno"> 1348</span>                            <span class="stringliteral">&quot;id&quot;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno"> 1349</span>                            <span class="stringliteral">&quot;code&quot;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>],</div>
<div class="line"><span class="lineno"> 1350</span>                            <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;denomination&#39;</span>],</div>
<div class="line"><span class="lineno"> 1351</span>                            <span class="stringliteral">&quot;balance&quot;</span> =&gt; $balance,</div>
<div class="line"><span class="lineno"> 1352</span>                            <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno"> 1353</span>                            <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno"> 1354</span>                            <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno"> 1355</span>                        ];</div>
<div class="line"><span class="lineno"> 1356</span>                        $arr[$account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>]] = $data;</div>
<div class="line"><span class="lineno"> 1357</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1358</span>                        $arr[$account[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;code&#39;</span>]][<span class="stringliteral">&#39;balance&#39;</span>] += $balance;</div>
<div class="line"><span class="lineno"> 1359</span>                    }</div>
<div class="line"><span class="lineno"> 1360</span>                }</div>
<div class="line"><span class="lineno"> 1361</span>            }</div>
<div class="line"><span class="lineno"> 1362</span>        }</div>
<div class="line"><span class="lineno"> 1363</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno"> 1364</span>            <span class="keywordflow">if</span> ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 6) {</div>
<div class="line"><span class="lineno"> 1365</span>                $result_of_the_excersice -= $a[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1366</span>            } elseif ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 5) {</div>
<div class="line"><span class="lineno"> 1367</span>                $result_of_the_excersice += $a[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno"> 1368</span>            }</div>
<div class="line"><span class="lineno"> 1369</span>        }</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>        <span class="keywordflow">return</span> $result_of_the_excersice;</div>
<div class="line"><span class="lineno"> 1372</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01273">AccountingBalanceSheetController\getRealBalaceCalculator()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_cgraph">
<area shape="rect" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="5,5,128,31"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="176,5,359,31"/>
<area shape="poly" title=" " alt="" coords="128,15,162,15,162,21,128,21"/>
</map>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_abc5a35a2b0439e6e613eeb2ed98f50dc_icgraph">
<area shape="rect" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="208,5,331,31"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="117,5,160,31"/>
<area shape="poly" title=" " alt="" coords="194,21,160,21,160,15,194,15"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="103,21,70,21,70,15,103,15"/>
</map>
</div>

</div>
</div>
<a id="a5c0379fc68799a3f32447bd6760dcd02" name="a5c0379fc68799a3f32447bd6760dcd02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0379fc68799a3f32447bd6760dcd02">&#9670;&#160;</a></span>pdf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdf </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$report</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$xml</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de balance general. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$report</td><td>id de reporte y su información </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$xml</td><td>si se requiere el reporte en xml</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">504</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  505</span>    {</div>
<div class="line"><span class="lineno">  506</span>        $report = AccountingReportHistory::with(<span class="stringliteral">&#39;currency&#39;</span>)-&gt;find($report);</div>
<div class="line"><span class="lineno">  507</span>        <span class="comment">// Validar acceso para el registro</span></div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordflow">if</span> (!auth()-&gt;user()-&gt;isAdmin()) {</div>
<div class="line"><span class="lineno">  509</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordflow">if</span> ($report &amp;&amp; $report-&gt;queryAccess($user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>])) {</div>
<div class="line"><span class="lineno">  511</span>                <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;errors.403&#39;</span>);</div>
<div class="line"><span class="lineno">  512</span>            }</div>
<div class="line"><span class="lineno">  513</span>        }</div>
<div class="line"><span class="lineno">  514</span>        $endDate = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[1];</div>
<div class="line"><span class="lineno">  515</span>        $level = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[2];</div>
<div class="line"><span class="lineno">  516</span>        $zero = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[3] == <span class="stringliteral">&#39;true&#39;</span> ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  517</span>        $date = count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1 ?</div>
<div class="line"><span class="lineno">  518</span>        explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0] . <span class="charliteral">&#39;-&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[1] :</div>
<div class="line"><span class="lineno">  519</span>        explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0];</div>
<div class="line"><span class="lineno">  520</span> </div>
<div class="line"><span class="lineno">  521</span>        $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a>($report-&gt;currency);</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>        $institution = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  526</span> </div>
<div class="line"><span class="lineno">  527</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  528</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  529</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  530</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  531</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  532</span>        }</div>
<div class="line"><span class="lineno">  533</span>        $institution_id = $institution-&gt;id;</div>
<div class="line"><span class="lineno">  534</span>        $arr = [];</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>        $formDate = $date . <span class="stringliteral">&#39;-01&#39;</span>;</div>
<div class="line"><span class="lineno">  537</span>        $fecha = Carbon::createFromFormat(<span class="stringliteral">&#39;Y-m-d&#39;</span>, $formDate);</div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">if</span> ($fecha-&gt;month == 1) {</div>
<div class="line"><span class="lineno">  539</span>            $lastAvalible = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  540</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  541</span>            $lastAvalible = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  542</span>        }</div>
<div class="line"><span class="lineno">  543</span>        $mesAnterior = $fecha-&gt;subMonth();</div>
<div class="line"><span class="lineno">  544</span>        $initDate2 = $mesAnterior-&gt;copy()-&gt;startOfMonth();</div>
<div class="line"><span class="lineno">  545</span>        $endDate2 = $mesAnterior-&gt;copy()-&gt;endOfMonth();</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>        <span class="keywordflow">if</span> (count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1) {</div>
<div class="line"><span class="lineno">  548</span>            $query = AccountingAccount::with([</div>
<div class="line"><span class="lineno">  549</span>                <span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($formDate, $endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  550</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  551</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  552</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  553</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  554</span>                        ) {</div>
<div class="line"><span class="lineno">  555</span>                            $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  556</span>                                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  557</span>                        }</div>
<div class="line"><span class="lineno">  558</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  559</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  560</span>                            <span class="keywordflow">if</span> ($query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno">  561</span>                                $query-&gt;whereBetween(<span class="stringliteral">&#39;from_date&#39;</span>, [$formDate, $endDate])-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true);</div>
<div class="line"><span class="lineno">  562</span>                            }</div>
<div class="line"><span class="lineno">  563</span>                        }</div>
<div class="line"><span class="lineno">  564</span>                    }</div>
<div class="line"><span class="lineno">  565</span>                },</div>
<div class="line"><span class="lineno">  566</span>            ]);</div>
<div class="line"><span class="lineno">  567</span>            $currency_id = $this-&gt;currency-&gt;id;</div>
<div class="line"><span class="lineno">  568</span>            $lastMonthBalances = AccountingAccount::select(</div>
<div class="line"><span class="lineno">  569</span>                <span class="stringliteral">&#39;accounting_accounts.denomination&#39;</span>,</div>
<div class="line"><span class="lineno">  570</span>                <span class="stringliteral">&#39;accounting_accounts.id&#39;</span>,</div>
<div class="line"><span class="lineno">  571</span>                <span class="stringliteral">&#39;accounting_entries.id as entry_id&#39;</span>,</div>
<div class="line"><span class="lineno">  572</span>                DB::raw(</div>
<div class="line"><span class="lineno">  573</span>                    <span class="stringliteral">&quot;CONCAT(</span></div>
<div class="line"><span class="lineno">  574</span><span class="stringliteral">                        accounting_accounts.group, &#39;.&#39;,</span></div>
<div class="line"><span class="lineno">  575</span><span class="stringliteral">                        accounting_accounts.subgroup, &#39;.&#39;,</span></div>
<div class="line"><span class="lineno">  576</span><span class="stringliteral">                        accounting_accounts.item, &#39;.&#39;,</span></div>
<div class="line"><span class="lineno">  577</span><span class="stringliteral">                        accounting_accounts.generic, &#39;.&#39;,</span></div>
<div class="line"><span class="lineno">  578</span><span class="stringliteral">                        accounting_accounts.specific, &#39;.&#39;,</span></div>
<div class="line"><span class="lineno">  579</span><span class="stringliteral">                        accounting_accounts.subspecific, &#39;.&#39;,</span></div>
<div class="line"><span class="lineno">  580</span><span class="stringliteral">                        accounting_accounts.institutional</span></div>
<div class="line"><span class="lineno">  581</span><span class="stringliteral">                    ) AS code_account&quot;</span></div>
<div class="line"><span class="lineno">  582</span>                ),</div>
<div class="line"><span class="lineno">  583</span>                <span class="stringliteral">&#39;accounting_entries.reference&#39;</span>,</div>
<div class="line"><span class="lineno">  584</span>                <span class="stringliteral">&#39;accounting_entries.concept&#39;</span>,</div>
<div class="line"><span class="lineno">  585</span>                <span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>,</div>
<div class="line"><span class="lineno">  586</span>                DB::raw(</div>
<div class="line"><span class="lineno">  587</span>                    <span class="stringliteral">&quot;CASE</span></div>
<div class="line"><span class="lineno">  588</span><span class="stringliteral">                        WHEN accounting_accounts.group IN (&#39;1&#39;, &#39;4&#39;, &#39;6&#39;) THEN</span></div>
<div class="line"><span class="lineno">  589</span><span class="stringliteral">                            (</span></div>
<div class="line"><span class="lineno">  590</span><span class="stringliteral">                                SELECT SUM(debit - assets)</span></div>
<div class="line"><span class="lineno">  591</span><span class="stringliteral">                                FROM accounting_entry_accounts</span></div>
<div class="line"><span class="lineno">  592</span><span class="stringliteral">                                WHERE accounting_entry_accounts.accounting_account_id = accounting_accounts.id</span></div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">                                AND accounting_entry_accounts.accounting_entry_id = accounting_entries.id</span></div>
<div class="line"><span class="lineno">  594</span><span class="stringliteral">                                AND accounting_entry_accounts.deleted_at IS NULL</span></div>
<div class="line"><span class="lineno">  595</span><span class="stringliteral">                            )</span></div>
<div class="line"><span class="lineno">  596</span><span class="stringliteral">                        WHEN accounting_accounts.group IN (&#39;2&#39;, &#39;3&#39;, &#39;5&#39;) THEN</span></div>
<div class="line"><span class="lineno">  597</span><span class="stringliteral">                            (</span></div>
<div class="line"><span class="lineno">  598</span><span class="stringliteral">                                SELECT SUM(assets - debit)</span></div>
<div class="line"><span class="lineno">  599</span><span class="stringliteral">                                FROM accounting_entry_accounts</span></div>
<div class="line"><span class="lineno">  600</span><span class="stringliteral">                                WHERE accounting_entry_accounts.accounting_account_id = accounting_accounts.id</span></div>
<div class="line"><span class="lineno">  601</span><span class="stringliteral">                                AND accounting_entry_accounts.accounting_entry_id = accounting_entries.id</span></div>
<div class="line"><span class="lineno">  602</span><span class="stringliteral">                                AND accounting_entry_accounts.deleted_at IS NULL</span></div>
<div class="line"><span class="lineno">  603</span><span class="stringliteral">                            )</span></div>
<div class="line"><span class="lineno">  604</span><span class="stringliteral">                        ELSE 0</span></div>
<div class="line"><span class="lineno">  605</span><span class="stringliteral">                    END AS total&quot;</span></div>
<div class="line"><span class="lineno">  606</span>                )</div>
<div class="line"><span class="lineno">  607</span>            )</div>
<div class="line"><span class="lineno">  608</span>                -&gt;leftJoin(<span class="stringliteral">&#39;accounting_entry_accounts&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.id&#39;</span>, <span class="charliteral">&#39;=&#39;</span>, <span class="stringliteral">&#39;accounting_entry_accounts.accounting_account_id&#39;</span>)</div>
<div class="line"><span class="lineno">  609</span>                -&gt;leftJoin(<span class="stringliteral">&#39;accounting_entries&#39;</span>, <span class="stringliteral">&#39;accounting_entry_accounts.accounting_entry_id&#39;</span>, <span class="charliteral">&#39;=&#39;</span>, <span class="stringliteral">&#39;accounting_entries.id&#39;</span>)</div>
<div class="line"><span class="lineno">  610</span>                -&gt;whereIn(<span class="stringliteral">&#39;accounting_accounts.group&#39;</span>, [1, 2, 3])</div>
<div class="line"><span class="lineno">  611</span>                -&gt;where(<span class="keyword">function</span> ($query) use ($formDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  612</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  613</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  614</span>                            $query-&gt;where(<span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, $formDate)</div>
<div class="line"><span class="lineno">  615</span>                            -&gt;where(<span class="stringliteral">&#39;accounting_entries.approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  616</span>                            -&gt;where(<span class="stringliteral">&#39;accounting_entries.institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  617</span>                        ) {</div>
<div class="line"><span class="lineno">  618</span>                            $query-&gt;where(<span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>, <span class="stringliteral">&#39;&lt;&#39;</span>, $formDate)</div>
<div class="line"><span class="lineno">  619</span>                                -&gt;where(<span class="stringliteral">&#39;accounting_entries.approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  620</span>                                -&gt;where(<span class="stringliteral">&#39;accounting_entries.institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  621</span>                                -&gt;where(<span class="stringliteral">&#39;accounting_entries.deleted_at&#39;</span>, null);</div>
<div class="line"><span class="lineno">  622</span>                        }</div>
<div class="line"><span class="lineno">  623</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  624</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  625</span>                            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  626</span>                                $query-&gt;where(<span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>, <span class="charliteral">&#39;&lt;&#39;</span>, $formDate)</div>
<div class="line"><span class="lineno">  627</span>                                -&gt;where(<span class="stringliteral">&#39;accounting_entries.approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  628</span>                            ) {</div>
<div class="line"><span class="lineno">  629</span>                                $query-&gt;where(<span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>, <span class="stringliteral">&#39;&lt;&#39;</span>, $formDate)</div>
<div class="line"><span class="lineno">  630</span>                                    -&gt;where(<span class="stringliteral">&#39;accounting_entries.approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  631</span>                                    -&gt;where(<span class="stringliteral">&#39;accounting_entries.deleted_at&#39;</span>, null);</div>
<div class="line"><span class="lineno">  632</span>                            }</div>
<div class="line"><span class="lineno">  633</span>                        }</div>
<div class="line"><span class="lineno">  634</span>                    }</div>
<div class="line"><span class="lineno">  635</span>                })</div>
<div class="line"><span class="lineno">  636</span>                -&gt;whereRaw(<span class="stringliteral">&#39;accounting_entry_accounts.deleted_at IS NULL&#39;</span>)</div>
<div class="line"><span class="lineno">  637</span>                -&gt;groupBy(<span class="stringliteral">&#39;accounting_accounts.denomination&#39;</span>, <span class="stringliteral">&#39;accounting_entries.id&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.id&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.group&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.subgroup&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.item&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.generic&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.specific&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.subspecific&#39;</span>, <span class="stringliteral">&#39;accounting_accounts.institutional&#39;</span>, <span class="stringliteral">&#39;accounting_entries.reference&#39;</span>, <span class="stringliteral">&#39;accounting_entries.concept&#39;</span>, <span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>)</div>
<div class="line"><span class="lineno">  638</span>                -&gt;orderBy(<span class="stringliteral">&#39;accounting_entries.from_date&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  639</span>                -&gt;get();</div>
<div class="line"><span class="lineno">  640</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  641</span>            $query = AccountingAccount::with([</div>
<div class="line"><span class="lineno">  642</span>                <span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($date, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  643</span>                    <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  644</span>                        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  645</span>                            $query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  646</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  647</span>                        ) {</div>
<div class="line"><span class="lineno">  648</span>                            $query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  649</span>                                -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  650</span>                        }</div>
<div class="line"><span class="lineno">  651</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  652</span>                        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  653</span>                            <span class="keywordflow">if</span> ($query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno">  654</span>                                $query-&gt;whereYear(<span class="stringliteral">&#39;from_date&#39;</span>, $date)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true);</div>
<div class="line"><span class="lineno">  655</span>                            }</div>
<div class="line"><span class="lineno">  656</span>                        }</div>
<div class="line"><span class="lineno">  657</span>                    }</div>
<div class="line"><span class="lineno">  658</span>                },</div>
<div class="line"><span class="lineno">  659</span>            ]);</div>
<div class="line"><span class="lineno">  660</span>            $lastMonthBalances = [];</div>
<div class="line"><span class="lineno">  661</span>        }</div>
<div class="line"><span class="lineno">  662</span>        $query = $query-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [1, 2, 3])</div>
<div class="line"><span class="lineno">  663</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  664</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  665</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  666</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  667</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  668</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  669</span>            -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  670</span>        <span class="keywordflow">foreach</span> ($query as $account) {</div>
<div class="line"><span class="lineno">  671</span>            <span class="keywordflow">if</span> (!$account-&gt;entryAccount-&gt;isEmpty()) {</div>
<div class="line"><span class="lineno">  672</span>                <span class="keywordflow">foreach</span> ($account-&gt;entryAccount as $entrie) {</div>
<div class="line"><span class="lineno">  673</span>                    <span class="keywordflow">if</span> (!is_null($entrie-&gt;entries)) {</div>
<div class="line"><span class="lineno">  674</span>                        $balance = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0">getRealBalaceCalculator</a>(</div>
<div class="line"><span class="lineno">  675</span>                            $account-&gt;code[0],</div>
<div class="line"><span class="lineno">  676</span>                            $entrie-&gt;debit,</div>
<div class="line"><span class="lineno">  677</span>                            $entrie-&gt;assets</div>
<div class="line"><span class="lineno">  678</span>                        );</div>
<div class="line"><span class="lineno">  679</span>                        <span class="keywordflow">if</span> (!array_key_exists($account-&gt;code, $arr)) {</div>
<div class="line"><span class="lineno">  680</span>                            $data = [</div>
<div class="line"><span class="lineno">  681</span>                                <span class="stringliteral">&quot;id&quot;</span> =&gt; $account-&gt;id,</div>
<div class="line"><span class="lineno">  682</span>                                <span class="stringliteral">&quot;code&quot;</span> =&gt; $account-&gt;code,</div>
<div class="line"><span class="lineno">  683</span>                                <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno">  684</span>                                <span class="stringliteral">&quot;balance&quot;</span> =&gt; $balance,</div>
<div class="line"><span class="lineno">  685</span>                                <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  686</span>                                <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno">  687</span>                                <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  688</span>                            ];</div>
<div class="line"><span class="lineno">  689</span>                            $arr[$account-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  690</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  691</span>                            $arr[$account-&gt;code][<span class="stringliteral">&#39;balance&#39;</span>] += $balance;</div>
<div class="line"><span class="lineno">  692</span>                        }</div>
<div class="line"><span class="lineno">  693</span>                    }</div>
<div class="line"><span class="lineno">  694</span>                }</div>
<div class="line"><span class="lineno">  695</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  696</span>                $data = [</div>
<div class="line"><span class="lineno">  697</span>                    <span class="stringliteral">&quot;id&quot;</span> =&gt; $account-&gt;id,</div>
<div class="line"><span class="lineno">  698</span>                    <span class="stringliteral">&quot;code&quot;</span> =&gt; $account-&gt;code,</div>
<div class="line"><span class="lineno">  699</span>                    <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno">  700</span>                    <span class="stringliteral">&quot;balance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  701</span>                    <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  702</span>                    <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno">  703</span>                    <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  704</span>                ];</div>
<div class="line"><span class="lineno">  705</span>                $arr[$account-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  706</span>            }</div>
<div class="line"><span class="lineno">  707</span>        }</div>
<div class="line"><span class="lineno">  708</span>        <span class="keywordflow">foreach</span> ($lastMonthBalances as $account) {</div>
<div class="line"><span class="lineno">  709</span>            $balance = 0;</div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">if</span> (!array_key_exists($account-&gt;code_account, $arr)) {</div>
<div class="line"><span class="lineno">  711</span>                $data = [</div>
<div class="line"><span class="lineno">  712</span>                    <span class="stringliteral">&quot;id&quot;</span> =&gt; $account-&gt;id,</div>
<div class="line"><span class="lineno">  713</span>                    <span class="stringliteral">&quot;code&quot;</span> =&gt; $account-&gt;code_account,</div>
<div class="line"><span class="lineno">  714</span>                    <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $account-&gt;denomination,</div>
<div class="line"><span class="lineno">  715</span>                    <span class="stringliteral">&quot;balance&quot;</span> =&gt; 0,</div>
<div class="line"><span class="lineno">  716</span>                    <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; $account-&gt;total,</div>
<div class="line"><span class="lineno">  717</span>                    <span class="stringliteral">&quot;level&quot;</span> =&gt; 6,</div>
<div class="line"><span class="lineno">  718</span>                    <span class="stringliteral">&quot;parent&quot;</span> =&gt; [],</div>
<div class="line"><span class="lineno">  719</span>                ];</div>
<div class="line"><span class="lineno">  720</span>                $arr[$account-&gt;code_account] = $data;</div>
<div class="line"><span class="lineno">  721</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  722</span>                $arr[$account-&gt;code_account][<span class="stringliteral">&#39;lastMonthBalance&#39;</span>] += $account-&gt;total;</div>
<div class="line"><span class="lineno">  723</span>            }</div>
<div class="line"><span class="lineno">  724</span>        }</div>
<div class="line"><span class="lineno">  725</span>        $parentsArray = [];</div>
<div class="line"><span class="lineno">  726</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  727</span>            $b = explode(<span class="charliteral">&#39;.&#39;</span>, $a[<span class="stringliteral">&quot;code&quot;</span>]);</div>
<div class="line"><span class="lineno">  728</span>            <span class="keywordflow">if</span> ($b[6] == 000) {</div>
<div class="line"><span class="lineno">  729</span>                unset($arr[$key]);</div>
<div class="line"><span class="lineno">  730</span>            }</div>
<div class="line"><span class="lineno">  731</span>        }</div>
<div class="line"><span class="lineno">  732</span>        $accountingAccount = AccountingAccount::where(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&quot;3&quot;</span>)</div>
<div class="line"><span class="lineno">  733</span>            -&gt;where(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&quot;2&quot;</span>)</div>
<div class="line"><span class="lineno">  734</span>            -&gt;where(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&quot;5&quot;</span>)</div>
<div class="line"><span class="lineno">  735</span>            -&gt;where(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&quot;02&quot;</span>)</div>
<div class="line"><span class="lineno">  736</span>            -&gt;where(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&quot;01&quot;</span>)</div>
<div class="line"><span class="lineno">  737</span>            -&gt;where(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&quot;01&quot;</span>)</div>
<div class="line"><span class="lineno">  738</span>            -&gt;where(<span class="stringliteral">&#39;institutional&#39;</span>, <span class="stringliteral">&quot;001&quot;</span>)</div>
<div class="line"><span class="lineno">  739</span>            -&gt;where(<span class="stringliteral">&#39;active&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>        $accountValue = Parameter::where(<span class="stringliteral">&#39;p_key&#39;</span>, <span class="stringliteral">&#39;close_fiscal_year_account&#39;</span>)-&gt;get(<span class="stringliteral">&#39;p_value&#39;</span>)-&gt;first()?-&gt;p_value;</div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordflow">if</span> ($accountValue) {</div>
<div class="line"><span class="lineno">  743</span>            $nameEDR = AccountingAccount::find($accountValue)-&gt;code;</div>
<div class="line"><span class="lineno">  744</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  745</span>            $nameEDR = $accountingAccount-&gt;code;</div>
<div class="line"><span class="lineno">  746</span>        }</div>
<div class="line"><span class="lineno">  747</span> </div>
<div class="line"><span class="lineno">  748</span>        <span class="keywordflow">if</span> ($accountingAccount) {</div>
<div class="line"><span class="lineno">  749</span>            $data = [</div>
<div class="line"><span class="lineno">  750</span>                <span class="stringliteral">&quot;id&quot;</span> =&gt; $accountingAccount-&gt;id,</div>
<div class="line"><span class="lineno">  751</span>                <span class="stringliteral">&quot;code&quot;</span> =&gt; $nameEDR,</div>
<div class="line"><span class="lineno">  752</span>                <span class="stringliteral">&quot;denomination&quot;</span> =&gt; <span class="stringliteral">&quot;RESULTADOS DEL EJERCICIO&quot;</span>,</div>
<div class="line"><span class="lineno">  753</span>                <span class="stringliteral">&quot;balance&quot;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc">getTotalResults</a>($endDate, $formDate),</div>
<div class="line"><span class="lineno">  754</span>                <span class="stringliteral">&quot;level&quot;</span> =&gt; 2,</div>
<div class="line"><span class="lineno">  755</span>                <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac">getLastTotalResults</a>($initDate2, $endDate2, $lastAvalible),</div>
<div class="line"><span class="lineno">  756</span>                <span class="stringliteral">&quot;parent&quot;</span> =&gt; $accountingAccount-&gt;parent_id,</div>
<div class="line"><span class="lineno">  757</span>            ];</div>
<div class="line"><span class="lineno">  758</span>            $arr[<span class="stringliteral">&quot;3.2.5.02.01.01.001&quot;</span>] = $data;</div>
<div class="line"><span class="lineno">  759</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  760</span>            $data = [</div>
<div class="line"><span class="lineno">  761</span>                <span class="stringliteral">&quot;id&quot;</span> =&gt; 348,</div>
<div class="line"><span class="lineno">  762</span>                <span class="stringliteral">&quot;code&quot;</span> =&gt; $nameEDR,</div>
<div class="line"><span class="lineno">  763</span>                <span class="stringliteral">&quot;denomination&quot;</span> =&gt; <span class="stringliteral">&quot;RESULTADOS DEL EJERCICIO&quot;</span>,</div>
<div class="line"><span class="lineno">  764</span>                <span class="stringliteral">&quot;balance&quot;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc">getTotalResults</a>($endDate, $formDate),</div>
<div class="line"><span class="lineno">  765</span>                <span class="stringliteral">&quot;level&quot;</span> =&gt; 2,</div>
<div class="line"><span class="lineno">  766</span>                <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac">getLastTotalResults</a>($initDate2, $endDate2, $lastAvalible),</div>
<div class="line"><span class="lineno">  767</span>                <span class="stringliteral">&quot;parent&quot;</span> =&gt; 346,</div>
<div class="line"><span class="lineno">  768</span>            ];</div>
<div class="line"><span class="lineno">  769</span>            $arr[<span class="stringliteral">&quot;3.2.5.02.01.01.001&quot;</span>] = $data;</div>
<div class="line"><span class="lineno">  770</span>        }</div>
<div class="line"><span class="lineno">  771</span> </div>
<div class="line"><span class="lineno">  772</span>        <span class="keywordflow">foreach</span> ($arr as $finalAccount) {</div>
<div class="line"><span class="lineno">  773</span>            $parents = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aece89e986c4cfa1db456acdb13987406">getAccountParents</a>($finalAccount, []);</div>
<div class="line"><span class="lineno">  774</span>            array_push($parentsArray, $parents);</div>
<div class="line"><span class="lineno">  775</span>        }</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">foreach</span> ($parentsArray as $pArray) {</div>
<div class="line"><span class="lineno">  778</span>            <span class="keywordflow">foreach</span> ($pArray as $pA) {</div>
<div class="line"><span class="lineno">  779</span>                <span class="keywordflow">if</span> (!array_key_exists($pA-&gt;code, $arr)) {</div>
<div class="line"><span class="lineno">  780</span>                    $data = [</div>
<div class="line"><span class="lineno">  781</span>                        <span class="stringliteral">&quot;id&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;id&#39;</span>],</div>
<div class="line"><span class="lineno">  782</span>                        <span class="stringliteral">&quot;code&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;code&#39;</span>],</div>
<div class="line"><span class="lineno">  783</span>                        <span class="stringliteral">&quot;denomination&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;denomination&#39;</span>],</div>
<div class="line"><span class="lineno">  784</span>                        <span class="stringliteral">&quot;balance&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;balance&#39;</span>],</div>
<div class="line"><span class="lineno">  785</span>                        <span class="stringliteral">&quot;lastMonthBalance&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>],</div>
<div class="line"><span class="lineno">  786</span>                        <span class="stringliteral">&quot;level&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;level&#39;</span>] &lt; 0 ? $pA[<span class="stringliteral">&#39;level&#39;</span>] * -1 : $pA[<span class="stringliteral">&#39;level&#39;</span>],</div>
<div class="line"><span class="lineno">  787</span>                        <span class="stringliteral">&quot;parent&quot;</span> =&gt; $pA[<span class="stringliteral">&#39;parent_id&#39;</span>],</div>
<div class="line"><span class="lineno">  788</span>                    ];</div>
<div class="line"><span class="lineno">  789</span>                    $arr[$pA-&gt;code] = $data;</div>
<div class="line"><span class="lineno">  790</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  791</span>                    $childrenCode = explode(<span class="charliteral">&#39;.&#39;</span>, $pA[<span class="stringliteral">&#39;code&#39;</span>]);</div>
<div class="line"><span class="lineno">  792</span>                    <span class="keywordflow">if</span> ($childrenCode[6] == <span class="stringliteral">&#39;000&#39;</span> &amp;&amp; $arr[$pA-&gt;code][<span class="stringliteral">&#39;code&#39;</span>] != <span class="stringliteral">&#39;3.2.5.02.01.01.001&#39;</span>) {</div>
<div class="line"><span class="lineno">  793</span>                        $arr[$pA-&gt;code][<span class="stringliteral">&#39;balance&#39;</span>] += $pA[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno">  794</span>                        $arr[$pA-&gt;code][<span class="stringliteral">&#39;lastMonthBalance&#39;</span>] += $pA[<span class="stringliteral">&#39;lastMonthBalance&#39;</span>];</div>
<div class="line"><span class="lineno">  795</span>                    }</div>
<div class="line"><span class="lineno">  796</span>                }</div>
<div class="line"><span class="lineno">  797</span>            }</div>
<div class="line"><span class="lineno">  798</span>        }</div>
<div class="line"><span class="lineno">  799</span>        ksort($arr);</div>
<div class="line"><span class="lineno">  800</span> </div>
<div class="line"><span class="lineno">  801</span>        $replacements = array(</div>
<div class="line"><span class="lineno">  802</span>            <span class="stringliteral">&quot;0&quot;</span> =&gt; array(<span class="stringliteral">&quot;value&quot;</span> =&gt; <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;length&quot;</span> =&gt; 1),</div>
<div class="line"><span class="lineno">  803</span>            <span class="stringliteral">&quot;00.000&quot;</span> =&gt; array(<span class="stringliteral">&quot;value&quot;</span> =&gt; <span class="stringliteral">&quot;00.000&quot;</span>, <span class="stringliteral">&quot;length&quot;</span> =&gt; 6),</div>
<div class="line"><span class="lineno">  804</span>            <span class="stringliteral">&quot;00.00.000&quot;</span> =&gt; array(<span class="stringliteral">&quot;value&quot;</span> =&gt; <span class="stringliteral">&quot;00.00.000&quot;</span>, <span class="stringliteral">&quot;length&quot;</span> =&gt; 9),</div>
<div class="line"><span class="lineno">  805</span>            <span class="stringliteral">&quot;00.00.00.000&quot;</span> =&gt; array(<span class="stringliteral">&quot;value&quot;</span> =&gt; <span class="stringliteral">&quot;00.00.00.000&quot;</span>, <span class="stringliteral">&quot;length&quot;</span> =&gt; 12),</div>
<div class="line"><span class="lineno">  806</span>            <span class="stringliteral">&quot;0.00.00.00.000&quot;</span> =&gt; array(<span class="stringliteral">&quot;value&quot;</span> =&gt; <span class="stringliteral">&quot;0.00.00.00.000&quot;</span>, <span class="stringliteral">&quot;length&quot;</span> =&gt; 14),</div>
<div class="line"><span class="lineno">  807</span>            <span class="stringliteral">&quot;0.0.00.00.00.000&quot;</span> =&gt; array(<span class="stringliteral">&quot;value&quot;</span> =&gt; <span class="stringliteral">&quot;0.0.00.00.00.000&quot;</span>, <span class="stringliteral">&quot;length&quot;</span> =&gt; 16),</div>
<div class="line"><span class="lineno">  808</span>        );</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; &amp;$value) {</div>
<div class="line"><span class="lineno">  811</span>            <span class="keywordflow">foreach</span> ($replacements as $replacement) {</div>
<div class="line"><span class="lineno">  812</span>                $length = $replacement[<span class="stringliteral">&#39;length&#39;</span>];</div>
<div class="line"><span class="lineno">  813</span>                <span class="keywordflow">if</span> (substr($key, -$length) != $replacement[<span class="stringliteral">&#39;value&#39;</span>]) {</div>
<div class="line"><span class="lineno">  814</span>                    $sum = $value[<span class="stringliteral">&#39;balance&#39;</span>];</div>
<div class="line"><span class="lineno">  815</span>                    $key_zero = substr_replace($key, $replacement[<span class="stringliteral">&#39;value&#39;</span>], -$length);</div>
<div class="line"><span class="lineno">  816</span>                }</div>
<div class="line"><span class="lineno">  817</span>            }</div>
<div class="line"><span class="lineno">  818</span>        }</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>        <span class="keywordflow">if</span> ($level == 1) {</div>
<div class="line"><span class="lineno">  821</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  822</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>                <span class="keywordflow">if</span> ($b[1] != 0) {</div>
<div class="line"><span class="lineno">  825</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  826</span>                }</div>
<div class="line"><span class="lineno">  827</span>            }</div>
<div class="line"><span class="lineno">  828</span>        } elseif ($level == 2) {</div>
<div class="line"><span class="lineno">  829</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  830</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>                <span class="keywordflow">if</span> ($b[2] != 0) {</div>
<div class="line"><span class="lineno">  833</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  834</span>                }</div>
<div class="line"><span class="lineno">  835</span>            }</div>
<div class="line"><span class="lineno">  836</span>        } elseif ($level == 3) {</div>
<div class="line"><span class="lineno">  837</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  838</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>                <span class="keywordflow">if</span> ($b[3] != 0) {</div>
<div class="line"><span class="lineno">  841</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  842</span>                }</div>
<div class="line"><span class="lineno">  843</span>            }</div>
<div class="line"><span class="lineno">  844</span>        } elseif ($level == 4) {</div>
<div class="line"><span class="lineno">  845</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  846</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  847</span> </div>
<div class="line"><span class="lineno">  848</span>                <span class="keywordflow">if</span> ($b[4] != 0) {</div>
<div class="line"><span class="lineno">  849</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  850</span>                }</div>
<div class="line"><span class="lineno">  851</span>            }</div>
<div class="line"><span class="lineno">  852</span>        } elseif ($level == 5) {</div>
<div class="line"><span class="lineno">  853</span>            <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  854</span>                $b = explode(<span class="charliteral">&#39;.&#39;</span>, $key);</div>
<div class="line"><span class="lineno">  855</span> </div>
<div class="line"><span class="lineno">  856</span>                <span class="keywordflow">if</span> ($b[5] != 0) {</div>
<div class="line"><span class="lineno">  857</span>                    unset($arr[$key]);</div>
<div class="line"><span class="lineno">  858</span>                }</div>
<div class="line"><span class="lineno">  859</span>            }</div>
<div class="line"><span class="lineno">  860</span>        }</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>        $totArr = [];</div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>        <span class="keywordflow">foreach</span> ($arr as $key =&gt; $a) {</div>
<div class="line"><span class="lineno">  865</span>            <span class="keywordflow">if</span> ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 1) {</div>
<div class="line"><span class="lineno">  866</span>                $totArr[1][$key] = $a;</div>
<div class="line"><span class="lineno">  867</span>            } elseif ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 2) {</div>
<div class="line"><span class="lineno">  868</span>                $totArr[2][$key] = $a;</div>
<div class="line"><span class="lineno">  869</span>            } elseif ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 3) {</div>
<div class="line"><span class="lineno">  870</span>                $totArr[3][$key] = $a;</div>
<div class="line"><span class="lineno">  871</span>            } elseif ($a[<span class="stringliteral">&#39;code&#39;</span>][0] == 4) {</div>
<div class="line"><span class="lineno">  872</span>                $totArr[4][$key] = $a;</div>
<div class="line"><span class="lineno">  873</span>            }</div>
<div class="line"><span class="lineno">  874</span>        }</div>
<div class="line"><span class="lineno">  875</span> </div>
<div class="line"><span class="lineno">  876</span>        <span class="comment">/* Configuración general de la apliación */</span></div>
<div class="line"><span class="lineno">  877</span>        $setting = Setting::all()-&gt;first();</div>
<div class="line"><span class="lineno">  878</span> </div>
<div class="line"><span class="lineno">  879</span>        <span class="comment">/* Base para generar el pdf */</span></div>
<div class="line"><span class="lineno">  880</span>        $pdf = <span class="keyword">new</span> ReportRepository();</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>        <span class="comment">/* Definición de las características generales de la página pdf */</span></div>
<div class="line"><span class="lineno">  883</span> </div>
<div class="line"><span class="lineno">  884</span>        <span class="keywordflow">if</span> (count(explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)) &gt; 1) {</div>
<div class="line"><span class="lineno">  885</span>            $lastOfThePreviousMonth = date(</div>
<div class="line"><span class="lineno">  886</span>                <span class="charliteral">&#39;d&#39;</span>,</div>
<div class="line"><span class="lineno">  887</span>                (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1], 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1)</div>
<div class="line"><span class="lineno">  888</span>            );</div>
<div class="line"><span class="lineno">  889</span>            $last = $lastOfThePreviousMonth . <span class="charliteral">&#39;/&#39;</span> . (explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] - 1) . <span class="charliteral">&#39;/&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0];</div>
<div class="line"><span class="lineno">  890</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  891</span>            $last = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><span class="lineno">  892</span>        }</div>
<div class="line"><span class="lineno">  893</span>        $institution = Institution::find(1);</div>
<div class="line"><span class="lineno">  894</span>        <span class="keywordflow">if</span> ($xml) {</div>
<div class="line"><span class="lineno">  895</span>            <span class="keywordflow">return</span> Excel::download(<span class="keyword">new</span> AccountingBalanceSheetExport([</div>
<div class="line"><span class="lineno">  896</span>            <span class="stringliteral">&#39;pdf&#39;</span> =&gt; $pdf,</div>
<div class="line"><span class="lineno">  897</span>            <span class="stringliteral">&#39;records&#39;</span> =&gt; $totArr,</div>
<div class="line"><span class="lineno">  898</span>            <span class="stringliteral">&#39;currency&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a>(),</div>
<div class="line"><span class="lineno">  899</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno">  900</span>            <span class="stringliteral">&#39;zero&#39;</span> =&gt; $zero,</div>
<div class="line"><span class="lineno">  901</span>            <span class="stringliteral">&#39;endDate&#39;</span> =&gt; $endDate,</div>
<div class="line"><span class="lineno">  902</span>            <span class="stringliteral">&#39;monthBefore&#39;</span> =&gt; $last,</div>
<div class="line"><span class="lineno">  903</span>            <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno">  904</span>            ]), now()-&gt;format(<span class="stringliteral">&#39;d-m-Y&#39;</span>) . <span class="stringliteral">&#39;_ESTADO_DE_SITUACIÓN_FINANCIERA.xlsx&#39;</span>);</div>
<div class="line"><span class="lineno">  905</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  906</span>            $pdf-&gt;setConfig([<span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution, <span class="stringliteral">&#39;urlVerify&#39;</span> =&gt; url(<span class="stringliteral">&#39;report/balanceSheet/&#39;</span> . $report-&gt;id)]);</div>
<div class="line"><span class="lineno">  907</span>            $pdf-&gt;setHeader(<span class="stringliteral">&#39;Reporte de Contabilidad&#39;</span>, <span class="stringliteral">&#39;Reporte de Estado de Situación financiera&#39;</span>);</div>
<div class="line"><span class="lineno">  908</span>            $pdf-&gt;setFooter();</div>
<div class="line"><span class="lineno">  909</span>            $pdf-&gt;setBody(<span class="stringliteral">&#39;accounting::pdf.balance_sheet&#39;</span>, <span class="keyword">true</span>, [</div>
<div class="line"><span class="lineno">  910</span>            <span class="stringliteral">&#39;pdf&#39;</span> =&gt; $pdf,</div>
<div class="line"><span class="lineno">  911</span>            <span class="stringliteral">&#39;records&#39;</span> =&gt; $totArr,</div>
<div class="line"><span class="lineno">  912</span>            <span class="stringliteral">&#39;currency&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a>(),</div>
<div class="line"><span class="lineno">  913</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno">  914</span>            <span class="stringliteral">&#39;zero&#39;</span> =&gt; $zero,</div>
<div class="line"><span class="lineno">  915</span>            <span class="stringliteral">&#39;endDate&#39;</span> =&gt; $endDate,</div>
<div class="line"><span class="lineno">  916</span>            <span class="stringliteral">&#39;monthBefore&#39;</span> =&gt; $last,</div>
<div class="line"><span class="lineno">  917</span>            <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno">  918</span>            ]);</div>
<div class="line"><span class="lineno">  919</span>        }</div>
<div class="line"><span class="lineno">  920</span>    }</div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a4a9edafe924a4efeb9d1a9daf1bc1dfe"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\setCurrency</a></div><div class="ttdeci">setCurrency($currency)</div><div class="ttdoc">Establece la moneda.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00126">AccountingBalanceSheetController.php:126</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a55459f9e07fdc6b85953811024ab61d3"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getCurrency</a></div><div class="ttdeci">getCurrency()</div><div class="ttdoc">Obtiene la moneda.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00112">AccountingBalanceSheetController.php:112</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_a5c67a4c228ee25967d4b59b72bc21bac"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getLastTotalResults</a></div><div class="ttdeci">getLastTotalResults($formDate, $endDate, $lastAvalible)</div><div class="ttdoc">Realiza el cálculo de las cuentas de acuerdo a como suman.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01386">AccountingBalanceSheetController.php:1386</a></div></div>
<div class="ttc" id="aclassModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_html_abc5a35a2b0439e6e613eeb2ed98f50dc"><div class="ttname"><a href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc">Modules\Accounting\Http\Controllers\Reports\AccountingBalanceSheetController\getTotalResults</a></div><div class="ttdeci">getTotalResults($date, $formDate)</div><div class="ttdoc">Realiza el cálculo de las cuentas de acuerdo a como suman.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01311">AccountingBalanceSheetController.php:1311</a></div></div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01464">AccountingBalanceSheetController\getAccountParents()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00112">AccountingBalanceSheetController\getCurrency()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01386">AccountingBalanceSheetController\getLastTotalResults()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01273">AccountingBalanceSheetController\getRealBalaceCalculator()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01311">AccountingBalanceSheetController\getTotalResults()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00126">AccountingBalanceSheetController\setCurrency()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00490">AccountingBalanceSheetController\export()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_cgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="5,153,48,179"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aece89e986c4cfa1db456acdb13987406" title="Método para buscar las cuentas padre de una formulación." alt="" coords="99,29,242,55"/>
<area shape="poly" title=" " alt="" coords="31,152,54,109,72,85,94,64,102,59,105,63,98,68,76,88,59,112,36,155"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3" title="Obtiene la moneda." alt="" coords="120,79,221,104"/>
<area shape="poly" title=" " alt="" coords="41,151,65,132,95,113,109,107,111,111,97,118,68,136,44,155"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c67a4c228ee25967d4b59b72bc21bac" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="96,128,245,153"/>
<area shape="poly" title=" " alt="" coords="48,160,84,153,85,158,49,165"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a0db19fdd230ae36f5cadc50c61a451b0" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="293,179,476,204"/>
<area shape="poly" title=" " alt="" coords="48,165,280,181,280,187,48,170"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#abc5a35a2b0439e6e613eeb2ed98f50dc" title="Realiza el cálculo de las cuentas de acuerdo a como suman." alt="" coords="109,229,232,255"/>
<area shape="poly" title=" " alt="" coords="47,177,97,208,126,221,123,226,95,212,45,181"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece la moneda." alt="" coords="121,279,221,304"/>
<area shape="poly" title=" " alt="" coords="36,177,59,220,76,243,98,264,110,271,107,276,94,268,72,247,54,223,31,180"/>
<area shape="poly" title=" " alt="" coords="146,30,141,21,144,11,154,5,171,3,191,6,199,15,195,18,188,11,171,8,156,10,148,15,146,20,151,28"/>
<area shape="poly" title=" " alt="" coords="226,151,318,173,317,178,225,156"/>
<area shape="poly" title=" " alt="" coords="225,227,317,205,318,210,226,232"/>
</map>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a5c0379fc68799a3f32447bd6760dcd02_icgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="117,5,160,31"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="103,21,70,21,70,15,103,15"/>
</map>
</div>

</div>
</div>
<a id="a23c281813aa2f3d73fe2c7089b2b7f03" name="a23c281813aa2f3d73fe2c7089b2b7f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23c281813aa2f3d73fe2c7089b2b7f03">&#9670;&#160;</a></span>pdfSign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdfSign </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$report</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de balance general. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$report</td><td>id de reporte y su información</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>mixed </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00931">931</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  932</span>    {</div>
<div class="line"><span class="lineno">  933</span>        $report = AccountingReportHistory::with(<span class="stringliteral">&#39;currency&#39;</span>)-&gt;find($report);</div>
<div class="line"><span class="lineno">  934</span>        <span class="comment">// Validar acceso para el registro</span></div>
<div class="line"><span class="lineno">  935</span>        <span class="keywordflow">if</span> (!auth()-&gt;user()-&gt;isAdmin()) {</div>
<div class="line"><span class="lineno">  936</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  937</span>            <span class="keywordflow">if</span> ($report &amp;&amp; $report-&gt;queryAccess($user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>])) {</div>
<div class="line"><span class="lineno">  938</span>                <span class="keywordflow">return</span> view(<span class="stringliteral">&#39;errors.403&#39;</span>);</div>
<div class="line"><span class="lineno">  939</span>            }</div>
<div class="line"><span class="lineno">  940</span>        }</div>
<div class="line"><span class="lineno">  941</span>        $endDate = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[1];</div>
<div class="line"><span class="lineno">  942</span>        $level = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[2];</div>
<div class="line"><span class="lineno">  943</span>        $zero = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[3];</div>
<div class="line"><span class="lineno">  944</span>        $date = explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[0] . <span class="charliteral">&#39;-&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $endDate)[1];</div>
<div class="line"><span class="lineno">  945</span>        $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a>($report-&gt;currency);</div>
<div class="line"><span class="lineno">  946</span> </div>
<div class="line"><span class="lineno">  947</span>        $institution_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  948</span> </div>
<div class="line"><span class="lineno">  949</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  952</span>            $institution_id = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><span class="lineno">  953</span>        }</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>        <span class="comment">/* Establece la consulta de ralación de nivel 1 que se desea realizar */</span></div>
<div class="line"><span class="lineno">  956</span>        $level_1 = <span class="stringliteral">&#39;entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>        <span class="comment">/* Establece la consulta de ralación de nivel 2 que se desea realizar */</span></div>
<div class="line"><span class="lineno">  959</span>        $level_2 = <span class="stringliteral">&#39;children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  960</span> </div>
<div class="line"><span class="lineno">  961</span>        <span class="comment">/* Establece la consulta de ralación de nivel 3 que se desea realizar */</span></div>
<div class="line"><span class="lineno">  962</span>        $level_3 = <span class="stringliteral">&#39;children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  963</span> </div>
<div class="line"><span class="lineno">  964</span>        <span class="comment">/* Establece la consulta de ralación de nivel 4 que se desea realizar */</span></div>
<div class="line"><span class="lineno">  965</span>        $level_4 = <span class="stringliteral">&#39;children.children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  966</span> </div>
<div class="line"><span class="lineno">  967</span>        <span class="comment">/* Establece la consulta de ralación de nivel 4 que se desea realizar */</span></div>
<div class="line"><span class="lineno">  968</span>        $level_5 = <span class="stringliteral">&#39;children.children.children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>        <span class="comment">/* Establece la consulta de ralación de nivel 6 que se desea realizar */</span></div>
<div class="line"><span class="lineno">  971</span>        $level_6 = <span class="stringliteral">&#39;children.children.children.children.children.entryAccount.entries&#39;</span>;</div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>        <span class="comment">/* Se realiza la consulta de cada cuenta y asiento que pertenezca a ACTIVO, PASIVO, PATRIMONIO y CUENTA DE ORDEN */</span></div>
<div class="line"><span class="lineno">  974</span>        $records = AccountingAccount::with($level_1, $level_2, $level_3, $level_4, $level_5, $level_6)</div>
<div class="line"><span class="lineno">  975</span>            -&gt;with([$level_1 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  976</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  977</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  978</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  979</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  980</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  981</span>                }</div>
<div class="line"><span class="lineno">  982</span>            }])</div>
<div class="line"><span class="lineno">  983</span>            -&gt;with([$level_2 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  984</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  985</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  986</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  987</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  988</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  989</span>                }</div>
<div class="line"><span class="lineno">  990</span>            }])</div>
<div class="line"><span class="lineno">  991</span>            -&gt;with([$level_3 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  992</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  993</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  994</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  995</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno">  996</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  997</span>                }</div>
<div class="line"><span class="lineno">  998</span>            }])</div>
<div class="line"><span class="lineno">  999</span>            -&gt;with([$level_4 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno"> 1000</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno"> 1001</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1002</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno"> 1003</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno"> 1004</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1005</span>                }</div>
<div class="line"><span class="lineno"> 1006</span>            }])</div>
<div class="line"><span class="lineno"> 1007</span>            -&gt;with([$level_5 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno"> 1008</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno"> 1009</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1010</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno"> 1011</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno"> 1012</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1013</span>                }</div>
<div class="line"><span class="lineno"> 1014</span>            }])</div>
<div class="line"><span class="lineno"> 1015</span>            -&gt;with([$level_6 =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno"> 1016</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno"> 1017</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno"> 1018</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno"> 1019</span>                } elseif ($is_admin) {</div>
<div class="line"><span class="lineno"> 1020</span>                    $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1021</span>                }</div>
<div class="line"><span class="lineno"> 1022</span>            }])</div>
<div class="line"><span class="lineno"> 1023</span>            -&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [1, 2, 3, 4])</div>
<div class="line"><span class="lineno"> 1024</span>            -&gt;where(<span class="stringliteral">&#39;subgroup&#39;</span>, 0)</div>
<div class="line"><span class="lineno"> 1025</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno"> 1026</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno"> 1027</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno"> 1028</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno"> 1029</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno"> 1030</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno"> 1031</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>        <span class="comment">/* Registros de las cuentas */</span></div>
<div class="line"><span class="lineno"> 1034</span>        $records = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa825cb7aedbc4c92b3fcc708263200bc">formatDataInArray</a>($records, $date, $endDate);</div>
<div class="line"><span class="lineno"> 1035</span> </div>
<div class="line"><span class="lineno"> 1036</span>        <span class="comment">/* Configuración general de la apliación */</span></div>
<div class="line"><span class="lineno"> 1037</span>        $setting = Setting::all()-&gt;first();</div>
<div class="line"><span class="lineno"> 1038</span> </div>
<div class="line"><span class="lineno"> 1039</span>        <span class="comment">/* Base para generar el pdf */</span></div>
<div class="line"><span class="lineno"> 1040</span>        $pdf = <span class="keyword">new</span> ReportRepositorySign();</div>
<div class="line"><span class="lineno"> 1041</span> </div>
<div class="line"><span class="lineno"> 1042</span>        <span class="comment">/* Definición de las características generales de la página pdf */</span></div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>        $lastOfThePreviousMonth = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1], 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno"> 1045</span>        $last = ($lastOfThePreviousMonth . <span class="charliteral">&#39;/&#39;</span> . (explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] - 1) . <span class="charliteral">&#39;/&#39;</span> . explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]);</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>        $institution = Institution::find(1);</div>
<div class="line"><span class="lineno"> 1048</span>        $pdf-&gt;setConfig([<span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution, <span class="stringliteral">&#39;urlVerify&#39;</span> =&gt; url(<span class="stringliteral">&#39;report/balanceSheetSign/&#39;</span> . $report-&gt;id)]);</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>        $pdf-&gt;setHeader(<span class="stringliteral">&#39;Reporte de Contabilidad&#39;</span>, <span class="stringliteral">&#39;Reporte de Estado de Situación financiera&#39;</span>);</div>
<div class="line"><span class="lineno"> 1051</span>        $pdf-&gt;setFooter();</div>
<div class="line"><span class="lineno"> 1052</span>        $sign = $pdf-&gt;setBody(<span class="stringliteral">&#39;accounting::pdf.balance_sheet&#39;</span>, <span class="keyword">true</span>, [</div>
<div class="line"><span class="lineno"> 1053</span>            <span class="stringliteral">&#39;pdf&#39;</span> =&gt; $pdf,</div>
<div class="line"><span class="lineno"> 1054</span>            <span class="stringliteral">&#39;records&#39;</span> =&gt; $records,</div>
<div class="line"><span class="lineno"> 1055</span>            <span class="stringliteral">&#39;currency&#39;</span> =&gt; $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3">getCurrency</a>(),</div>
<div class="line"><span class="lineno"> 1056</span>            <span class="stringliteral">&#39;level&#39;</span> =&gt; $level,</div>
<div class="line"><span class="lineno"> 1057</span>            <span class="stringliteral">&#39;zero&#39;</span> =&gt; $zero,</div>
<div class="line"><span class="lineno"> 1058</span>            <span class="stringliteral">&#39;endDate&#39;</span> =&gt; $endDate,</div>
<div class="line"><span class="lineno"> 1059</span>            <span class="stringliteral">&#39;monthBefore&#39;</span> =&gt; $last,</div>
<div class="line"><span class="lineno"> 1060</span>            <span class="stringliteral">&#39;institution&#39;</span> =&gt; $institution,</div>
<div class="line"><span class="lineno"> 1061</span>        ]);</div>
<div class="line"><span class="lineno"> 1062</span>        <span class="keywordflow">if</span> ($sign[<span class="stringliteral">&#39;status&#39;</span>] == <span class="stringliteral">&#39;true&#39;</span>) {</div>
<div class="line"><span class="lineno"> 1063</span>            <span class="keywordflow">return</span> response()-&gt;download($sign[<span class="stringliteral">&#39;file&#39;</span>], $sign[<span class="stringliteral">&#39;filename&#39;</span>], [], <span class="stringliteral">&#39;inline&#39;</span>);</div>
<div class="line"><span class="lineno"> 1064</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1065</span>            <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; $sign[<span class="stringliteral">&#39;status&#39;</span>], <span class="stringliteral">&#39;message&#39;</span> =&gt; $sign[<span class="stringliteral">&#39;message&#39;</span>]], 200);</div>
<div class="line"><span class="lineno"> 1066</span>        }</div>
<div class="line"><span class="lineno"> 1067</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01079">AccountingBalanceSheetController\formatDataInArray()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00112">AccountingBalanceSheetController\getCurrency()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00126">AccountingBalanceSheetController\setCurrency()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a23c281813aa2f3d73fe2c7089b2b7f03_cgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="5,79,76,104"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa825cb7aedbc4c92b3fcc708263200bc" title="Sintetiza la información de una cuenta en un array con sus respectivas subcuentas." alt="" coords="124,29,268,55"/>
<area shape="poly" title=" " alt="" coords="75,78,141,56,143,62,77,83"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a55459f9e07fdc6b85953811024ab61d3" title="Obtiene la moneda." alt="" coords="145,79,247,104"/>
<area shape="poly" title=" " alt="" coords="76,89,131,89,131,94,76,94"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece la moneda." alt="" coords="146,128,246,153"/>
<area shape="poly" title=" " alt="" coords="77,100,143,121,141,126,75,105"/>
<area shape="poly" title=" " alt="" coords="170,31,164,21,167,11,178,5,196,3,217,6,226,15,223,19,215,11,196,8,180,10,172,15,170,20,174,28"/>
</map>
</div>

</div>
</div>
<a id="ac8cc7e992a9a4e0958361ae05c79d406" name="ac8cc7e992a9a4e0958361ae05c79d406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8cc7e992a9a4e0958361ae05c79d406">&#9670;&#160;</a></span>pdfVue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdfVue </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a>&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$zero</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de balance general. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$date</td><td>Fecha </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$level</td><td>Nivel de sub cuentas máximo a mostrar </td></tr>
    <tr><td class="paramtype">Currency</td><td class="paramname">$currency</td><td>Moneda en que se expresará el reporte </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$zero</td><td>Indica si se tomaran cuentas con saldo cero</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00143">143</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  144</span>    {</div>
<div class="line"><span class="lineno">  145</span>        <span class="comment">/* Último día correspondiente al mes */</span></div>
<div class="line"><span class="lineno">  146</span>        $day = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] + 1, 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>        <span class="comment">/* Formatea la fecha final de búsqueda, (YYYY-mm-dd HH:mm:ss) */</span></div>
<div class="line"><span class="lineno">  149</span>        $endDate = $date . <span class="charliteral">&#39;-&#39;</span> . $day;</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>        $institution_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  156</span> </div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  158</span>            $institution_id = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><span class="lineno">  159</span>        }</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  162</span><span class="comment">         * consulta de cada cuenta y asiento que pertenezca a ACTIVO, PASIVO, PATRIMONIO y CUENTA DE ORDEN,</span></div>
<div class="line"><span class="lineno">  163</span><span class="comment">         * registros de las cuentas patrimoniales seleccionadas</span></div>
<div class="line"><span class="lineno">  164</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  165</span>        $query = AccountingAccount::with(<span class="stringliteral">&#39;entryAccount.entries.currency&#39;</span>)</div>
<div class="line"><span class="lineno">  166</span>            -&gt;with([<span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  167</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  168</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  169</span>                        $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  170</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  171</span>                    ) {</div>
<div class="line"><span class="lineno">  172</span>                        $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  173</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  174</span>                    }</div>
<div class="line"><span class="lineno">  175</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  176</span>                    <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  177</span>                        $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  178</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  179</span>                    }</div>
<div class="line"><span class="lineno">  180</span>                }</div>
<div class="line"><span class="lineno">  181</span>            }])</div>
<div class="line"><span class="lineno">  182</span>            -&gt;whereHas(<span class="stringliteral">&#39;entryAccount.entries&#39;</span>, <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  183</span>                $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  184</span>                    -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  185</span>            })</div>
<div class="line"><span class="lineno">  186</span>            -&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [1, 2, 3, 4])</div>
<div class="line"><span class="lineno">  187</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  188</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  189</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  190</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  191</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  192</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  193</span>            -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>        <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = [];</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>        <span class="comment">/* Se recorre y evalúa la relación en las conversiones necesarias a realizar */</span></div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">foreach</span> ($query as $record) {</div>
<div class="line"><span class="lineno">  199</span>            <span class="keywordflow">foreach</span> ($record[<span class="stringliteral">&#39;entryAccount&#39;</span>] as $entryAccount) {</div>
<div class="line"><span class="lineno">  200</span>                $inRange = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  201</span>                <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>]) {</div>
<div class="line"><span class="lineno">  202</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  203</span>                        !array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)</div>
<div class="line"><span class="lineno">  204</span>                        &amp;&amp; $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id</div>
<div class="line"><span class="lineno">  205</span>                    ) {</div>
<div class="line"><span class="lineno">  206</span>                        <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a>(</div>
<div class="line"><span class="lineno">  207</span>                            <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>,</div>
<div class="line"><span class="lineno">  208</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>],</div>
<div class="line"><span class="lineno">  209</span>                            <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id</div>
<div class="line"><span class="lineno">  210</span>                        );</div>
<div class="line"><span class="lineno">  211</span>                    }</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>                    <span class="keywordflow">foreach</span> (<a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> as $convertion) {</div>
<div class="line"><span class="lineno">  214</span>                        <span class="keywordflow">foreach</span> ($convertion as $convert) {</div>
<div class="line"><span class="lineno">  215</span>                            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  216</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &gt;= $convert[<span class="stringliteral">&#39;start_at&#39;</span>] &amp;&amp;</div>
<div class="line"><span class="lineno">  217</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &lt;= $convert[<span class="stringliteral">&#39;end_at&#39;</span>]</div>
<div class="line"><span class="lineno">  218</span>                            ) {</div>
<div class="line"><span class="lineno">  219</span>                                $inRange = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  220</span>                            }</div>
<div class="line"><span class="lineno">  221</span>                        }</div>
<div class="line"><span class="lineno">  222</span>                    }</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  225</span>                        !array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)</div>
<div class="line"><span class="lineno">  226</span>                        &amp;&amp; $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id</div>
<div class="line"><span class="lineno">  227</span>                    ) {</div>
<div class="line"><span class="lineno">  228</span>                        <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  229</span>                            <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  230</span>                            <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  231</span>                            . <span class="stringliteral">&#39; (&#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span></div>
<div class="line"><span class="lineno">  232</span>                            . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  233</span>                            <span class="stringliteral">&#39;, verificar tipos de cambio configurados. Para la fecha de &#39;</span> .</div>
<div class="line"><span class="lineno">  234</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno">  235</span>                        ], 200);</div>
<div class="line"><span class="lineno">  236</span>                    } elseif (!$inRange) {</div>
<div class="line"><span class="lineno">  237</span>                        <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id) {</div>
<div class="line"><span class="lineno">  238</span>                            <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  239</span>                                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  240</span>                                <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  241</span>                                . <span class="stringliteral">&#39; (&#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span></div>
<div class="line"><span class="lineno">  242</span>                                . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  243</span>                                <span class="stringliteral">&#39;, verificar tipos de cambio configurados. Para la fecha de &#39;</span> .</div>
<div class="line"><span class="lineno">  244</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno">  245</span>                            ], 200);</div>
<div class="line"><span class="lineno">  246</span>                        }</div>
<div class="line"><span class="lineno">  247</span>                    }</div>
<div class="line"><span class="lineno">  248</span>                }</div>
<div class="line"><span class="lineno">  249</span>            }</div>
<div class="line"><span class="lineno">  250</span>        }</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>        <span class="comment">/* Enlace para el reporte */</span></div>
<div class="line"><span class="lineno">  253</span>        $url = <span class="stringliteral">&#39;BalanceSheet/&#39;</span> . $endDate . <span class="charliteral">&#39;/&#39;</span> . $level . <span class="charliteral">&#39;/&#39;</span> . $zero;</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>        $currentDate = <span class="keyword">new</span> DateTime();</div>
<div class="line"><span class="lineno">  256</span>        $currentDate = $currentDate-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>        <span class="comment">/* Almacena el registro del reporte del día si existe */</span></div>
<div class="line"><span class="lineno">  259</span>        $report = AccountingReportHistory::whereBetween(<span class="stringliteral">&#39;updated_at&#39;</span>, [</div>
<div class="line"><span class="lineno">  260</span>            $currentDate . <span class="stringliteral">&#39; 00:00:00&#39;</span>,</div>
<div class="line"><span class="lineno">  261</span>            $currentDate . <span class="stringliteral">&#39; 23:59:59&#39;</span>,</div>
<div class="line"><span class="lineno">  262</span>        ])</div>
<div class="line"><span class="lineno">  263</span>            -&gt;where(<span class="stringliteral">&#39;report&#39;</span>, <span class="stringliteral">&#39;Balance General&#39;</span>)</div>
<div class="line"><span class="lineno">  264</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;first();</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>        <span class="comment">/* se crea o actualiza el registro del reporte*/</span></div>
<div class="line"><span class="lineno">  267</span>        <span class="keywordflow">if</span> (!$report) {</div>
<div class="line"><span class="lineno">  268</span>            $report = AccountingReportHistory::create(</div>
<div class="line"><span class="lineno">  269</span>                [</div>
<div class="line"><span class="lineno">  270</span>                    <span class="stringliteral">&#39;report&#39;</span> =&gt; <span class="stringliteral">&#39;Balance General&#39;</span>,</div>
<div class="line"><span class="lineno">  271</span>                    <span class="stringliteral">&#39;url&#39;</span> =&gt; $url,</div>
<div class="line"><span class="lineno">  272</span>                    <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id,</div>
<div class="line"><span class="lineno">  273</span>                    <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; $institution_id,</div>
<div class="line"><span class="lineno">  274</span>                ]</div>
<div class="line"><span class="lineno">  275</span>            );</div>
<div class="line"><span class="lineno">  276</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  277</span>            $report-&gt;url = $url;</div>
<div class="line"><span class="lineno">  278</span>            $report-&gt;currency_id = <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id;</div>
<div class="line"><span class="lineno">  279</span>            $report-&gt;institution_id = $institution_id;</div>
<div class="line"><span class="lineno">  280</span>            $report-&gt;save();</div>
<div class="line"><span class="lineno">  281</span>        }</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  284</span><span class="comment">         * El siguiente segmento es necesario para evaluar cuando se va a mostrar</span></div>
<div class="line"><span class="lineno">  285</span><span class="comment">         * información y cuando no en el reporte.</span></div>
<div class="line"><span class="lineno">  286</span><span class="comment">         * [$records Registros disponibles para mostrarse]</span></div>
<div class="line"><span class="lineno">  287</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>        $endDate = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[1];</div>
<div class="line"><span class="lineno">  290</span>        $level = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[2];</div>
<div class="line"><span class="lineno">  291</span>        $zero = explode(<span class="charliteral">&#39;/&#39;</span>, $report-&gt;url)[3] == <span class="stringliteral">&#39;true&#39;</span> ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  292</span>        $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe">setCurrency</a>($report-&gt;currency);</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  295</span>            $institution = Institution::where(<span class="stringliteral">&#39;default&#39;</span>, <span class="keyword">true</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  296</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  297</span>            $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)</div>
<div class="line"><span class="lineno">  298</span>                -&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  299</span>            $institution = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>] ?? <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  300</span>        }</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>        $records = AccountingEntry::with([<span class="stringliteral">&#39;accountingAccounts&#39;</span> =&gt; <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  303</span>            $query-&gt;with(<span class="stringliteral">&#39;account&#39;</span>)</div>
<div class="line"><span class="lineno">  304</span>                -&gt;whereHas(<span class="stringliteral">&#39;account&#39;</span>, <span class="keyword">function</span> ($query) {</div>
<div class="line"><span class="lineno">  305</span>                    $query-&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [1, 2, 3, 4]);</div>
<div class="line"><span class="lineno">  306</span>                });</div>
<div class="line"><span class="lineno">  307</span>        }])</div>
<div class="line"><span class="lineno">  308</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution-&gt;id)</div>
<div class="line"><span class="lineno">  309</span>            -&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)</div>
<div class="line"><span class="lineno">  310</span>            -&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  311</span>            -&gt;get();</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>        $dataInToEndDate = $records-&gt;toArray();</div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">if</span> ($dataInToEndDate == []) {</div>
<div class="line"><span class="lineno">  315</span>            <span class="keywordflow">return</span> response()-&gt;json(</div>
<div class="line"><span class="lineno">  316</span>                [</div>
<div class="line"><span class="lineno">  317</span>                    <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  318</span>                    <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;No se ha encontrado ningún registro que cumpla con los parámetros establecidos.&#39;</span>,</div>
<div class="line"><span class="lineno">  319</span>                ],</div>
<div class="line"><span class="lineno">  320</span>                200</div>
<div class="line"><span class="lineno">  321</span>            );</div>
<div class="line"><span class="lineno">  322</span>        }</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $report-&gt;id], 200);</div>
<div class="line"><span class="lineno">  325</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController\$convertions</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00058">AccountingBalanceSheetController\$currency</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01227">AccountingBalanceSheetController\calculateExchangeRates()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00126">AccountingBalanceSheetController\setCurrency()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ac8cc7e992a9a4e0958361ae05c79d406_cgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="5,31,72,56"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="120,5,301,31"/>
<area shape="poly" title=" " alt="" coords="72,36,111,30,111,35,73,41"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a4a9edafe924a4efeb9d1a9daf1bc1dfe" title="Establece la moneda." alt="" coords="161,55,261,80"/>
<area shape="poly" title=" " alt="" coords="73,45,148,56,147,61,72,51"/>
</map>
</div>

</div>
</div>
<a id="ab6d7280e9d9218f3f62918686cd7906d" name="ab6d7280e9d9218f3f62918686cd7906d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d7280e9d9218f3f62918686cd7906d">&#9670;&#160;</a></span>pdfVueSign()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pdfVueSign </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a>&#160;</td>
          <td class="paramname"><em>$currency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$zero</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Genera el reporte en pdf de balance general. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$date</td><td>Fecha </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$level</td><td>Nivel de sub cuentas máximo a mostrar </td></tr>
    <tr><td class="paramtype">Currency</td><td class="paramname">$currency</td><td>Moneda en que se expresará el reporte </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$zero</td><td>Si se tomaran cuentas con saldo cero</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>JsonResponse </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00339">339</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  340</span>    {</div>
<div class="line"><span class="lineno">  341</span>        <span class="comment">/* Último día correspondiente al mes */</span></div>
<div class="line"><span class="lineno">  342</span>        $day = date(<span class="charliteral">&#39;d&#39;</span>, (mktime(0, 0, 0, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[1] + 1, 1, explode(<span class="charliteral">&#39;-&#39;</span>, $date)[0]) - 1));</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>        <span class="comment">/* Formatea la fecha final de busqueda, (YYYY-mm-dd HH:mm:ss) */</span></div>
<div class="line"><span class="lineno">  345</span>        $endDate = $date . <span class="charliteral">&#39;-&#39;</span> . $day;</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>        $institution_id = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>        $user_profile = Profile::with(<span class="stringliteral">&#39;institution&#39;</span>)-&gt;where(<span class="stringliteral">&#39;user_id&#39;</span>, auth()-&gt;user()-&gt;<span class="keywordtype">id</span>)-&gt;first();</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>        $is_admin = auth()-&gt;user()-&gt;isAdmin();</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">if</span> (!$is_admin &amp;&amp; $user_profile[<span class="stringliteral">&#39;institution&#39;</span>]) {</div>
<div class="line"><span class="lineno">  354</span>            $institution_id = $user_profile[<span class="stringliteral">&#39;institution&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><span class="lineno">  355</span>        }</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>        <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  358</span><span class="comment">         * Consulta de cada cuenta y asiento que pertenezca a ACTIVO, PASIVO, PATRIMONIO y CUENTA DE ORDEN,</span></div>
<div class="line"><span class="lineno">  359</span><span class="comment">         * registros de las cuentas patrimoniales seleccionadas</span></div>
<div class="line"><span class="lineno">  360</span><span class="comment">         */</span></div>
<div class="line"><span class="lineno">  361</span>        $query = AccountingAccount::with(<span class="stringliteral">&#39;entryAccount.entries.currency&#39;</span>)</div>
<div class="line"><span class="lineno">  362</span>            -&gt;with([<span class="stringliteral">&#39;entryAccount.entries&#39;</span> =&gt; <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  363</span>                <span class="keywordflow">if</span> ($institution_id) {</div>
<div class="line"><span class="lineno">  364</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  365</span>                        $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  366</span>                        -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)</div>
<div class="line"><span class="lineno">  367</span>                    ) {</div>
<div class="line"><span class="lineno">  368</span>                        $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, true)</div>
<div class="line"><span class="lineno">  369</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  370</span>                    }</div>
<div class="line"><span class="lineno">  371</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  372</span>                    <span class="keywordflow">if</span> ($is_admin) {</div>
<div class="line"><span class="lineno">  373</span>                        $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  374</span>                            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  375</span>                    }</div>
<div class="line"><span class="lineno">  376</span>                }</div>
<div class="line"><span class="lineno">  377</span>            }])</div>
<div class="line"><span class="lineno">  378</span>            -&gt;whereHas(<span class="stringliteral">&#39;entryAccount.entries&#39;</span>, <span class="keyword">function</span> ($query) use ($endDate, $institution_id, $is_admin) {</div>
<div class="line"><span class="lineno">  379</span>                $query-&gt;where(<span class="stringliteral">&#39;from_date&#39;</span>, <span class="stringliteral">&#39;&lt;=&#39;</span>, $endDate)-&gt;where(<span class="stringliteral">&#39;approved&#39;</span>, <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  380</span>                    -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id);</div>
<div class="line"><span class="lineno">  381</span>            })</div>
<div class="line"><span class="lineno">  382</span>            -&gt;whereIn(<span class="stringliteral">&#39;group&#39;</span>, [1, 2, 3, 4])</div>
<div class="line"><span class="lineno">  383</span>            -&gt;where(<span class="stringliteral">&#39;subgroup&#39;</span>, 0)</div>
<div class="line"><span class="lineno">  384</span>            -&gt;orderBy(<span class="stringliteral">&#39;group&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  385</span>            -&gt;orderBy(<span class="stringliteral">&#39;subgroup&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  386</span>            -&gt;orderBy(<span class="stringliteral">&#39;item&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  387</span>            -&gt;orderBy(<span class="stringliteral">&#39;generic&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  388</span>            -&gt;orderBy(<span class="stringliteral">&#39;specific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  389</span>            -&gt;orderBy(<span class="stringliteral">&#39;subspecific&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)</div>
<div class="line"><span class="lineno">  390</span>            -&gt;orderBy(<span class="stringliteral">&#39;denomination&#39;</span>, <span class="stringliteral">&#39;ASC&#39;</span>)-&gt;get();</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>        <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = [];</div>
<div class="line"><span class="lineno">  393</span> </div>
<div class="line"><span class="lineno">  394</span>        <span class="comment">/* Se recorre y evalúa la relación en las conversiones necesarias a realizar */</span></div>
<div class="line"><span class="lineno">  395</span>        <span class="keywordflow">foreach</span> ($query as $record) {</div>
<div class="line"><span class="lineno">  396</span>            <span class="keywordflow">foreach</span> ($record[<span class="stringliteral">&#39;entryAccount&#39;</span>] as $entryAccount) {</div>
<div class="line"><span class="lineno">  397</span>                $inRange = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  398</span>                <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>]) {</div>
<div class="line"><span class="lineno">  399</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  400</span>                        !array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)</div>
<div class="line"><span class="lineno">  401</span>                        &amp;&amp; $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id</div>
<div class="line"><span class="lineno">  402</span>                    ) {</div>
<div class="line"><span class="lineno">  403</span>                        <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> = $this-&gt;<a class="code hl_function" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605">calculateExchangeRates</a>(</div>
<div class="line"><span class="lineno">  404</span>                            <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>,</div>
<div class="line"><span class="lineno">  405</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>],</div>
<div class="line"><span class="lineno">  406</span>                            <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id</div>
<div class="line"><span class="lineno">  407</span>                        );</div>
<div class="line"><span class="lineno">  408</span>                    }</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>                    <span class="keywordflow">foreach</span> (<a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a> as $convertion) {</div>
<div class="line"><span class="lineno">  411</span>                        <span class="keywordflow">foreach</span> ($convertion as $convert) {</div>
<div class="line"><span class="lineno">  412</span>                            <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  413</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &gt;= $convert[<span class="stringliteral">&#39;start_at&#39;</span>] &amp;&amp;</div>
<div class="line"><span class="lineno">  414</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>] &lt;= $convert[<span class="stringliteral">&#39;end_at&#39;</span>]</div>
<div class="line"><span class="lineno">  415</span>                            ) {</div>
<div class="line"><span class="lineno">  416</span>                                $inRange = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  417</span>                            }</div>
<div class="line"><span class="lineno">  418</span>                        }</div>
<div class="line"><span class="lineno">  419</span>                    }</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>                    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  422</span>                        !array_key_exists($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>], <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>)</div>
<div class="line"><span class="lineno">  423</span>                        &amp;&amp; $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id</div>
<div class="line"><span class="lineno">  424</span>                    ) {</div>
<div class="line"><span class="lineno">  425</span>                        <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  426</span>                            <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  427</span>                            <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  428</span>                            . <span class="stringliteral">&#39; (&#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span></div>
<div class="line"><span class="lineno">  429</span>                            . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  430</span>                            <span class="stringliteral">&#39;, verificar tipos de cambio configurados. Para la fecha de &#39;</span> .</div>
<div class="line"><span class="lineno">  431</span>                            $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno">  432</span>                        ], 200);</div>
<div class="line"><span class="lineno">  433</span>                    } elseif (!$inRange) {</div>
<div class="line"><span class="lineno">  434</span>                        <span class="keywordflow">if</span> ($entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;id&#39;</span>] != <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id) {</div>
<div class="line"><span class="lineno">  435</span>                            <span class="keywordflow">return</span> response()-&gt;json([</div>
<div class="line"><span class="lineno">  436</span>                                <span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  437</span>                                <span class="stringliteral">&#39;message&#39;</span> =&gt; <span class="stringliteral">&#39;Imposible expresar &#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;symbol&#39;</span>]</div>
<div class="line"><span class="lineno">  438</span>                                . <span class="stringliteral">&#39; (&#39;</span> . $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;currency&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span></div>
<div class="line"><span class="lineno">  439</span>                                . <span class="stringliteral">&#39; en &#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;symbol&#39;</span>] . <span class="charliteral">&#39;(&#39;</span> . <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>[<span class="stringliteral">&#39;name&#39;</span>] . <span class="charliteral">&#39;)&#39;</span> .</div>
<div class="line"><span class="lineno">  440</span>                                <span class="stringliteral">&#39;, verificar tipos de cambio configurados. Para la fecha de &#39;</span> .</div>
<div class="line"><span class="lineno">  441</span>                                $entryAccount[<span class="stringliteral">&#39;entries&#39;</span>][<span class="stringliteral">&#39;from_date&#39;</span>],</div>
<div class="line"><span class="lineno">  442</span>                            ], 200);</div>
<div class="line"><span class="lineno">  443</span>                        }</div>
<div class="line"><span class="lineno">  444</span>                    }</div>
<div class="line"><span class="lineno">  445</span>                }</div>
<div class="line"><span class="lineno">  446</span>            }</div>
<div class="line"><span class="lineno">  447</span>        }</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>        <span class="comment">/* Enlace para el reporte */</span></div>
<div class="line"><span class="lineno">  450</span>        $url = <span class="stringliteral">&#39;BalanceSheetSign/&#39;</span> . $endDate . <span class="charliteral">&#39;/&#39;</span> . $level . <span class="charliteral">&#39;/&#39;</span> . $zero;</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>        $currentDate = <span class="keyword">new</span> DateTime();</div>
<div class="line"><span class="lineno">  453</span>        $currentDate = $currentDate-&gt;format(<span class="stringliteral">&#39;Y-m-d&#39;</span>);</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>        <span class="comment">/* Almacena el registro del reporte del día si existe */</span></div>
<div class="line"><span class="lineno">  456</span>        $report = AccountingReportHistory::whereBetween(<span class="stringliteral">&#39;updated_at&#39;</span>, [</div>
<div class="line"><span class="lineno">  457</span>            $currentDate . <span class="stringliteral">&#39; 00:00:00&#39;</span>,</div>
<div class="line"><span class="lineno">  458</span>            $currentDate . <span class="stringliteral">&#39; 23:59:59&#39;</span>,</div>
<div class="line"><span class="lineno">  459</span>        ])</div>
<div class="line"><span class="lineno">  460</span>            -&gt;where(<span class="stringliteral">&#39;report&#39;</span>, <span class="stringliteral">&#39;Balance General&#39;</span>)</div>
<div class="line"><span class="lineno">  461</span>            -&gt;where(<span class="stringliteral">&#39;institution_id&#39;</span>, $institution_id)-&gt;first();</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>        <span class="comment">/* se crea o actualiza el registro del reporte */</span></div>
<div class="line"><span class="lineno">  464</span>        <span class="keywordflow">if</span> (!$report) {</div>
<div class="line"><span class="lineno">  465</span>            $report = AccountingReportHistory::create(</div>
<div class="line"><span class="lineno">  466</span>                [</div>
<div class="line"><span class="lineno">  467</span>                    <span class="stringliteral">&#39;report&#39;</span> =&gt; <span class="stringliteral">&#39;Balance General&#39;</span>,</div>
<div class="line"><span class="lineno">  468</span>                    <span class="stringliteral">&#39;url&#39;</span> =&gt; $url,</div>
<div class="line"><span class="lineno">  469</span>                    <span class="stringliteral">&#39;currency_id&#39;</span> =&gt; <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id,</div>
<div class="line"><span class="lineno">  470</span>                    <span class="stringliteral">&#39;institution_id&#39;</span> =&gt; $institution_id,</div>
<div class="line"><span class="lineno">  471</span>                ]</div>
<div class="line"><span class="lineno">  472</span>            );</div>
<div class="line"><span class="lineno">  473</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  474</span>            $report-&gt;url = $url;</div>
<div class="line"><span class="lineno">  475</span>            $report-&gt;currency_id = <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>-&gt;id;</div>
<div class="line"><span class="lineno">  476</span>            $report-&gt;institution_id = $institution_id;</div>
<div class="line"><span class="lineno">  477</span>            $report-&gt;save();</div>
<div class="line"><span class="lineno">  478</span>        }</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>        <span class="keywordflow">return</span> response()-&gt;json([<span class="stringliteral">&#39;result&#39;</span> =&gt; <span class="keyword">true</span>, <span class="stringliteral">&#39;id&#39;</span> =&gt; $report-&gt;id], 200);</div>
<div class="line"><span class="lineno">  481</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController\$convertions</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00058">AccountingBalanceSheetController\$currency</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01227">AccountingBalanceSheetController\calculateExchangeRates()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas de esta función:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab6d7280e9d9218f3f62918686cd7906d_cgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab6d7280e9d9218f3f62918686cd7906d_cgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab6d7280e9d9218f3f62918686cd7906d_cgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_ab6d7280e9d9218f3f62918686cd7906d_cgraph">
<area shape="rect" title="Genera el reporte en pdf de balance general." alt="" coords="5,5,100,31"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ab0ddffde595d12d9c85da6f4c1eb2605" title="Encuentra los tipos de cambio." alt="" coords="148,5,329,31"/>
<area shape="poly" title=" " alt="" coords="100,15,134,15,134,21,100,21"/>
</map>
</div>

</div>
</div>
<a id="a678f5c49204c69d24b2b293794996ecd" name="a678f5c49204c69d24b2b293794996ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678f5c49204c69d24b2b293794996ecd">&#9670;&#160;</a></span>setConvertions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setConvertions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$convertions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establece el listado de conversiones. </p>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$convertions</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00092">92</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>    {</div>
<div class="line"><span class="lineno">   94</span>        $this-&gt;convertions = <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#aa909c5b20912c383ac43c7e672007a1d">$convertions</a>;</div>
<div class="line"><span class="lineno">   95</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">AccountingBalanceSheetController\$convertions</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01132">AccountingBalanceSheetController\calculateValuesInEntries()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a678f5c49204c69d24b2b293794996ecd_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a678f5c49204c69d24b2b293794996ecd_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a678f5c49204c69d24b2b293794996ecd_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a678f5c49204c69d24b2b293794996ecd_icgraph">
<area shape="rect" title="Establece el listado de conversiones." alt="" coords="235,29,355,55"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6e29f82d56bc92e45daa978c31e35cd6" title="Realiza el cálculo de saldo de la cuenta tomando en cuenta todos sus subcuentas, hasta llegar al últi..." alt="" coords="5,29,187,55"/>
<area shape="poly" title=" " alt="" coords="221,45,187,45,187,39,221,39"/>
<area shape="poly" title=" " alt="" coords="131,19,121,11,96,8,75,10,64,15,62,20,68,28,63,31,57,21,60,11,74,5,96,3,123,6,134,15"/>
</map>
</div>

</div>
</div>
<a id="a4a9edafe924a4efeb9d1a9daf1bc1dfe" name="a4a9edafe924a4efeb9d1a9daf1bc1dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a9edafe924a4efeb9d1a9daf1bc1dfe">&#9670;&#160;</a></span>setCurrency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setCurrency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$currency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establece la moneda. </p>
<dl class="section author"><dt>Autor</dt><dd>Juan Rosas <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'sa'+'s@c'+'en'+'dit'+'el'+'.go'+'b.'+'ve'; return false;">jrosa<span class="obfuscator">.nosp@m.</span>s@ce<span class="obfuscator">.nosp@m.</span>ndite<span class="obfuscator">.nosp@m.</span>l.go<span class="obfuscator">.nosp@m.</span>b.ve</a> | <a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'ros'+'as'+'r01'+'@g'+'mai'+'l.'+'com'; return false;">juan.<span class="obfuscator">.nosp@m.</span>rosa<span class="obfuscator">.nosp@m.</span>sr01@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a></dd></dl>
<dl class="params"><dt>Parámetros</dt><dd>
  <table class="params">
    <tr><td class="paramtype">Currency</td><td class="paramname">$currency</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Devuelve</dt><dd>void </dd></dl>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00126">126</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>    {</div>
<div class="line"><span class="lineno">  128</span>        $this-&gt;currency = <a class="code hl_variable" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a6ec628a1048bd2ab581320d0aa1aed30">$currency</a>;</div>
<div class="line"><span class="lineno">  129</span>    }</div>
</div><!-- fragment -->
<p class="reference">Hace referencia a <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00058">AccountingBalanceSheetController\$currency</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00504">AccountingBalanceSheetController\pdf()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00931">AccountingBalanceSheetController\pdfSign()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00143">AccountingBalanceSheetController\pdfVue()</a>.</p>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Gráfico de llamadas a esta función:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph.png" border="0" usemap="#ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph" alt=""/></div>
<map name="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph" id="ad4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController_a4a9edafe924a4efeb9d1a9daf1bc1dfe_icgraph">
<area shape="rect" title="Establece la moneda." alt="" coords="236,55,336,80"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a5c0379fc68799a3f32447bd6760dcd02" title="Genera el reporte en pdf de balance general." alt="" coords="131,5,174,31"/>
<area shape="poly" title=" " alt="" coords="238,52,173,28,175,23,239,47"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23c281813aa2f3d73fe2c7089b2b7f03" title="Genera el reporte en pdf de balance general." alt="" coords="117,55,188,80"/>
<area shape="poly" title=" " alt="" coords="222,70,188,70,188,65,222,65"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#ac8cc7e992a9a4e0958361ae05c79d406" title="Genera el reporte en pdf de balance general." alt="" coords="119,104,186,129"/>
<area shape="poly" title=" " alt="" coords="239,87,187,107,185,102,237,82"/>
<area shape="rect" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html#a23d7453ab9e51eca5ab50a38ce4a84c0" title="Genera el reporte en hojade calculo de balance general." alt="" coords="5,5,69,31"/>
<area shape="poly" title=" " alt="" coords="118,21,70,21,70,15,118,15"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Documentación de campos</h2>
<a id="aa909c5b20912c383ac43c7e672007a1d" name="aa909c5b20912c383ac43c7e672007a1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa909c5b20912c383ac43c7e672007a1d">&#9670;&#160;</a></span>$convertions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">array $convertions = []</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lista de conversiones validas. </p>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00051">51</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01227">AccountingBalanceSheetController\calculateExchangeRates()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01196">AccountingBalanceSheetController\calculateOperation()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00080">AccountingBalanceSheetController\getConvertions()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00143">AccountingBalanceSheetController\pdfVue()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00339">AccountingBalanceSheetController\pdfVueSign()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00092">AccountingBalanceSheetController\setConvertions()</a>.</p>

</div>
</div>
<a id="a6ec628a1048bd2ab581320d0aa1aed30" name="a6ec628a1048bd2ab581320d0aa1aed30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec628a1048bd2ab581320d0aa1aed30">&#9670;&#160;</a></span>$currency</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/da0/classModules_1_1Accounting_1_1Models_1_1Currency.html">Currency</a> $currency = null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Moneda en la que se expresara el reporte. </p>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00058">58</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00112">AccountingBalanceSheetController\getCurrency()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00143">AccountingBalanceSheetController\pdfVue()</a>, <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00339">AccountingBalanceSheetController\pdfVueSign()</a> y <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00126">AccountingBalanceSheetController\setCurrency()</a>.</p>

</div>
</div>
<a id="a311b3d7033e348395d71484904c44767" name="a311b3d7033e348395d71484904c44767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a311b3d7033e348395d71484904c44767">&#9670;&#160;</a></span>$PageBreakTrigger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">mixed $PageBreakTrigger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Establece el trigger de salto de página. </p>

<p class="definition">Definición en la línea <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l00044">44</a> del archivo <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a>.</p>

<p class="reference">Referenciado por <a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html#l01257">AccountingBalanceSheetController\getCheckBreak()</a>.</p>

</div>
</div>
<hr/>La documentación de esta clase está generada del siguiente archivo:<ul>
<li><a class="el" href="../../df/d8a/AccountingBalanceSheetController_8php_source.html">AccountingBalanceSheetController.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Modules</b></li><li class="navelem"><b>Accounting</b></li><li class="navelem"><b>Http</b></li><li class="navelem"><b>Controllers</b></li><li class="navelem"><b>Reports</b></li><li class="navelem"><a class="el" href="../../d4/de3/classModules_1_1Accounting_1_1Http_1_1Controllers_1_1Reports_1_1AccountingBalanceSheetController.html">AccountingBalanceSheetController</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
